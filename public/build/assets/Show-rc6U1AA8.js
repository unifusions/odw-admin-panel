import{j as e,W as M,q as V,r as j,y as B}from"./app-Cxiu3gMj.js";import{B as d,c as E}from"./button-BsSaNFyx.js";import{C as t,a as i,b as l,d as c,e as L}from"./card-BmUdsQaW.js";import{A as R,B as p,F}from"./AuthenticatedLayout-BBYz7AZX.js";import{L as g}from"./label-jjRuK-LC.js";import{S as q,a as T,b as U,c as z,d as W}from"./select-DWMrQUbg.js";import{C as X}from"./checkbox-CpmxpK-i.js";import{L as $}from"./link-button-BTsJsGPv.js";import{E as H}from"./eye-Vd70EV0o.js";import{M as O}from"./mail-Dbt3Zltu.js";import{P as Q}from"./phone-DvCVo2_m.js";import{C as G}from"./circle-x-BuAgB0Fo.js";import{C as x}from"./circle-check-big-BpxoO03G.js";import{P as N}from"./paperclip-DONG8g8-.js";import{T as J}from"./textarea-BVCk6M7Z.js";import{F as K}from"./FileUploader-DFgPw0LV.js";import{S as D}from"./send-BUwvoReG.js";import{A as I}from"./arrow-left-D_Ev-XdV.js";import{M as Y,C as Z}from"./message-square-CqUX1aWG.js";import{c as ee}from"./createLucideIcon-D4P67K03.js";import{S as A}from"./stethoscope-B1VJ4sY7.js";import{U as se}from"./user-DIcaBjam.js";import{S as v}from"./shield-0SN27mwB.js";import{C as ae}from"./clock-PMtx0yIX.js";import{F as re}from"./file-exclamation-point-DC0tarJ1.js";import"./app-Dgm9znLA.js";import"./index-Goy6Z_Xv.js";import"./input-CHhF9hnF.js";import"./index-CsONDyV6.js";import"./index-CH5VBVbz.js";import"./index-Cpns4x5X.js";import"./Combination-B8Gcb3K7.js";import"./tslib.es6-BUas5LQb.js";import"./index-DgbDRJUY.js";import"./index-CSx-WhMr.js";import"./floating-ui.react-dom-BWaGdzlE.js";import"./floating-ui.dom-g0iQpA8R.js";import"./index-6essUud2.js";import"./index-Cow8FGOx.js";import"./chevron-down-Bl0c9ZyU.js";import"./check-BRDBi-5_.js";import"./index-CNNv-3AY.js";import"./index-BxJM22g-.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],ce=ee("calendar-x",te);function ie({patient:s}){return e.jsxs(t,{className:"shadow-card hover:shadow-card-hover transition-all animate-fade-in cursor-pointer",children:[e.jsx(i,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-lg font-semibold text-primary",children:s==null?void 0:s.first_name.split(" ").map(m=>m[0]).join("")}),e.jsx("div",{children:e.jsx(l,{className:"text-base",children:s==null?void 0:s.first_name})})]}),e.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",href:route("patients.show",s),children:e.jsx(H,{className:"h-4 w-4"})})]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:s==null?void 0:s.phone_number})]})]})]},s==null?void 0:s.id)}function le({opinion:s}){return e.jsxs(t,{className:"shadow-card border-2 border-success/30 bg-success/5",children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2 text-success",children:[s.status==="rejected"?e.jsx(G,{className:"h-5 w-5"}):e.jsx(x,{className:"h-5 w-5"}),s.status==="rejected"?"Rejection Response":"Expert Response"]})}),e.jsx(c,{children:e.jsx("p",{className:"text-sm",children:s.replies.reply_message})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.replies.file_name," "]})]})})]})}function ne({so:s,isDisabled:m}){const{data:n,post:w,processing:h,errors:y,reset:b,setData:o}=M({message:"",opinion:null}),u=r=>{r.preventDefault(),w(route("second-opinion.replies.store",{second_opinion:s}),{forceFormData:!0})};return e.jsx(e.Fragment,{children:e.jsx(t,{className:"shadow-card",children:e.jsxs("form",{onSubmit:u,children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Write Response"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"response",children:"Response to Patient *"}),e.jsx(J,{id:"response",placeholder:"Enter your professional opinion, recommendations, and any additional notes...",value:n.message,onChange:r=>o("message",r.target.value),rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"",children:"Attach File(if any)"}),e.jsx(K,{onFileSelect:r=>o("opinion",r),selectedFile:n.opinion})]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(d,{type:"submit",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Send Response"]})})]})]})})})}const de=["In Review","Completed"],f={in_review:{label:"In Review",icon:ae,class:"bg-warning/10 text-warning"},insurance_review:{label:"Insurance Review",icon:v,class:"bg-info/10 text-info"},answered:{label:"Answered",icon:x,class:"bg-success/10 text-success"},closed:{label:"Closed",icon:x,class:"bg-success/10 text-success"},pending:{label:"Pending",icon:re,class:"bg-destructive/10 text-destructive"}},es=()=>{var r,S,C,k,_;const{opinion:s,replied:m}=V().props;j.useState((s==null?void 0:s.response)||"");const[n,w]=j.useState((s==null?void 0:s.assignedDoctor)||""),[h,y]=j.useState((s==null?void 0:s.insuranceVerified)||!1);if(!s)return e.jsx(R,{title:"Second Opinion",subtitle:"Request not found",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Second opinion request not found."}),e.jsxs(d,{variant:"outline",className:"mt-4",onClick:()=>navigate("/second-opinion"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Second Opinions"]})]})});const b=(r=f[s==null?void 0:s.status])==null?void 0:r.icon,o=()=>{setOpinion({...s,status:"insurance_review"}),toast({title:"Status Updated",description:"Marked for insurance review"})},u=()=>{n&&(setOpinion({...s,status:"in_review",assignedDoctor:n,insuranceVerified:h}),toast({title:"Doctor Assigned",description:`Case assigned to ${n}`}))};return e.jsxs(R,{pageTitle:"Second Opinion Details",subTitle:`Review request SO-${s.id}`,children:[e.jsxs(d,{variant:"ghost",className:"mb-4",onClick:()=>B.get(route("second-opinion.index")),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Second Opinions"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(t,{className:"shadow-card",children:e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(Y,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:(S=s==null?void 0:s.patient)==null?void 0:S.first_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["SO-",s.id]}),e.jsx("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:s.is_quick&&e.jsx(p,{children:" Quick Opinion "})})]})]}),e.jsxs(p,{className:E("flex items-center gap-1",(C=f[s==null?void 0:s.status])==null?void 0:C.class),children:[e.jsx(b,{className:"h-3 w-3"}),(k=f[s==null?void 0:s.status])==null?void 0:k.label]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((_=s==null?void 0:s.patient)==null?void 0:_.email)??"No Email Found"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Requested ",s==null?void 0:s.created_at]})]}),(s==null?void 0:s.last_visit)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Last visited ",s==null?void 0:s.last_visit]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.attachments.length," attachment",(s==null?void 0:s.attachments.length)>1?"s":""]})]})]})]})}),e.jsxs(t,{className:"shadow-card",children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Original Diagnosis"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"rounded-lg bg-muted/50 p-4 mb-4",children:e.jsx("p",{className:"text-sm font-medium",children:s==null?void 0:s.subject})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs(t,{className:"shadow-card",children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Attachments"]})}),e.jsx(c,{children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:s==null?void 0:s.attachments.map((a,P)=>e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border-border p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsx(F,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:[a.file_name,".",a.file_type]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.file_type," Document"]})]})]},P))})})]}),m?e.jsx(le,{opinion:s}):e.jsx(ne,{so:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{className:"shadow-card",children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Assign Status"]})}),e.jsx(c,{children:s.assignedDoctor?e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(se,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.assignedDoctor}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reviewing case"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(q,{children:[e.jsx(T,{children:e.jsx(U,{placeholder:"Select a doctor"})}),e.jsx(z,{children:de.map(a=>e.jsx(W,{value:a,children:a},a))})]}),e.jsxs(d,{className:"w-full",onClick:u,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Assign Status"]})]})})]}),s.patient&&e.jsx(ie,{patient:s.patient}),s.insuranceProvider&&e.jsxs(t,{className:"shadow-card",children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Insurance Verification"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"font-medium",children:s.insuranceProvider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Insurance Provider"})]}),!s.insuranceVerified&&s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{id:"insurance-verified",checked:h,onCheckedChange:a=>y(a)}),e.jsx(g,{htmlFor:"insurance-verified",className:"text-sm",children:"Coverage Verified"})]}),e.jsxs(d,{variant:"outline",className:"w-full",onClick:o,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Mark for Insurance Review"]})]}),s.insuranceVerified&&e.jsxs(p,{className:"bg-success/10 text-success w-full justify-center py-2",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Insurance Verified"]})]})]})]})]})]})};export{es as default};
