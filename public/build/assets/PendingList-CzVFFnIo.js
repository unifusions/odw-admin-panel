import{r as e,W as D,q,j as a,Y as E}from"./app-BDrvQ-Fh.js";import{A as H}from"./AuthenticatedLayout-Dmurvagr.js";import R from"./Modal-DEhnwV_u.js";import{f as L}from"./format-CW6KcVUP.js";import{p as O}from"./parse-i6e8GMd_.js";import"./app-D_D9UtE4.js";import"./index-BsO8Jy5G.js";import"./button-C9DuKgUG.js";import"./input-BFYME9wT.js";import"./createLucideIcon-HlBZp8tO.js";import"./message-square-VlcRmtPN.js";import"./stethoscope-ChF4dvUK.js";import"./addDays--5Ovw2Cz.js";function na({appointments:F}){var u,b,f,x,p,j,y,N,v,C;const[s,i]=e.useState(null),o=e.useRef(null),I=e.useRef(null),S=e.useRef(null),{data:P,put:t,processing:W,errors:Y,reset:$}=D(),[d,l]=e.useState(null),{auth:T}=q().props,r=T.user.role,c=()=>{const n=bootstrap.Modal.getInstance(o.current);n==null||n.hide()},m=()=>{s&&(r==="clinic_admin"&&(routeName="clinic.appointments.cancel"),r==="clinic_user"&&(routeName="clinic.user.appointments.cancel"),t(route(routeName,{appointment:s}),{onFinish:()=>{c()}}))},h=()=>{if(!s)return;let n="appointments.confirm";r==="clinic_admin"&&(n="clinic.appointments.confirm"),r==="clinic_user"&&(n="clinic.user.appointments.confirm"),t(route(n,{appointment:s}),{onFinish:()=>{c()}})},k=n=>{var g,M,_,w;return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{class:"card-header card-header-content-between border-bottom",children:a.jsxs("h4",{class:"card-header-title",children:["Appointment #",a.jsx("span",{className:"text-body me-3",children:n.id}),a.jsx("span",{class:`badge ${((g=n==null?void 0:n.provider)==null?void 0:g.type)==="Dentist"?"bg-soft-primary text-primary":"bg-soft-info text-info"}`,children:(M=n==null?void 0:n.provider)==null?void 0:M.type})]})}),a.jsx("div",{class:"card-body",children:a.jsxs("div",{class:"row",children:[a.jsxs("div",{class:"col-md mb-4 mb-md-0",children:[a.jsxs("div",{class:"mb-4",children:[a.jsx("span",{class:"card-subtitle text-lowercase"}),a.jsx("h3",{children:n.patient&&a.jsxs(a.Fragment,{children:[(_=n.patient)==null?void 0:_.last_name,", ",(w=n.patient)==null?void 0:w.first_name," "]})})]}),a.jsxs("div",{children:[a.jsx("span",{class:"card-subtitle",children:"Request Date/Time"}),a.jsxs("h1",{class:"text-primary",children:[" ",L(new Date(n==null?void 0:n.appointment_date),"dd-MMM-yyyy")," | ",L(O(n==null?void 0:n.time_slot,"HH:mm",new Date),"h:mm a")]})]})]}),a.jsx("div",{class:"col-md-auto",children:a.jsxs("div",{class:"d-grid d-sm-flex gap-3",children:[a.jsx("button",{className:"btn btn-white",onClick:()=>{i(n),l("cancel")},children:"Cancel Appointment"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{i(n),l("confirm")},children:"Confirm Appointment"})]})})]})})]})})};return a.jsx(a.Fragment,{children:a.jsxs(H,{header:"Pending Appointments",children:[a.jsx(E,{title:"Appointments"}),a.jsx("div",{className:"container",children:F.map(n=>k(n))}),a.jsxs(R,{isOpen:d==="confirm",onClose:()=>l(null),title:"Confirm Appointment",onConfirm:h,confirmText:"Confirm",confirmClass:"btn-success",children:["Are you sure you want to confirm appointment #",s==null?void 0:s.id," for"," ",(u=s==null?void 0:s.patient)==null?void 0:u.first_name," ",(b=s==null?void 0:s.patient)==null?void 0:b.last_name,"?"]}),a.jsxs(R,{isOpen:d==="cancel",onClose:()=>l(null),title:"Cancel Appointment",onConfirm:m,confirmText:"Cancel Appointment",confirmClass:"btn-danger",children:["Are you sure you want to cancel appointment #",s==null?void 0:s.id," for"," ",(f=s==null?void 0:s.patient)==null?void 0:f.first_name," ",(x=s==null?void 0:s.patient)==null?void 0:x.last_name,"?"]}),a.jsx("div",{className:"modal fade",id:"confirmModal",tabIndex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true",ref:o,children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"confirmModalLabel",children:"Confirm Appointment"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),a.jsxs("div",{className:"modal-body",children:["Are you sure you want to confirm appointment #",s==null?void 0:s.id," for"," ",(p=s==null?void 0:s.patient)==null?void 0:p.first_name," ",(j=s==null?void 0:s.patient)==null?void 0:j.last_name,"?"]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),a.jsx("button",{type:"button",className:"btn btn-success",onClick:h,children:"Confirm"})]})]})})}),a.jsx("div",{className:"modal fade",id:"confirmModal",tabIndex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true",ref:S,children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"confirmModalLabel",children:"Cancel Appointment"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),a.jsxs("div",{className:"modal-body",children:["Are you sure you want to cancel appointment #",s==null?void 0:s.id," for"," ",(y=s==null?void 0:s.patient)==null?void 0:y.first_name," ",(N=s==null?void 0:s.patient)==null?void 0:N.last_name,"?"]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),a.jsx("button",{type:"button",className:"btn btn-danger",onClick:m,children:"Cancel Appointment"})]})]})})}),a.jsx("div",{className:"modal fade",id:"rescheduleModal",tabIndex:"-1","aria-labelledby":"rescheduleModalLabel","aria-hidden":"true",ref:I,children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"rescheduleModalLabel",children:"Reschedule Appointment"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("p",{children:["Select a new date and time for appointment #",s==null?void 0:s.id," with"," ",(v=s==null?void 0:s.patient)==null?void 0:v.first_name," ",(C=s==null?void 0:s.patient)==null?void 0:C.last_name,"."]}),a.jsx("input",{type:"date",className:"form-control mb-2"}),a.jsx("input",{type:"time",className:"form-control"})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-primary",children:"Save Changes"})]})]})})})]})})}export{na as default};
