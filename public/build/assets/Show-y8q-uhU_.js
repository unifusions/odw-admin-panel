import{W as C,j as e,q as P}from"./app-BAQAwIW-.js";import{P as R}from"./PatientInfo-Cubo5k0h.js";import{D}from"./DateTimeConverter-DwMiZGtA.js";import{A as T,F,B,C as U}from"./AuthenticatedLayout-Bua1PjBO.js";import"./TextArea-Bgm66DD3.js";import{B as S,c as A}from"./button-ioYCQu1g.js";import{C as l,a as d,b as o,d as c,e as I}from"./card-BbZEX8Rg.js";import{L as b}from"./label-dpjDYwpR.js";import{T as L}from"./textarea-C81q-6JU.js";import{F as M}from"./FileUploader-CknVBhC4.js";import{S as w}from"./send-Bd5MaZoh.js";import{C as E}from"./circle-check-big-QQKjXb6q.js";import{P as q}from"./paperclip-CJ5r22pK.js";import{L as V}from"./link-button-D93JaZ5n.js";import{S as H,a as $,b as W,c as z,d as K}from"./select-BUc1TVQI.js";import{S as O}from"./stethoscope-QFxF8bU_.js";import{A as X}from"./arrow-left-DgnjwuYH.js";import{M as Z}from"./mail-Cibj9bDS.js";import{S as u}from"./shield-BTYKUBek.js";import{c as _}from"./createLucideIcon-CvfrgLOc.js";import{U as G}from"./user-BWgxgtR9.js";import{C as y}from"./clock-BCEng6Nj.js";import{C as J}from"./circle-x-CG-qSZHu.js";import"./app-Bqpq0L9t.js";import"./index-COiGAyRe.js";import"./input-BPwbRBZf.js";import"./index-gNGYnTfw.js";import"./index-rxBhiukR.js";import"./index-Chjiymov.js";import"./tslib.es6-BUas5LQb.js";import"./index-C1N97cYi.js";import"./index-BB9WNf4R.js";import"./Combination-DWhwZL_f.js";import"./index-Bl4poizS.js";import"./floating-ui.react-dom-DrPVh3jv.js";import"./floating-ui.dom-g0iQpA8R.js";import"./index-Bx-WUCzx.js";import"./index-BTRy030n.js";import"./check-DRh5mlJ1.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Y=_("dollar-sign",Q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],se=_("receipt",ee);function ae({estimate:s}){const{data:t,post:m,processing:i,errors:n,reset:a,setData:x}=C({message:"",estimation:null}),p=r=>{r.preventDefault(),m(route("estimates.replies.store",s),{forceFormData:!0})};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:p,children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Prepare Estimate Response"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Response to Patient *"}),e.jsx(L,{id:"response",placeholder:"Enter your detailed response including cost breakdown, insurance coverage details, payment options, and any additional notes...",value:t.message,onChange:r=>x("message",r.target.value),rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Upload detailed Estimate *"}),e.jsx(M,{onFileSelect:r=>x("estimation",r),selectedFile:t.estimation})]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(S,{type:"submit",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Send Estimate"]})})]})]})})}function te({reply:s}){return e.jsxs(l,{className:"shadow-card border-2 border-success/30",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2 text-success",children:[e.jsx(E,{className:"h-5 w-5"}),"One Dental World Response"]})}),e.jsx(c,{children:e.jsx("p",{className:"text-sm",children:s==null?void 0:s.reply_message})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:s.file_url,target:"_blank",children:e.jsxs("span",{className:"text-sm",children:[s.file_name," "]})})]})})]})}const re=[{label:"In Review",value:"in_review"},{label:"Completed",value:"completed"}];function le({estimate:s}){const{data:t,setData:m,post:i}=C({status:""}),n=a=>{a.preventDefault(),i(route("estimates.status",{estimate:s}))};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:n,children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Update Status"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(H,{value:t.status,onValueChange:a=>m("status",a),defaultValue:s.status,children:[e.jsx($,{children:e.jsx(W,{placeholder:"Assign Status"})}),e.jsx(z,{children:re.map(a=>e.jsx(K,{value:a.value,children:a.label},a.value))})]}),e.jsx(S,{className:"w-full",type:"submit",children:"Update Status"})]})})]})})}const ce=(s=[],t)=>s.reduce((m,i)=>{const n=Number(i==null?void 0:i[t]);return m+(isNaN(n)?0:n)},0),h={pending:{label:"Pending Review",icon:y,class:"bg-warning/10 text-warning"},in_review:{label:"Under Review",icon:y,class:"bg-warning/10 text-warning"},insurance_check:{label:"Insurance Check",icon:u,class:"bg-info/10 text-info"},answered:{label:"Answered",icon:E,class:"bg-success/10 text-success"},rejected:{label:"Rejected",icon:J,class:"bg-destructive/10 text-destructive"}};function Ke(){var x,p,r,j,g,f,N;const{estimate:s,patient:t,category:m,services:i,replied:n,urlPrevious:a}=P().props;return(x=h[s==null?void 0:s.status])==null||x.icon,e.jsxs(T,{pageTitle:"Dental Estimate Details",subTitle:`Estimate : EST-${s.id}`,children:[e.jsxs(V,{variant:"ghost",className:"mb-4",href:a,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Back to Estimates"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(l,{className:"shadow-card",children:e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(F,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:(p=s==null?void 0:s.patient)==null?void 0:p.first_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["EST-",s.id]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(r=s==null?void 0:s.dentalservice)==null?void 0:r.name})]})]}),e.jsx(B,{className:A("flex items-center gap-1",(j=h[s==null?void 0:s.status])==null?void 0:j.class),children:(g=h[s==null?void 0:s.status])==null?void 0:g.label})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:(f=s==null?void 0:s.patient)==null?void 0:f.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:e.jsx(D,{dateTimeString:s.created_at})})]}),s.insurance&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.insurance.length})]})]})]})}),e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Procedures Requested"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:(N=s==null?void 0:s.dentalcares)==null?void 0:N.map((k,v)=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium text-primary",children:v+1}),e.jsx("span",{className:"font-medium",children:k.name})]})},v))})})]}),(s==null?void 0:s.description)&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Patient Notes"]})}),e.jsx(c,{children:e.jsx("div",{className:"rounded-lg bg-muted/50 p-4",children:e.jsx("p",{className:"text-sm",children:s.description})})})]}),n?e.jsx(te,{reply:s==null?void 0:s.replies}):e.jsx(ae,{estimate:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),"Estimated Cost"]})}),e.jsx(c,{children:e.jsxs("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[e.jsxs("p",{className:"text-4xl font-bold text-primary",children:["$ ",ce(s==null?void 0:s.dentalcares,"national_cost")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Base Estimate on Average National Cost"})]})})]}),e.jsx(le,{estimate:s}),s.insuranceProvider&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Insurance Verification"]})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"font-medium",children:s.insuranceProvider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Insurance Provider"})]})})]})]})]}),(s==null?void 0:s.patient)&&e.jsx(R,{patient:t})]})}export{Ke as default};
