import{r as o,y as g,j as t,Y as S}from"./app-vWY_5D61.js";import{A as f}from"./AuthenticatedLayout-DpsvI_RO.js";import{F as N,i as w,a as C,b as M}from"./index-ORuTbW4Z.js";import{B as D}from"./Breadcrumbs-DWqsZbD7.js";import A from"./PendingAppointments-SE_SaK3W.js";import"./app-Bqpq0L9t.js";import"./index-By6DL9iO.js";import"./button-CK3kIgaD.js";import"./input-CLJYFFNz.js";import"./createLucideIcon-BCEcFyj0.js";import"./stethoscope-CUQTiraj.js";import"./index-sUTFNngw.js";function O({appointments:m,pendingAppointments:l}){const d=o.useRef(null),[n,u]=o.useState(null);o.useEffect(()=>{if(!n||d.current===n)return;d.current=n;const[e,s]=n.split("-");g.get(route("appointments.index"),{year:e,month:s},{only:["appointments"],preserveScroll:!0,preserveState:!0,replace:!0})},[n]);const p=e=>{const s=e.view.currentStart,r=s.getFullYear(),c=(s.getMonth()+1).toString().padStart(2,"0"),i=`${r}-${c}`;n!==i&&u(i)},h=e=>{const{extendedProps:s,title:r,backgroundColor:c,start:i,end:y}=e.event,b=new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return new Date(y).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),t.jsx("div",{className:"custom-event text-truncate",style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t.jsx("div",{className:"d-flex align-items-top",children:t.jsxs("div",{children:[t.jsx("div",{children:r}),t.jsx("div",{className:"text-muted mb-3 fs-10",children:b})]})})})},[a,x]=o.useState(null),v=e=>{x({title:e.event.title,start:e.event.start.toLocaleString(),end:e.event.end?e.event.end.toLocaleString():"N/A"}),new window.bootstrap.Modal(document.getElementById("eventModal")).show()},j=e=>{const s=prompt("Enter a title for this event");e.view.calendar.unselect(),s&&(e.startStr,e.endStr,e.allDay)};return t.jsxs(f,{header:"Appointments",children:[t.jsx(S,{title:"Appointments"}),t.jsx(D,{}),l>0&&t.jsx(A,{pendingEvents:l}),t.jsx(N,{plugins:[w,C,M],initialView:"dayGridMonth",selectable:!1,events:m,select:j,dayHeaderClassNames:"fullcalendar-custom",eventClassNames:"fullcalendar-custom",slotLabelClassNames:"fullcalendar-custom",eventClick:v,eventContent:h,themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"prev,next dayGridMonth,timeGridWeek,timeGridDay,today"},slotMinTime:"00:00:00",slotMaxTime:"23:50:00",datesSet:p}),t.jsx("div",{className:"modal fade",id:"eventModal",tabIndex:"-1","aria-hidden":"true",children:t.jsx("div",{className:"modal-dialog",children:t.jsxs("div",{className:"modal-content",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h5",{className:"modal-title",children:a==null?void 0:a.title}),t.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),t.jsxs("div",{className:"modal-body",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Start:"})," ",a==null?void 0:a.start]}),t.jsxs("p",{children:[t.jsx("strong",{children:"End:"})," ",a==null?void 0:a.end]})]}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})}export{O as default};
