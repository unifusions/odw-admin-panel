import{q,r as Y,j as e,Y as z,y as H}from"./app-Co8qbIq8.js";import{A as V}from"./AuthenticatedLayout-BtQRoIJW.js";import{c as W,T as J,d as K,F as Q,i as U,a as X,b as Z}from"./index-C7VSHqWJ.js";import E from"./PendingAppointments-BHcjqdxv.js";import{S as ee}from"./SOStatus-DS9_AINU.js";import"./index-Bi-GFeYM.js";import"./Sidebar-Dci9hplV.js";import"./DentistIcon-BEq_e8tR.js";import"./index-D1JkYw0l.js";import"./LegendIndicator-BNpnsEMI.js";class s extends J{}s.prototype.classes={root:"fc-theme-bootstrap5",tableCellShaded:"fc-theme-bootstrap5-shaded",buttonGroup:"btn-group",button:"btn btn-primary",buttonActive:"active",popover:"popover",popoverHeader:"popover-header",popoverContent:"popover-body"};s.prototype.baseIconClass="bi";s.prototype.iconClasses={close:"bi-x-lg",prev:"bi-chevron-left",next:"bi-chevron-right",prevYear:"bi-chevron-double-left",nextYear:"bi-chevron-double-right"};s.prototype.rtlIconClasses={prev:"bi-chevron-right",next:"bi-chevron-left",prevYear:"bi-chevron-double-right",nextYear:"bi-chevron-double-left"};s.prototype.iconOverrideOption="buttonIcons";s.prototype.iconOverrideCustomButtonOption="icon";s.prototype.iconOverridePrefix="bi-";var te=".fc-theme-bootstrap5 a:not([href]){color:inherit;text-decoration:inherit}.fc-theme-bootstrap5 .fc-list,.fc-theme-bootstrap5 .fc-scrollgrid,.fc-theme-bootstrap5 td,.fc-theme-bootstrap5 th{border:1px solid var(--bs-gray-400)}.fc-theme-bootstrap5 .fc-scrollgrid{border-bottom-width:0;border-right-width:0}.fc-theme-bootstrap5-shaded{background-color:var(--bs-gray-200)}";W(te);var oe=K({name:"@fullcalendar/bootstrap5",themeClasses:{bootstrap5:s}});const c=({icon:n,value:i})=>e.jsxs("div",{className:"d-flex mb-4",children:[e.jsx("i",{className:`bi bi-${n} nav-icon`}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("span",{className:"d-block text-dark",children:i})})]});function ue({appointments:n,pendingAppointments:i,activeYear:A,activeMonth:P}){var p,h,u,x,b,v,f,g,j,y,N,C,S,M,w;const{auth:k}=q().props,m=k.user.role;let d="appointments.index";m==="clinic_admin"&&(d="clinic.appointments.index"),m==="clinic_user"&&(d="clinic.user.appointments.index");const[l,F]=Y.useState(new Date(A,P-1,1)),[t,O]=Y.useState(null),$={pending:"#f5ca99",cancelled:"#ed4c78",confirmed:"#00c9a7"},G=o=>{const r=o.view.currentStart;l.getFullYear()===r.getFullYear()&&l.getMonth()===r.getMonth()||(F(r),H.get(route(d),{year:r.getFullYear(),month:r.getMonth()+1},{only:["appointments","activeYear","activeMonth","pendingAppointments"],preserveState:!0,preserveScroll:!0,replace:!0}))},L=o=>{var T;const{id:r,title:a,start:B,end:D,moreInfo:re}=o.event,R=new Date(B).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),I=D?new Date(D).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return o.event.extendedProps.status||((T=o.event._def.extendedProps)==null||T.status),e.jsxs("div",{className:"  custom-event rounded  ",children:[e.jsx("strong",{className:"text-dark",children:a}),e.jsxs("div",{className:"text-dark fs-10",children:[R," ",I&&`- ${I}`]})]})},_=o=>{O({id:o.event.id,title:o.event.title,start:o.event.start.toLocaleString(),end:o.event.end?o.event.end.toLocaleString():"N/A",moreInfo:o.event.extendedProps}),new window.bootstrap.Modal(document.getElementById("eventModal")).show()};return e.jsxs(V,{header:"Appointments",children:[e.jsx(z,{title:"Appointments"}),i>0&&e.jsx(E,{pendingEvents:i}),e.jsx(Q,{plugins:[U,X,Z,oe],themeSystem:"bootstrap5",initialView:"dayGridMonth",initialDate:l,events:n,datesSet:G,eventContent:L,eventClick:_,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},selectable:!1,slotMinTime:"00:00:00",slotMaxTime:"23:59:00",eventDidMount:o=>{const r=o.event.extendedProps.status,a=$[r]||"#f5ca99";o.el.style.backgroundColor=a,o.el.style.borderColor=a}}),e.jsx("div",{className:"modal fade",id:"eventModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("h3",{className:"modal-title me-3",children:["Appointment # ",t==null?void 0:t.id]}),e.jsx(ee,{status:(p=t==null?void 0:t.moreInfo)==null?void 0:p.status})]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx(c,{icon:"person-circle",value:t==null?void 0:t.title}),((u=(h=t==null?void 0:t.moreInfo)==null?void 0:h.provider)==null?void 0:u.type)==="Dentist"&&e.jsx(c,{icon:"capsule",value:(b=(x=t==null?void 0:t.moreInfo)==null?void 0:x.services)==null?void 0:b.name}),e.jsx(c,{icon:"pin-map",value:(f=(v=t==null?void 0:t.moreInfo)==null?void 0:v.clinic)==null?void 0:f.name}),e.jsxs("div",{className:"d-flex ",children:[e.jsx("div",{class:"avatar avatar-xs avatar-circle me-2",children:e.jsx("img",{class:"avatar-img",src:(j=(g=t==null?void 0:t.moreInfo)==null?void 0:g.dentist)==null?void 0:j.photo_url})}),e.jsxs("div",{className:"flex-grow-1 d-flex",children:[e.jsx("span",{className:"d-block text-dark me-2",children:(N=(y=t==null?void 0:t.moreInfo)==null?void 0:y.provider)==null?void 0:N.name}),e.jsx("span",{class:`badge ${((S=(C=t==null?void 0:t.moreInfo)==null?void 0:C.provider)==null?void 0:S.type)==="Dentist"?"bg-soft-primary text-primary":"bg-soft-info text-info"}`,children:(w=(M=t==null?void 0:t.moreInfo)==null?void 0:M.provider)==null?void 0:w.type})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})}export{ue as default};
