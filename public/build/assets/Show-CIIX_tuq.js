import{W as S,j as e,q as k}from"./app-Cxiu3gMj.js";import{D as R}from"./DateTimeConverter-DivF3Siz.js";import{A as T,F as D,B as P}from"./AuthenticatedLayout-BBYz7AZX.js";import"./TextArea-BT5pTlIH.js";import{B,c as F}from"./button-BsSaNFyx.js";import{C as l,a as d,b as o,d as i,e as L}from"./card-BmUdsQaW.js";import{L as b}from"./label-jjRuK-LC.js";import{T as U}from"./textarea-BVCk6M7Z.js";import{F as A}from"./FileUploader-DFgPw0LV.js";import{S as w}from"./send-BUwvoReG.js";import{L as I}from"./loader-DQQM4Jhf.js";import{C}from"./circle-check-big-BpxoO03G.js";import{P as M}from"./paperclip-DONG8g8-.js";import{L as q}from"./link-button-BTsJsGPv.js";import{S as V,a as H,b as $,c as W,d as z}from"./select-DWMrQUbg.js";import{S as K}from"./SubmitButton-DANSN6OC.js";import{S as O}from"./stethoscope-B1VJ4sY7.js";import{A as X}from"./arrow-left-D_Ev-XdV.js";import{M as Z}from"./mail-Dbt3Zltu.js";import{C as G}from"./message-square-CqUX1aWG.js";import{S as u}from"./shield-0SN27mwB.js";import{c as E}from"./createLucideIcon-D4P67K03.js";import{U as J}from"./user-DIcaBjam.js";import{C as y}from"./clock-PMtx0yIX.js";import{C as Q}from"./circle-x-BuAgB0Fo.js";import"./app-Dgm9znLA.js";import"./index-Goy6Z_Xv.js";import"./input-CHhF9hnF.js";import"./index-CsONDyV6.js";import"./index-BxJM22g-.js";import"./index-Chjiymov.js";import"./tslib.es6-BUas5LQb.js";import"./index-CH5VBVbz.js";import"./index-Cpns4x5X.js";import"./Combination-B8Gcb3K7.js";import"./index-DgbDRJUY.js";import"./index-CSx-WhMr.js";import"./floating-ui.react-dom-BWaGdzlE.js";import"./floating-ui.dom-g0iQpA8R.js";import"./index-6essUud2.js";import"./index-Cow8FGOx.js";import"./chevron-down-Bl0c9ZyU.js";import"./check-BRDBi-5_.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ee=E("dollar-sign",Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ae=E("receipt",se);function te({estimate:s}){const{data:c,post:m,processing:t,errors:n,reset:x,setData:a}=S({message:"",estimation:null}),p=r=>{r.preventDefault(),m(route("estimates.replies.store",s),{forceFormData:!0})};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:p,children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Prepare Estimate Response"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Response to Patient *"}),e.jsx(U,{id:"response",placeholder:"Enter your detailed response including cost breakdown, insurance coverage details, payment options, and any additional notes...",value:c.message,onChange:r=>a("message",r.target.value),rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Upload detailed Estimate *"}),e.jsx(A,{onFileSelect:r=>a("estimation",r),selectedFile:c.estimation})]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(B,{type:"submit",disabled:t,children:[t?e.jsx(I,{className:"animate-spin"}):e.jsx(w,{className:"h-4 w-4 mr-2"})," Send Estimate"]})})]})]})})}function re({reply:s}){return e.jsxs(l,{className:"shadow-card border-2 border-success/30",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2 text-success",children:[e.jsx(C,{className:"h-5 w-5"}),"One Dental World Response"]})}),e.jsx(i,{children:e.jsx("p",{className:"text-sm",children:s==null?void 0:s.reply_message})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:s.file_url,target:"_blank",children:e.jsxs("span",{className:"text-sm",children:[s.file_name," "]})})]})})]})}const le=[{label:"In Review",value:"in_review"},{label:"Completed",value:"completed"}];function ie({estimate:s}){const{data:c,setData:m,post:t,processing:n}=S({status:""}),x=a=>{a.preventDefault(),t(route("estimates.status",{estimate:s}))};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:x,children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Update Status"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{value:c.status,onValueChange:a=>m("status",a),defaultValue:s.status,children:[e.jsx(H,{children:e.jsx($,{placeholder:"Assign Status"})}),e.jsx(W,{children:le.map(a=>e.jsx(z,{value:a.value,children:a.label},a.value))})]}),e.jsx(K,{processing:n,actionText:" Update Status"})]})})]})})}const ce=(s=[],c)=>s.reduce((m,t)=>{const n=Number(t==null?void 0:t[c]);return m+(isNaN(n)?0:n)},0),h={pending:{label:"Pending Review",icon:y,class:"bg-warning/10 text-warning"},in_review:{label:"Under Review",icon:y,class:"bg-warning/10 text-warning"},insurance_check:{label:"Insurance Check",icon:u,class:"bg-info/10 text-info"},answered:{label:"Answered",icon:C,class:"bg-success/10 text-success"},rejected:{label:"Rejected",icon:Q,class:"bg-destructive/10 text-destructive"}};function Je(){var a,p,r,j,g,f,N;const{estimate:s,patient:c,category:m,services:t,replied:n,urlPrevious:x}=k().props;return(a=h[s==null?void 0:s.status])==null||a.icon,e.jsxs(T,{pageTitle:"Dental Estimate Details",subTitle:`Estimate : EST-${s.id}`,children:[e.jsxs(q,{variant:"ghost",className:"mb-4",href:x,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Back to Estimates"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(l,{className:"shadow-card",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(D,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:(p=s==null?void 0:s.patient)==null?void 0:p.first_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["EST-",s.id]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(r=s==null?void 0:s.dentalservice)==null?void 0:r.name})]})]}),e.jsx(P,{className:F("flex items-center gap-1",(j=h[s==null?void 0:s.status])==null?void 0:j.class),children:(g=h[s==null?void 0:s.status])==null?void 0:g.label})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:(f=s==null?void 0:s.patient)==null?void 0:f.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:e.jsx(R,{dateTimeString:s.created_at})})]}),s.insurance&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.insurance.length})]})]})]})}),e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Procedures Requested"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:(N=s==null?void 0:s.dentalcares)==null?void 0:N.map((_,v)=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium text-primary",children:v+1}),e.jsx("span",{className:"font-medium",children:_.name})]})},v))})})]}),(s==null?void 0:s.description)&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Patient Notes"]})}),e.jsx(i,{children:e.jsx("div",{className:"rounded-lg bg-muted/50 p-4",children:e.jsx("p",{className:"text-sm",children:s.description})})})]}),n?e.jsx(re,{reply:s==null?void 0:s.replies}):e.jsx(te,{estimate:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Estimated Cost"]})}),e.jsx(i,{children:e.jsxs("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[e.jsxs("p",{className:"text-4xl font-bold text-primary",children:["$ ",ce(s==null?void 0:s.dentalcares,"national_cost")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Base Estimate on Average National Cost"})]})})]}),e.jsx(ie,{estimate:s}),s.insuranceProvider&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Insurance Verification"]})}),e.jsx(i,{className:"space-y-4",children:e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"font-medium",children:s.insuranceProvider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Insurance Provider"})]})})]})]})]})]})}export{Je as default};
