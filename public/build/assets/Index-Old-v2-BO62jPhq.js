import{j as e,q as z,r as Y,Y as H,y as V}from"./app-UUdjsTkB.js";import{A as W}from"./AuthenticatedLayout-Du4dUmI-.js";import{c as J,T as K,d as Q,F as U,i as X,a as Z,b as E}from"./index-D-nh9vua.js";import ee from"./PendingAppointments-BtL3Ilcw.js";import{L as i}from"./LegendIndicator-1ebvmDRa.js";import"./app-Bqpq0L9t.js";import"./index-CFokBAF2.js";import"./button-DS4Vdg1W.js";import"./input-Dj0Ej_w5.js";import"./createLucideIcon-CdNpCLiX.js";import"./stethoscope-JWrV9WqX.js";import"./index-qcSq6EF2.js";class s extends K{}s.prototype.classes={root:"fc-theme-bootstrap5",tableCellShaded:"fc-theme-bootstrap5-shaded",buttonGroup:"btn-group",button:"btn btn-primary",buttonActive:"active",popover:"popover",popoverHeader:"popover-header",popoverContent:"popover-body"};s.prototype.baseIconClass="bi";s.prototype.iconClasses={close:"bi-x-lg",prev:"bi-chevron-left",next:"bi-chevron-right",prevYear:"bi-chevron-double-left",nextYear:"bi-chevron-double-right"};s.prototype.rtlIconClasses={prev:"bi-chevron-right",next:"bi-chevron-left",prevYear:"bi-chevron-double-right",nextYear:"bi-chevron-double-left"};s.prototype.iconOverrideOption="buttonIcons";s.prototype.iconOverrideCustomButtonOption="icon";s.prototype.iconOverridePrefix="bi-";var te=".fc-theme-bootstrap5 a:not([href]){color:inherit;text-decoration:inherit}.fc-theme-bootstrap5 .fc-list,.fc-theme-bootstrap5 .fc-scrollgrid,.fc-theme-bootstrap5 td,.fc-theme-bootstrap5 th{border:1px solid var(--bs-gray-400)}.fc-theme-bootstrap5 .fc-scrollgrid{border-bottom-width:0;border-right-width:0}.fc-theme-bootstrap5-shaded{background-color:var(--bs-gray-200)}";J(te);var oe=Q({name:"@fullcalendar/bootstrap5",themeClasses:{bootstrap5:s}});function re({status:a}){switch(a){case"pending":return e.jsx(i,{color:"danger",status:"Pending"});case"in_review":return e.jsx(i,{color:"warning",status:"In Review"});case"answered":return e.jsx(i,{color:"success",status:"Answered"});case"confirmed":return e.jsx(i,{color:"success",status:"Confirmed"});case"closed":return e.jsx(i,{color:"secondary",status:"Closed"})}}const m=({icon:a,value:d})=>e.jsxs("div",{className:"d-flex mb-4",children:[e.jsx("i",{className:`bi bi-${a} nav-icon`}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("span",{className:"d-block text-dark",children:d})})]});function ve({appointments:a,pendingAppointments:d,activeYear:P,activeMonth:L}){var u,h,x,b,v,f,g,j,y,N,w,C,S,M,D;const{auth:k}=z().props,p=k.user.role;let l="appointments.index";p==="clinic_admin"&&(l="clinic.appointments.index"),p==="clinic_user"&&(l="clinic.user.appointments.index");const[c,F]=Y.useState(new Date(P,L-1,1)),[t,O]=Y.useState(null),_={pending:"#f5ca99",cancelled:"#ed4c78",confirmed:"#00c9a7"},$=o=>{const r=o.view.currentStart;c.getFullYear()===r.getFullYear()&&c.getMonth()===r.getMonth()||(F(r),V.get(route(l),{year:r.getFullYear(),month:r.getMonth()+1},{only:["appointments","activeYear","activeMonth","pendingAppointments"],preserveState:!0,preserveScroll:!0,replace:!0}))},G=o=>{var A;const{id:r,title:n,start:R,end:I,moreInfo:se}=o.event,q=new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),T=I?new Date(I).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return o.event.extendedProps.status||((A=o.event._def.extendedProps)==null||A.status),e.jsxs("div",{className:"  custom-event rounded  ",children:[e.jsx("strong",{className:"text-dark",children:n}),e.jsxs("div",{className:"text-dark fs-10",children:[q," ",T&&`- ${T}`]})]})},B=o=>{O({id:o.event.id,title:o.event.title,start:o.event.start.toLocaleString(),end:o.event.end?o.event.end.toLocaleString():"N/A",moreInfo:o.event.extendedProps}),new window.bootstrap.Modal(document.getElementById("eventModal")).show()};return e.jsxs(W,{header:"Appointments",children:[e.jsx(H,{title:"Appointments"}),d>0&&e.jsx(ee,{pendingEvents:d}),e.jsx(U,{plugins:[X,Z,E,oe],themeSystem:"bootstrap5",initialView:"dayGridMonth",initialDate:c,events:a,datesSet:$,eventContent:G,eventClick:B,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},selectable:!1,slotMinTime:"00:00:00",slotMaxTime:"23:59:00",eventDidMount:o=>{const r=o.event.extendedProps.status,n=_[r]||"#f5ca99";o.el.style.backgroundColor=n,o.el.style.borderColor=n}}),e.jsx("div",{className:"modal fade",id:"eventModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("h3",{className:"modal-title me-3",children:["Appointment # ",t==null?void 0:t.id]}),e.jsx(re,{status:(u=t==null?void 0:t.moreInfo)==null?void 0:u.status})]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx(m,{icon:"person-circle",value:t==null?void 0:t.title}),((x=(h=t==null?void 0:t.moreInfo)==null?void 0:h.provider)==null?void 0:x.type)==="Dentist"&&e.jsx(m,{icon:"capsule",value:(v=(b=t==null?void 0:t.moreInfo)==null?void 0:b.services)==null?void 0:v.name}),e.jsx(m,{icon:"pin-map",value:(g=(f=t==null?void 0:t.moreInfo)==null?void 0:f.clinic)==null?void 0:g.name}),e.jsxs("div",{className:"d-flex ",children:[e.jsx("div",{class:"avatar avatar-xs avatar-circle me-2",children:e.jsx("img",{class:"avatar-img",src:(y=(j=t==null?void 0:t.moreInfo)==null?void 0:j.dentist)==null?void 0:y.photo_url})}),e.jsxs("div",{className:"flex-grow-1 d-flex",children:[e.jsx("span",{className:"d-block text-dark me-2",children:(w=(N=t==null?void 0:t.moreInfo)==null?void 0:N.provider)==null?void 0:w.name}),e.jsx("span",{class:`badge ${((S=(C=t==null?void 0:t.moreInfo)==null?void 0:C.provider)==null?void 0:S.type)==="Dentist"?"bg-soft-primary text-primary":"bg-soft-info text-info"}`,children:(D=(M=t==null?void 0:t.moreInfo)==null?void 0:M.provider)==null?void 0:D.type})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})}export{ve as default};
