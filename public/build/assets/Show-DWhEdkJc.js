import{W as C,j as e,q as R}from"./app-HlCFYIOj.js";import{D}from"./DateTimeConverter-DsKGhqlv.js";import{A as P,F as T,B as F}from"./AuthenticatedLayout-CePji0V7.js";import"./TextArea-Dk70QNhs.js";import{B as S,c as B}from"./button-ChsKYCWg.js";import{C as l,a as d,b as m,d as i,e as L}from"./card-Ddk1fStP.js";import{L as b}from"./label-QdPCiEoZ.js";import{T as U}from"./textarea-Ba51OnFm.js";import{F as A}from"./FileUploader-BCs1sl6E.js";import{S as w}from"./send-DklHq22O.js";import{L as I}from"./loader-Cy3ILBsl.js";import{C as E}from"./circle-check-big-Cmi7Lt4G.js";import{P as M}from"./paperclip-yOyKH2PA.js";import{L as q}from"./link-button-C1kkT0bk.js";import{S as V,a as H,b as $,c as W,d as z}from"./select-DO8nkgEY.js";import{S as K}from"./stethoscope-BYgZ-fsY.js";import{A as O}from"./arrow-left-DakeGwUR.js";import{M as X}from"./mail-BkvlM9Oe.js";import{C as Z}from"./message-square-BgcUhoJt.js";import{S as u}from"./shield-okCIjPzc.js";import{c as _}from"./createLucideIcon-D4QO92PA.js";import{U as G}from"./user-C8FwUZvE.js";import{C as y}from"./clock-Buxpxv9g.js";import{C as J}from"./circle-x-DvqKpafs.js";import"./app-BhpSmq0W.js";import"./index-SvgtLhvb.js";import"./input-9BPr6afE.js";import"./index-DJfpl6GL.js";import"./index-BRYWFTrf.js";import"./index-Chjiymov.js";import"./tslib.es6-BUas5LQb.js";import"./index-BDz8MKLV.js";import"./index-B7rWKpY-.js";import"./Combination-Dxt0svlq.js";import"./index-y8TVvREC.js";import"./index-CpOLPGYk.js";import"./floating-ui.react-dom-zNk_E8pT.js";import"./floating-ui.dom-g0iQpA8R.js";import"./index-DYhC8Crh.js";import"./index-DF8OOxdk.js";import"./chevron-down-Biar-aY5.js";import"./check-BNFWpg-_.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Y=_("dollar-sign",Q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],se=_("receipt",ee);function ae({estimate:s}){const{data:c,post:o,processing:t,errors:n,reset:a,setData:x}=C({message:"",estimation:null}),p=r=>{r.preventDefault(),o(route("estimates.replies.store",s),{forceFormData:!0})};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:p,children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Prepare Estimate Response"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Response to Patient *"}),e.jsx(U,{id:"response",placeholder:"Enter your detailed response including cost breakdown, insurance coverage details, payment options, and any additional notes...",value:c.message,onChange:r=>x("message",r.target.value),rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"response",children:"Upload detailed Estimate *"}),e.jsx(A,{onFileSelect:r=>x("estimation",r),selectedFile:c.estimation})]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(S,{type:"submit",disabled:t,children:[t?e.jsx(I,{className:"animate-spin"}):e.jsx(w,{className:"h-4 w-4 mr-2"})," Send Estimate"]})})]})]})})}function te({reply:s}){return e.jsxs(l,{className:"shadow-card border-2 border-success/30",children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2 text-success",children:[e.jsx(E,{className:"h-5 w-5"}),"One Dental World Response"]})}),e.jsx(i,{children:e.jsx("p",{className:"text-sm",children:s==null?void 0:s.reply_message})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:s.file_url,target:"_blank",children:e.jsxs("span",{className:"text-sm",children:[s.file_name," "]})})]})})]})}const re=[{label:"In Review",value:"in_review"},{label:"Completed",value:"completed"}];function le({estimate:s}){const{data:c,setData:o,post:t}=C({status:""}),n=a=>{a.preventDefault(),t(route("estimates.status",{estimate:s}))};return e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:n,children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Update Status"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{value:c.status,onValueChange:a=>o("status",a),defaultValue:s.status,children:[e.jsx(H,{children:e.jsx($,{placeholder:"Assign Status"})}),e.jsx(W,{children:re.map(a=>e.jsx(z,{value:a.value,children:a.label},a.value))})]}),e.jsx(S,{className:"w-full",type:"submit",children:"Update Status"})]})})]})})}const ie=(s=[],c)=>s.reduce((o,t)=>{const n=Number(t==null?void 0:t[c]);return o+(isNaN(n)?0:n)},0),h={pending:{label:"Pending Review",icon:y,class:"bg-warning/10 text-warning"},in_review:{label:"Under Review",icon:y,class:"bg-warning/10 text-warning"},insurance_check:{label:"Insurance Check",icon:u,class:"bg-info/10 text-info"},answered:{label:"Answered",icon:E,class:"bg-success/10 text-success"},rejected:{label:"Rejected",icon:J,class:"bg-destructive/10 text-destructive"}};function Ze(){var x,p,r,j,g,f,N;const{estimate:s,patient:c,category:o,services:t,replied:n,urlPrevious:a}=R().props;return(x=h[s==null?void 0:s.status])==null||x.icon,e.jsxs(P,{pageTitle:"Dental Estimate Details",subTitle:`Estimate : EST-${s.id}`,children:[e.jsxs(q,{variant:"ghost",className:"mb-4",href:a,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Back to Estimates"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(l,{className:"shadow-card",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(T,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:(p=s==null?void 0:s.patient)==null?void 0:p.first_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["EST-",s.id]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(r=s==null?void 0:s.dentalservice)==null?void 0:r.name})]})]}),e.jsx(F,{className:B("flex items-center gap-1",(j=h[s==null?void 0:s.status])==null?void 0:j.class),children:(g=h[s==null?void 0:s.status])==null?void 0:g.label})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:(f=s==null?void 0:s.patient)==null?void 0:f.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:e.jsx(D,{dateTimeString:s.created_at})})]}),s.insurance&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.insurance.length})]})]})]})}),e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Procedures Requested"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:(N=s==null?void 0:s.dentalcares)==null?void 0:N.map((k,v)=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium text-primary",children:v+1}),e.jsx("span",{className:"font-medium",children:k.name})]})},v))})})]}),(s==null?void 0:s.description)&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Patient Notes"]})}),e.jsx(i,{children:e.jsx("div",{className:"rounded-lg bg-muted/50 p-4",children:e.jsx("p",{className:"text-sm",children:s.description})})})]}),n?e.jsx(te,{reply:s==null?void 0:s.replies}):e.jsx(ae,{estimate:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),"Estimated Cost"]})}),e.jsx(i,{children:e.jsxs("div",{className:"text-center p-4 rounded-lg bg-primary/5",children:[e.jsxs("p",{className:"text-4xl font-bold text-primary",children:["$ ",ie(s==null?void 0:s.dentalcares,"national_cost")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Base Estimate on Average National Cost"})]})})]}),e.jsx(le,{estimate:s}),s.insuranceProvider&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Insurance Verification"]})}),e.jsx(i,{className:"space-y-4",children:e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"font-medium",children:s.insuranceProvider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Insurance Provider"})]})})]})]})]})]})}export{Ze as default};
