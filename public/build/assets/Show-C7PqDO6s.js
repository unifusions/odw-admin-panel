import{j as e,r as u,W as F,q as I,y as A}from"./app-BDrvQ-Fh.js";import{B as o,c as V}from"./button-C9DuKgUG.js";import{C as l,a as x,b as h,d as i,e as M}from"./card-CQMuBvVe.js";import{F as R,A as S,B as g}from"./AuthenticatedLayout-Dmurvagr.js";import{L as v}from"./label-70R2CAFi.js";import{S as B,a as T,b as E,c as L,d as q}from"./select-BwL2NgdK.js";import{C as U}from"./checkbox-ClfJw-Qd.js";import{L as X}from"./link-button-EgWiFZrD.js";import{E as z}from"./eye-phDtQote.js";import{M as D}from"./mail-B9PiJMru.js";import{P as H}from"./phone-DsG47Ta4.js";import{D as W,a as Q,b as $,c as G,e as J}from"./dialog-Dx4GLaow.js";import{X as K}from"./x-B24eB6aR.js";import{C as Y}from"./circle-x-CFlA7bOn.js";import{C as p}from"./circle-check-big-I92J38ci.js";import{P as b}from"./paperclip-B7k-2UEv.js";import{T as Z}from"./textarea-BnEYYtTO.js";import{F as ee}from"./FileUploader-n_VKk5bQ.js";import{S as C}from"./send-BHF8VWBU.js";import{S as se}from"./SubmitButton-B9vQ8E3g.js";import{S as k}from"./stethoscope-ChF4dvUK.js";import{A as _}from"./arrow-left-DnHriVgt.js";import{M as ae,C as re}from"./message-square-VlcRmtPN.js";import{c as te}from"./createLucideIcon-HlBZp8tO.js";import{S as w}from"./shield-DA9RK9Vv.js";import{C as ce}from"./clock-DH7CGz7L.js";import{F as le}from"./file-exclamation-point-DDSjysxX.js";import"./app-D_D9UtE4.js";import"./index-BsO8Jy5G.js";import"./input-BFYME9wT.js";import"./index-By11zwLU.js";import"./index-sgrgDCtd.js";import"./index-709C2Cvg.js";import"./Combination-ylOFAbdE.js";import"./tslib.es6-BUas5LQb.js";import"./index-D4DQtpoo.js";import"./index-C67hFgXz.js";import"./floating-ui.react-dom-B6xn-Qlo.js";import"./floating-ui.dom-g0iQpA8R.js";import"./index-C38P3_I-.js";import"./index-Cd8C1Kir.js";import"./chevron-down-BQEr59Or.js";import"./check-BQL5iUOq.js";import"./index-B3TDZUkv.js";import"./index-Cc0CZ3Ta.js";import"./index-Chjiymov.js";import"./loader-C1uvpXws.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],ne=te("calendar-x",ie);function de({patient:s}){return e.jsxs(l,{className:"shadow-card hover:shadow-card-hover transition-all animate-fade-in cursor-pointer",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-lg font-semibold text-primary",children:s==null?void 0:s.first_name.split(" ").map(t=>t[0]).join("")}),e.jsx("div",{children:e.jsx(h,{className:"text-base",children:s==null?void 0:s.first_name})})]}),e.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8",href:route("patients.show",s),children:e.jsx(z,{className:"h-4 w-4"})})]})}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:s==null?void 0:s.phone_number})]})]})]},s==null?void 0:s.id)}function P({open:s,onOpenChange:t,fileUrl:a}){return e.jsx(W,{open:s,onOpenChange:t,children:e.jsxs(Q,{className:"p-5    max-w-7xl rounded-none",children:[e.jsx($,{children:e.jsx(G,{children:"File Preview"})}),e.jsx("iframe",{src:a,className:"w-full h-[42rem] border rounded"}),e.jsx(J,{children:e.jsxs(o,{variant:"ghost",onClick:t,children:[e.jsx(K,{})," Close"]})})]})})}function me({opinion:s}){const[t,a]=u.useState(!1);return e.jsxs(l,{className:"shadow-card border-2 border-success/30 bg-success/5",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2 text-success",children:[s.status==="rejected"?e.jsx(Y,{className:"h-5 w-5"}):e.jsx(p,{className:"h-5 w-5"}),s.status==="rejected"?"Rejection Response":"Expert Response"]})}),e.jsx(i,{children:e.jsx("p",{className:"text-sm",children:s.replies.reply_message})}),e.jsx(M,{children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(o,{variant:"link",onClick:()=>a(!0),target:"_blank",className:"flex items-center gap-2 hover:border-dark hover:border-border",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.replies.file_name," "]})]})})}),e.jsx(P,{open:t,onOpenChange:()=>a(!1),fileUrl:s.replies.file_url})]})}function oe({so:s,isDisabled:t}){const{data:a,post:n,processing:d,errors:m,reset:r,setData:j}=F({message:"",opinion:null}),f=c=>{c.preventDefault(),n(route("second-opinion.replies.store",{second_opinion:s}),{forceFormData:!0})};return e.jsx(e.Fragment,{children:e.jsx(l,{className:"shadow-card",children:e.jsxs("form",{onSubmit:f,children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Write Response"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"response",children:"Response to Patient *"}),e.jsx(Z,{id:"response",placeholder:"Enter your professional opinion, recommendations, and any additional notes...",value:a.message,onChange:c=>j("message",c.target.value),rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"",children:"Attach File(if any)"}),e.jsx(ee,{onFileSelect:c=>j("opinion",c),selectedFile:a.opinion})]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(o,{type:"submit",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Send Response"]})})]})]})})})}function xe({attachments:s}){const[t,a]=u.useState(!1),[n,d]=u.useState();return e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"shadow-card",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Attachments"]})}),e.jsx(i,{children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:s.map((m,r)=>e.jsxs(o,{variant:"ghostlink",target:"_blank",onClick:()=>{d(m.temporary_url),a(!0)},children:[e.jsx(R,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("div",{className:"  ",children:e.jsx("span",{className:"text-sm font-medium",children:m.file_name})})]},r))})})]}),e.jsx(P,{open:t,fileUrl:n,onOpenChange:()=>{d(""),a(!1)}})]})}const he=[{key:"pending",value:"Pending"},{key:"in_review",value:"In Review"},{key:"answered",value:"Answered"},{key:"closed",value:"Closed"}];function ue({opinion:s}){const{data:t,setData:a,processing:n,post:d}=F({status:s==null?void 0:s.status}),m=r=>{r.preventDefault(),d(route("second-opinion.status",s))};return e.jsxs(l,{className:"shadow-card",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Assign Status"]})}),e.jsx(i,{children:e.jsx("form",{onSubmit:m,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(B,{onValueChange:r=>a("status",r),value:t.status,children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select Status"})}),e.jsx(L,{children:he.map(r=>e.jsx(q,{value:r.key,disabled:r.key===(s==null?void 0:s.status),children:r.value},r.key))})]}),e.jsx(se,{className:"w-full",icon:k,actionText:"Assign Status",processing:n})]})})})]})}const N={in_review:{label:"In Review",icon:ce,class:"bg-warning/10 text-warning"},insurance_review:{label:"Insurance Review",icon:w,class:"bg-info/10 text-info"},answered:{label:"Answered",icon:p,class:"bg-success/10 text-success"},closed:{label:"Closed",icon:p,class:"bg-success/10 text-success"},pending:{label:"Pending",icon:le,class:"bg-destructive/10 text-destructive"}},ns=()=>{var r,j,f,c,y;const{opinion:s,replied:t}=I().props;u.useState((s==null?void 0:s.response)||""),u.useState((s==null?void 0:s.assignedDoctor)||"");const[a,n]=u.useState((s==null?void 0:s.insuranceVerified)||!1);if(!s)return e.jsx(S,{title:"Second Opinion",subtitle:"Request not found",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Second opinion request not found."}),e.jsxs(o,{variant:"outline",className:"mt-4",onClick:()=>navigate("/second-opinion"),children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Back to Second Opinions"]})]})});const d=(r=N[s==null?void 0:s.status])==null?void 0:r.icon,m=()=>{setOpinion({...s,status:"insurance_review"}),toast({title:"Status Updated",description:"Marked for insurance review"})};return e.jsxs(S,{pageTitle:"Second Opinion Details",subTitle:`Review request SO-${s.id}`,children:[e.jsxs(o,{variant:"ghost",className:"mb-4",onClick:()=>A.get(route("second-opinion.index")),children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Back to Second Opinions"]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(l,{className:"shadow-card",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(ae,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:(j=s==null?void 0:s.patient)==null?void 0:j.first_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["SO-",s.id]}),e.jsx("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:s.is_quick&&e.jsx(g,{children:" Quick Opinion "})})]})]}),e.jsxs(g,{className:V("flex items-center gap-1",(f=N[s==null?void 0:s.status])==null?void 0:f.class),children:[e.jsx(d,{className:"h-3 w-3"}),(c=N[s==null?void 0:s.status])==null?void 0:c.label]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((y=s==null?void 0:s.patient)==null?void 0:y.email)??"No Email Found"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Requested ",s==null?void 0:s.created_at]})]}),(s==null?void 0:s.last_visit)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Last visited ",s==null?void 0:s.last_visit]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.attachments.length," attachment",(s==null?void 0:s.attachments.length)>1?"s":""]})]})]})]})}),e.jsxs(l,{className:"shadow-card",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Original Diagnosis"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"rounded-lg bg-muted/50 p-4 mb-4",children:e.jsx("p",{className:"text-sm font-medium",children:s==null?void 0:s.subject})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsx(xe,{attachments:s==null?void 0:s.attachments}),t?e.jsx(me,{opinion:s}):e.jsx(oe,{so:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{opinion:s}),s.patient&&e.jsx(de,{patient:s.patient}),s.insuranceProvider&&e.jsxs(l,{className:"shadow-card",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Insurance Verification"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"font-medium",children:s.insuranceProvider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Insurance Provider"})]}),!s.insuranceVerified&&s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{id:"insurance-verified",checked:a,onCheckedChange:O=>n(O)}),e.jsx(v,{htmlFor:"insurance-verified",className:"text-sm",children:"Coverage Verified"})]}),e.jsxs(o,{variant:"outline",className:"w-full",onClick:m,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Mark for Insurance Review"]})]}),s.insuranceVerified&&e.jsxs(g,{className:"bg-success/10 text-success w-full justify-center py-2",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Insurance Verified"]})]})]})]})]})]})};export{ns as default};
