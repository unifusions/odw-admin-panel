import{q as C,r as n,W as y,j as e}from"./app-H0fpcem2.js";import{I as t}from"./InputError-D9qlaWra.js";import{I as o}from"./InputLabel-DoWS5ou2.js";import{T as c}from"./TextInput-BXICAGWJ.js";function I(){const h=C().props.auth.user,[x,u]=n.useState([]),[p,b]=n.useState([]),[F,m]=n.useState(!1),d=n.useRef(null),{data:r,setData:a,post:j,processing:q,errors:i,reset:f}=y({full_name:"",email:"",phone:"",password:"",password_confirmation:"",branch_id:"",clinic_id:"",role:""}),v=()=>{const s=bootstrap.Modal.getInstance(d.current);f(),s.toggle()},N=async()=>{m(!0);try{const s=await axios.get("/admin/allclinics");u(s.data)}catch(s){console.error("Error Fetching Data",s)}finally{m(!1)}},g=async s=>{try{const l=await axios.get(`/admin/clinicbranches/${s}`);b(l.data)}catch(l){console.error("Error Fetching Data",l)}finally{}},w=s=>{const l=s.target.value;a("clinic_id",l),g(l)},_=s=>{const l=h.role==="super_admin"?"clinic-users.store":"users.store";s.preventDefault(),j(route(l),{onFinish:v})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addClinicModal",onClick:N,children:[e.jsx("i",{className:"bi-hospital me-1"})," Add User"]}),e.jsx("div",{id:"addClinicModal",className:"modal fade modal-lg",ref:d,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Add User"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{action:"",onSubmit:_,noValidate:!0,children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx(o,{htmlFor:"full_name",className:"form-label col-sm-3 col-form-label",value:"Full Name"}),e.jsx("div",{class:"col-sm-9",children:e.jsx(c,{type:"text",id:"full_name",name:"full_name",className:"form-control",placeholder:"Full Name",onChange:s=>a("full_name",s.target.value)})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx(o,{htmlFor:"email",className:"form-label col-sm-3 col-form-label",value:"Email"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(c,{type:"email",id:"email",name:"email",className:"form-control",placeholder:"email@domain.com",onChange:s=>a("email",s.target.value)})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx(o,{htmlFor:"email",className:"form-label col-sm-3 col-form-label",value:"Phone"}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx(c,{type:"text",id:"phone",name:"phone",className:"form-control",placeholder:"+x(xxx)xxx-xx-xx",onChange:s=>a("phone",s.target.value)}),e.jsx(t,{message:i.phone,className:"mt-2"})]})]}),e.jsxs("div",{class:"row mb-4",children:[e.jsx(o,{className:"form-label col-sm-3 col-form-label",htmlFor:"password",value:"Password"}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx(c,{id:"password",type:"password",name:"password",value:r.password,className:"form-control form-control-lg",placeholder:"8+ characters required",onChange:s=>a("password",s.target.value),required:!0}),e.jsx(t,{message:i.password,className:"invalid-feedback"})]})]}),e.jsxs("div",{class:"row mb-4",children:[e.jsx(o,{htmlFor:"password_confirmation",value:"Confirm Password",className:"form-label col-sm-3 col-form-label"}),e.jsxs("div",{class:"col-sm-9",children:[e.jsx(c,{id:"password_confirmation",type:"password",name:"password_confirmation",value:r.password_confirmation,className:"form-control form-control-lg mb-3",placeholder:"8+ characters required",onChange:s=>a("password_confirmation",s.target.value),required:!0}),e.jsx(t,{message:i.password_confirmation,className:"invalid-feedback"}),e.jsx("h5",{children:"Password requirements:"}),e.jsx("p",{class:"fs-6 mb-2",children:"Ensure that these requirements are met:"}),e.jsxs("ul",{class:"fs-6",children:[e.jsx("li",{children:"Minimum 8 characters long - the more, the better"}),e.jsx("li",{children:"At least one lowercase character"}),e.jsx("li",{children:"At least one uppercase character"}),e.jsx("li",{children:"At least one number, symbol, or whitespace character"})]})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("label",{htmlFor:"clinic_master",className:"col-sm-3 col-form-label form-label",children:"Clinic "}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{name:"",id:"clinic_master",className:"form-select",onChange:w,value:r.clinic_id,children:[e.jsx("option",{value:""}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("label",{htmlFor:"clinic_branch",className:"col-sm-3 col-form-label form-label",children:"Branch "}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{name:"",id:"clinic_branch",className:"form-select",onChange:s=>a("branch_id",s.target.value),value:r.branch_id,children:[e.jsx("option",{value:""}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("label",{for:"phoneLabel",className:"col-sm-3 col-form-label form-label",children:"Role "}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{name:"",id:"",className:"form-select",onChange:s=>a("role",s.target.value),value:r.role,children:[e.jsx("option",{value:"",children:"Select User Role"}),e.jsx("option",{value:"clinic_admin",children:"Clinic Admin"}),e.jsx("option",{value:"clinic_user",children:"Clinic User"})]})})]}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-sm-12 text-end",children:[e.jsx("button",{type:"button",className:"btn btn-white me-3","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save User"})]})})]})})]})})})]})}export{I as default};
