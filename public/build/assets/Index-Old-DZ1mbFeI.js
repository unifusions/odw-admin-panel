import{r as i,y as g,j as e,Y as S}from"./app-C1K6nQVK.js";import{A as f,B as N}from"./AuthenticatedLayout-JWQ1OI35.js";import{F as w,i as C,a as M,b as D}from"./index-BQH9de5I.js";import A from"./PendingAppointments-BnKyjpjn.js";import"./index-3-wcmcvn.js";import"./Sidebar-BWgOxClJ.js";import"./DentistIcon-DURlZtbG.js";import"./index-C510A9Bq.js";function R({appointments:m,pendingAppointments:o}){const d=i.useRef(null),[n,u]=i.useState(null);i.useEffect(()=>{if(!n||d.current===n)return;d.current=n;const[t,s]=n.split("-");g.get(route("appointments.index"),{year:t,month:s},{only:["appointments"],preserveScroll:!0,preserveState:!0,replace:!0})},[n]);const h=t=>{const s=t.view.currentStart,r=s.getFullYear(),c=(s.getMonth()+1).toString().padStart(2,"0"),l=`${r}-${c}`;n!==l&&u(l)},p=t=>{const{extendedProps:s,title:r,backgroundColor:c,start:l,end:y}=t.event,b=new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return new Date(y).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),e.jsx("div",{className:"custom-event text-truncate",style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:e.jsx("div",{className:"d-flex align-items-top",children:e.jsxs("div",{children:[e.jsx("div",{children:r}),e.jsx("div",{className:"text-muted mb-3 fs-10",children:b})]})})})},[a,x]=i.useState(null),v=t=>{x({title:t.event.title,start:t.event.start.toLocaleString(),end:t.event.end?t.event.end.toLocaleString():"N/A"}),new window.bootstrap.Modal(document.getElementById("eventModal")).show()},j=t=>{const s=prompt("Enter a title for this event");t.view.calendar.unselect(),s&&(t.startStr,t.endStr,t.allDay)};return e.jsxs(f,{header:"Appointments",children:[e.jsx(S,{title:"Appointments"}),e.jsx(N,{}),o>0&&e.jsx(A,{pendingEvents:o}),e.jsx(w,{plugins:[C,M,D],initialView:"dayGridMonth",selectable:!1,events:m,select:j,dayHeaderClassNames:"fullcalendar-custom",eventClassNames:"fullcalendar-custom",slotLabelClassNames:"fullcalendar-custom",eventClick:v,eventContent:p,themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"prev,next dayGridMonth,timeGridWeek,timeGridDay,today"},slotMinTime:"00:00:00",slotMaxTime:"23:50:00",datesSet:h}),e.jsx("div",{className:"modal fade",id:"eventModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:a==null?void 0:a.title}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Start:"})," ",a==null?void 0:a.start]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End:"})," ",a==null?void 0:a.end]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})}export{R as default};
