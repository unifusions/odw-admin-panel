var Vs=Object.defineProperty;var Ls=(e,t,n)=>t in e?Vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pe=(e,t,n)=>Ls(e,typeof t!="symbol"?t+"":t,n);import{r as u,t as co,j as Q}from"./app-BK9PCMc-.js";import{c as Mt,B as Fs}from"./button-BtMfAeD_.js";import{C as Ds}from"./check-DAcVx8m5.js";import{X as Ns}from"./x-CqcpF1IV.js";import{c as js,l as Bs,r as Hs,w as $s}from"./with-selector-CUigg6yz.js";import{r as Wt}from"./index-DDtZmy-E.js";import{i as at,e as qs,g as Lr,j as jn,k as uo,m as lo,n as Ks,p as ao,q as Je,r as Zn,t as Us,u as er,v as Ws,w as Gs,x as zs,y as _s,z as br,A as Ys,B as Xs,C as Pn,D as Fr,d as Dr}from"./floating-ui.dom-g0iQpA8R.js";import{u as Qs,h as Js,f as Zs,a as ei,o as ti,s as ni,l as ri}from"./floating-ui.react-dom-rxBjEIHI.js";function tr({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=u.useRef(e!==void 0),[s,i]=u.useState(t),a=o?e:s,l=u.useCallback(c=>{o||i(c)},[]);return[a,l]}const Nr={};function ot(e,t){const n=u.useRef(Nr);return n.current===Nr&&(n.current=e(t)),n}const nr=co[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],oi=nr&&nr!==u.useLayoutEffect?nr:e=>e();function _(e){const t=ot(si).current;return t.next=e,oi(t.effect),t.trampoline}function si(){const e={next:void 0,callback:ii,trampoline:(...t)=>{var n;return(n=e.callback)==null?void 0:n.call(e,...t)},effect:()=>{e.callback=e.next}};return e}function ii(){}const ci=()=>{},Y=typeof document<"u"?u.useLayoutEffect:ci,fo=u.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function ui(){return u.useContext(fo)}function po(e){const{children:t,elementsRef:n,labelsRef:r,onMapChange:o}=e,s=_(o),i=u.useRef(0),a=ot(ai).current,l=ot(li).current,[c,p]=u.useState(0),d=u.useRef(c),b=_((y,f)=>{l.set(y,f??null),d.current+=1,p(d.current)}),h=_(y=>{l.delete(y),d.current+=1,p(d.current)}),m=u.useMemo(()=>{const y=new Map;return Array.from(l.keys()).filter(E=>E.isConnected).sort(fi).forEach((E,x)=>{const P=l.get(E)??{};y.set(E,{...P,index:x})}),y},[l,c]);Y(()=>{if(typeof MutationObserver!="function"||m.size===0)return;const y=new MutationObserver(f=>{const E=new Set,x=P=>E.has(P)?E.delete(P):E.add(P);f.forEach(P=>{P.removedNodes.forEach(x),P.addedNodes.forEach(x)}),E.size===0&&(d.current+=1,p(d.current))});return m.forEach((f,E)=>{E.parentElement&&y.observe(E.parentElement,{childList:!0})}),()=>{y.disconnect()}},[m]),Y(()=>{d.current===c&&(n.current.length!==m.size&&(n.current.length=m.size),r&&r.current.length!==m.size&&(r.current.length=m.size),i.current=m.size),s(m)},[s,m,n,r,c]),Y(()=>()=>{n.current=[]},[n]),Y(()=>()=>{r&&(r.current=[])},[r]);const R=_(y=>(a.add(y),()=>{a.delete(y)}));Y(()=>{a.forEach(y=>y(m))},[a,m]);const C=u.useMemo(()=>({register:b,unregister:h,subscribeMapChange:R,elementsRef:n,labelsRef:r,nextIndexRef:i}),[b,h,R,n,r,i]);return Q.jsx(fo.Provider,{value:C,children:t})}function li(){return new Map}function ai(){return new Set}function fi(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const di=u.createContext(void 0);function ho(){const e=u.useContext(di);return(e==null?void 0:e.direction)??"ltr"}function st(e,...t){const n=new URL("https://base-ui.com/production-error");return n.searchParams.set("code",e.toString()),t.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${e}; visit ${n} for the full message.`}function cn(e,t,n,r){const o=ot(mo).current;return hi(o,e,t,n,r)&&go(o,[e,t,n,r]),o.callback}function pi(e){const t=ot(mo).current;return mi(t,e)&&go(t,e),t.callback}function mo(){return{callback:null,cleanup:null,refs:[]}}function hi(e,t,n,r,o){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==o}function mi(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function go(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let o=0;o<t.length;o+=1){const s=t[o];if(s!=null)switch(typeof s){case"function":{const i=s(n);typeof i=="function"&&(r[o]=i);break}case"object":{s.current=n;break}}}e.cleanup=()=>{for(let o=0;o<t.length;o+=1){const s=t[o];if(s!=null)switch(typeof s){case"function":{const i=r[o];typeof i=="function"?i():s(null);break}case"object":{s.current=null;break}}}}}}}const gi=parseInt(u.version,10);function yr(e){return gi>=e}function jr(e){if(!u.isValidElement(e))return null;const t=e,n=t.props;return(yr(19)?n==null?void 0:n.ref:t.ref)??null}function ur(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function bi(e,t){const n={};for(const r in e){const o=e[r];if(t!=null&&t.hasOwnProperty(r)){const s=t[r](o);s!=null&&Object.assign(n,s);continue}o===!0?n[`data-${r.toLowerCase()}`]="":o&&(n[`data-${r.toLowerCase()}`]=o.toString())}return n}function yi(e,t){return typeof e=="function"?e(t):e}function vi(e,t){return typeof e=="function"?e(t):e}const tn={};function bo(e,t,n,r,o){let s={...lr(e,tn)};return t&&(s=On(s,t)),n&&(s=On(s,n)),r&&(s=On(s,r)),s}function xi(e){if(e.length===0)return tn;if(e.length===1)return lr(e[0],tn);let t={...lr(e[0],tn)};for(let n=1;n<e.length;n+=1)t=On(t,e[n]);return t}function On(e,t){return yo(t)?t(e):Ei(e,t)}function Ei(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=ur(e.style,r);break}case"className":{e[n]=vo(e.className,r);break}default:Ii(n,r)?e[n]=Ri(e[n],r):e[n]=r}}return e}function Ii(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2);return n===111&&r===110&&o>=65&&o<=90&&(typeof t=="function"||typeof t>"u")}function yo(e){return typeof e=="function"}function lr(e,t){return yo(e)?e(t):e??tn}function Ri(e,t){return t?e?n=>{if(Ci(n)){const o=n;ar(o);const s=t(o);return o.baseUIHandlerPrevented||e==null||e(o),s}const r=t(n);return e==null||e(n),r}:t:e}function ar(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function vo(e,t){return t?e?t+" "+e:t:e}function Ci(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Me(){}const Qt=Object.freeze([]),Ke=Object.freeze({}),wi={style:{transition:"none"}},Si="data-base-ui-click-trigger",Pi={fallbackAxisSide:"none"},Oi={clipPath:"inset(50%)",position:"fixed",top:0,left:0};function it(e,t,n={}){const r=t.render,o=Ti(t,n);if(n.enabled===!1)return null;const s=n.state??Ke;return Ai(e,r,o,s)}function Ti(e,t={}){const{className:n,style:r,render:o}=e,{state:s=Ke,ref:i,props:a,stateAttributesMapping:l,enabled:c=!0}=t,p=c?yi(n,s):void 0,d=c?vi(r,s):void 0,b=c?bi(s,l):Ke,h=c?ur(b,Array.isArray(a)?xi(a):a)??Ke:Ke;return typeof document<"u"&&(c?Array.isArray(i)?h.ref=pi([h.ref,jr(o),...i]):h.ref=cn(h.ref,jr(o),i):cn(null,null)),c?(p!==void 0&&(h.className=vo(h.className,p)),d!==void 0&&(h.style=ur(h.style,d)),h):Ke}function Ai(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const o=bo(n,t.props);return o.ref=n.ref,u.cloneElement(t,o)}if(e&&typeof e=="string")return ki(e,n);throw new Error(st(8))}function ki(e,t){return e==="button"?u.createElement("button",{type:"button",...t,key:t.key}):e==="img"?u.createElement("img",{alt:"",...t,key:t.key}):u.createElement(e,t)}const Qe="none",nn="trigger-press",Mi="trigger-hover",vr="outside-press",Vi="item-press",Br="chip-remove-press",kt="input-change",yt="input-clear",Bn="focus-out",xo="escape-key",Tn="list-navigation";function se(e,t,n,r){let o=!1,s=!1;const i=Ke;return{reason:e,event:t??new Event("base-ui"),cancel(){o=!0},allowPropagation(){s=!0},get isCanceled(){return o},get isPropagationAllowed(){return s},trigger:n,...i}}function Jt(e,t,n){const r=n??Ke;return{reason:e,event:t??new Event("base-ui"),...r}}const Li={...co};let Hr=0;function Fi(e,t="mui"){const[n,r]=u.useState(e),o=e||n;return u.useEffect(()=>{n==null&&(Hr+=1,r(`${t}-${Hr}`))},[n,t]),o}const $r=Li.useId;function xr(e,t){if($r!==void 0){const n=$r();return e??(t?`${t}-${n}`:n)}return Fi(e,t)}function Eo(e){return xr(e,"base-ui")}const Di=[];function Io(e){u.useEffect(e,Di)}const yn=null;class Ni{constructor(){Pe(this,"callbacks",[]);Pe(this,"callbacksCount",0);Pe(this,"nextId",1);Pe(this,"startId",1);Pe(this,"isScheduled",!1);Pe(this,"tick",t=>{var o;this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)(o=n[s])==null||o.call(n,t)})}request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const vn=new Ni;class lt{constructor(){Pe(this,"currentId",yn);Pe(this,"cancel",()=>{this.currentId!==yn&&(vn.cancel(this.currentId),this.currentId=yn)});Pe(this,"disposeEffect",()=>this.cancel)}static create(){return new lt}static request(t){return vn.request(t)}static cancel(t){return vn.cancel(t)}request(t){this.cancel(),this.currentId=vn.request(()=>{this.currentId=yn,t()})}}function Er(){const e=ot(lt.create).current;return Io(e.disposeEffect),e}function ht(e){return e==null?e:"current"in e?e.current:e}let un=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const ji={[un.startingStyle]:""},Bi={[un.endingStyle]:""},Ro={transitionStatus(e){return e==="starting"?ji:e==="ending"?Bi:null}};function Hi(e,t=!1,n=!0){const r=Er();return _((o,s=null)=>{r.cancel();function i(){Wt.flushSync(o)}const a=ht(e);if(a==null)return;const l=a;if(typeof l.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED)o();else{let c=function(){const d=un.startingStyle;if(!l.hasAttribute(d)){r.request(p);return}const b=new MutationObserver(()=>{l.hasAttribute(d)||(b.disconnect(),p())});b.observe(l,{attributes:!0,attributeFilter:[d]}),s==null||s.addEventListener("abort",()=>b.disconnect(),{once:!0})},p=function(){Promise.all(l.getAnimations().map(d=>d.finished)).then(()=>{s!=null&&s.aborted||i()}).catch(()=>{const d=l.getAnimations();if(n){if(s!=null&&s.aborted)return;i()}else d.length>0&&d.some(b=>b.pending||b.playState!=="finished")&&p()})};if(t){c();return}r.request(p)}})}function Co(e,t=!1,n=!1){const[r,o]=u.useState(e&&t?"idle":void 0),[s,i]=u.useState(e);return e&&!s&&(i(!0),o("starting")),!e&&s&&r!=="ending"&&!n&&o("ending"),!e&&!s&&r==="ending"&&o(void 0),Y(()=>{if(!e&&s&&r!=="ending"&&n){const a=lt.request(()=>{o("ending")});return()=>{lt.cancel(a)}}},[e,s,r,n]),Y(()=>{if(!e||t)return;const a=lt.request(()=>{o(void 0)});return()=>{lt.cancel(a)}},[t,e]),Y(()=>{if(!e||!t)return;e&&s&&r!=="idle"&&o("starting");const a=lt.request(()=>{o("idle")});return()=>{lt.cancel(a)}},[t,e,s,o,r]),u.useMemo(()=>({mounted:s,setMounted:i,transitionStatus:r}),[s,r])}let wo=function(e){return e[e.None=0]="None",e[e.GuessFromOrder=1]="GuessFromOrder",e}({});function So(e={}){const{label:t,metadata:n,textRef:r,indexGuessBehavior:o,index:s}=e,{register:i,unregister:a,subscribeMapChange:l,elementsRef:c,labelsRef:p,nextIndexRef:d}=ui(),b=u.useRef(-1),[h,m]=u.useState(s??(o===wo.GuessFromOrder?()=>{if(b.current===-1){const y=d.current;d.current+=1,b.current=y}return b.current}:-1)),R=u.useRef(null),C=u.useCallback(y=>{var f;if(R.current=y,h!==-1&&y!==null&&(c.current[h]=y,p)){const E=t!==void 0;p.current[h]=E?t:((f=r==null?void 0:r.current)==null?void 0:f.textContent)??y.textContent}},[h,c,p,t,r]);return Y(()=>{if(s!=null)return;const y=R.current;if(y)return i(y,n),()=>{a(y)}},[s,i,a,n]),Y(()=>{if(s==null)return l(y=>{var E;const f=R.current?(E=y.get(R.current))==null?void 0:E.index:null;f!=null&&m(f)})},[s,l,m]),u.useMemo(()=>({ref:C,index:h}),[h,C])}const $i=u.createContext(void 0);function qi(e=!1){const t=u.useContext($i);if(t===void 0&&!e)throw new Error(st(16));return t}function Ki(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:o=0,isNativeButton:s}=e,i=r&&t!==!1,a=r&&t===!1;return{props:u.useMemo(()=>{const c={onKeyDown(p){n&&t&&p.key!=="Tab"&&p.preventDefault()}};return r||(c.tabIndex=o,!s&&n&&(c.tabIndex=t?o:-1)),(s&&(t||i)||!s&&n)&&(c["aria-disabled"]=n),s&&(!t||a)&&(c.disabled=n),c},[r,n,t,i,a,s,o])}}function Po(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:o=!0}=e,s=u.useRef(null),i=qi(!0)!==void 0,a=_(()=>{const b=s.current;return!!((b==null?void 0:b.tagName)==="A"&&(b!=null&&b.href))}),{props:l}=Ki({focusableWhenDisabled:n,disabled:t,composite:i,tabIndex:r,isNativeButton:o}),c=u.useCallback(()=>{const b=s.current;Ui(b)&&i&&t&&l.disabled===void 0&&b.disabled&&(b.disabled=!1)},[t,l.disabled,i]);Y(c,[c]);const p=u.useCallback((b={})=>{const{onClick:h,onMouseDown:m,onKeyUp:R,onKeyDown:C,onPointerDown:y,...f}=b;return bo({type:o?"button":void 0,onClick(x){if(t){x.preventDefault();return}h==null||h(x)},onMouseDown(x){t||m==null||m(x)},onKeyDown(x){if(t||(ar(x),C==null||C(x)),x.baseUIHandlerPrevented)return;const P=x.target===x.currentTarget&&!o&&!a()&&!t,M=x.key==="Enter",T=x.key===" ";P&&((T||M)&&x.preventDefault(),M&&(h==null||h(x)))},onKeyUp(x){t||(ar(x),R==null||R(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!o&&!t&&x.key===" "&&(h==null||h(x))},onPointerDown(x){if(t){x.preventDefault();return}y==null||y(x)}},o?void 0:{role:"button"},l,f)},[t,l,o,a]),d=_(b=>{s.current=b,c()});return{getButtonProps:p,buttonRef:d}}function Ui(e){return at(e)&&e.tagName==="BUTTON"}const Vt=typeof navigator<"u",rr=_i(),Oo=Xi(),Ir=Yi(),Wi=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),To=rr.platform==="MacIntel"&&rr.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(rr.platform),qr=Vt&&/firefox/i.test(Ir),Gi=Vt&&/apple/i.test(navigator.vendor),kn=Vt&&/android/i.test(Oo)||/android/i.test(Ir);Vt&&Oo.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;const zi=Ir.includes("jsdom/");function _i(){if(!Vt)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function Yi(){if(!Vt)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function Xi(){if(!Vt)return"";const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform??""}const fr="data-base-ui-focusable",Ao="active",ko="selected",Qi="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",Et="ArrowLeft",It="ArrowRight",Rr="ArrowUp",fn="ArrowDown";function vt(e){var n;let t=e.activeElement;for(;((n=t==null?void 0:t.shadowRoot)==null?void 0:n.activeElement)!=null;)t=t.shadowRoot.activeElement;return t}function Oe(e,t){var r;if(!e||!t)return!1;const n=(r=t.getRootNode)==null?void 0:r.call(t);if(e.contains(t))return!0;if(n&&qs(n)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function Ge(e){return"composedPath"in e?e.composedPath()[0]:e.target}function rt(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Ji(e){return e.matches("html,body")}function qe(e){return(e==null?void 0:e.ownerDocument)||document}function Mo(e){return at(e)&&e.matches(Qi)}function dr(e){return e?e.getAttribute("role")==="combobox"&&Mo(e):!1}function pr(e){return e?e.hasAttribute(fr)?e:e.querySelector(`[${fr}]`)||e:null}function Bt(e,t,n=!0){return e.filter(o=>{var s;return o.parentId===t&&(!n||((s=o.context)==null?void 0:s.open))}).flatMap(o=>[o,...Bt(e,o.id,n)])}function Kr(e,t){var o;let n=[],r=(o=e.find(s=>s.id===t))==null?void 0:o.parentId;for(;r;){const s=e.find(i=>i.id===r);r=s==null?void 0:s.parentId,s&&(n=n.concat(s))}return n}function Ve(e){e.preventDefault(),e.stopPropagation()}function Zi(e){return"nativeEvent"in e}function Vo(e){return e.mozInputSource===0&&e.isTrusted?!0:kn&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Lo(e){return zi?!1:!kn&&e.width===0&&e.height===0||kn&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ur(e,t){return["mouse","pen"].includes(e)}function Fo(e){const t=e.type;return t==="click"||t==="mousedown"||t==="keydown"||t==="keyup"}function xn(e,t,n){return Math.floor(e/t)!==n}function rn(e,t){return t<0||t>=e.current.length}function or(e,t){return $e(e,{disabledIndices:t})}function Wr(e,t){return $e(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function $e(e,{startingIndex:t=-1,decrement:n=!1,disabledIndices:r,amount:o=1}={}){let s=t;do s+=n?-o:o;while(s>=0&&s<=e.current.length-1&&on(e,s,r));return s}function ec(e,{event:t,orientation:n,loopFocus:r,rtl:o,cols:s,disabledIndices:i,minIndex:a,maxIndex:l,prevIndex:c,stopEvent:p=!1}){let d=c;const b=[],h={};let m=!1;{let y=null,f=-1;e.current.forEach((E,x)=>{if(E==null)return;const P=E.closest('[role="row"]');P&&(m=!0),(P!==y||f===-1)&&(y=P,f+=1,b[f]=[]),b[f].push(x),h[x]=f})}const R=m&&b.length>0&&b.some(y=>y.length!==s);function C(y){if(!R||c===-1)return;const f=h[c];if(f==null)return;const E=b[f].indexOf(c);let x=y==="up"?f-1:f+1;r&&(x<0?x=b.length-1:x>=b.length&&(x=0));const P=new Set;for(;x>=0&&x<b.length&&!P.has(x);){P.add(x);const M=b[x];if(M.length===0){x=y==="up"?x-1:x+1;continue}const T=Math.min(E,M.length-1);for(let S=T;S>=0;S-=1){const W=M[S];if(!on(e,W,i))return W}x=y==="up"?x-1:x+1,r&&(x<0?x=b.length-1:x>=b.length&&(x=0))}}if(t.key===Rr){const y=C("up");if(y!==void 0)p&&Ve(t),d=y;else{if(p&&Ve(t),c===-1)d=l;else if(d=$e(e,{startingIndex:d,amount:s,decrement:!0,disabledIndices:i}),r&&(c-s<a||d<0)){const f=c%s,E=l%s,x=l-(E-f);E===f?d=l:d=E>f?x:x-s}rn(e,d)&&(d=c)}}if(t.key===fn){const y=C("down");y!==void 0?(p&&Ve(t),d=y):(p&&Ve(t),c===-1?d=a:(d=$e(e,{startingIndex:c,amount:s,disabledIndices:i}),r&&c+s>l&&(d=$e(e,{startingIndex:c%s-s,amount:s,disabledIndices:i}))),rn(e,d)&&(d=c))}if(n==="both"){const y=Lr(c/s);t.key===(o?Et:It)&&(p&&Ve(t),c%s!==s-1?(d=$e(e,{startingIndex:c,disabledIndices:i}),r&&xn(d,s,y)&&(d=$e(e,{startingIndex:c-c%s-1,disabledIndices:i}))):r&&(d=$e(e,{startingIndex:c-c%s-1,disabledIndices:i})),xn(d,s,y)&&(d=c)),t.key===(o?It:Et)&&(p&&Ve(t),c%s!==0?(d=$e(e,{startingIndex:c,decrement:!0,disabledIndices:i}),r&&xn(d,s,y)&&(d=$e(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:i}))):r&&(d=$e(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:i})),xn(d,s,y)&&(d=c));const f=Lr(l/s)===y;rn(e,d)&&(r&&f?d=t.key===(o?It:Et)?l:$e(e,{startingIndex:c-c%s-1,disabledIndices:i}):d=c)}return d}function tc(e,t,n){const r=[];let o=0;return e.forEach(({width:s,height:i},a)=>{let l=!1;for(n&&(o=0);!l;){const c=[];for(let p=0;p<s;p+=1)for(let d=0;d<i;d+=1)c.push(o+p+d*t);o%t+s<=t&&c.every(p=>r[p]==null)?(c.forEach(p=>{r[p]=a}),l=!0):o+=1}}),[...r]}function nc(e,t,n,r,o){if(e===-1)return-1;const s=n.indexOf(e),i=t[e];switch(o){case"tl":return s;case"tr":return i?s+i.width-1:s;case"bl":return i?s+(i.height-1)*r:s;case"br":return n.lastIndexOf(e);default:return-1}}function rc(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function on(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var oc=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Mn=oc.join(","),Do=typeof Element>"u",qt=Do?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Vn=!Do&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Ln=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=o===""||o==="true",i=s||n&&t&&(typeof t.closest=="function"?t.closest("[inert]"):Ln(t.parentNode));return i},sc=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},No=function(t,n,r){if(Ln(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(Mn));return n&&qt.call(t,Mn)&&o.unshift(t),o=o.filter(r),o},Fn=function(t,n,r){for(var o=[],s=Array.from(t);s.length;){var i=s.shift();if(!Ln(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=Fn(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var p=qt.call(i,Mn);p&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var d=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),b=!Ln(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(d&&b){var h=Fn(d===!0?i.children:d.children,!0,r);r.flatten?o.push.apply(o,h):o.push({scopeParent:i,candidates:h})}else s.unshift.apply(s,i.children)}}return o},jo=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Bo=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||sc(t))&&!jo(t)?0:t.tabIndex},ic=function(t,n){var r=Bo(t);return r<0&&n&&!jo(t)?0:r},cc=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},Ho=function(t){return t.tagName==="INPUT"},uc=function(t){return Ho(t)&&t.type==="hidden"},lc=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},ac=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},fc=function(t){if(!t.name)return!0;var n=t.form||Vn(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=ac(o,t.form);return!s||s===t},dc=function(t){return Ho(t)&&t.type==="radio"},pc=function(t){return dc(t)&&!fc(t)},hc=function(t){var n,r=t&&Vn(t),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&o;){var c,p,d;r=Vn(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((p=o)!==null&&p!==void 0&&(d=p.ownerDocument)!==null&&d!==void 0&&d.contains(o))}}return s},Gr=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},mc=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var s=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(t).visibility==="hidden")return!0;var i=qt.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(qt.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var c=t.parentElement,p=Vn(t);if(c&&!c.shadowRoot&&o(c)===!0)return Gr(t);t.assignedSlot?t=t.assignedSlot:!c&&p!==t.ownerDocument?t=p.host:t=c}t=l}if(hc(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Gr(t);return!1},gc=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return qt.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},hr=function(t,n){return!(n.disabled||uc(n)||mc(n,t)||lc(n)||gc(n))},mr=function(t,n){return!(pc(n)||Bo(n)<0||!hr(t,n))},bc=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},$o=function(t){var n=[],r=[];return t.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=ic(a,i),c=i?$o(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(cc).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},Hn=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Fn([t],n.includeContainer,{filter:mr.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bc}):r=No(t,n.includeContainer,mr.bind(null,n)),$o(r)},yc=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Fn([t],n.includeContainer,{filter:hr.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=No(t,n.includeContainer,hr.bind(null,n)),r},qo=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return qt.call(t,Mn)===!1?!1:mr(n,t)};const dn=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ko(e,t){const n=Hn(e,dn()),r=n.length;if(r===0)return;const o=vt(qe(e)),s=n.indexOf(o),i=s===-1?t===1?0:r-1:s+t;return n[i]}function Uo(e){return Ko(qe(e).body,1)||e}function Wo(e){return Ko(qe(e).body,-1)||e}function sn(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Oe(n,r)}function vc(e){Hn(e,dn()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function zr(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function Cr(e){const{enabled:t=!0,open:n,ref:r,onComplete:o}=e,s=_(o),i=Hi(r,n,!1);u.useEffect(()=>{if(!t)return;const a=new AbortController;return i(s,a.signal),()=>{a.abort()}},[t,n,s,i])}function Gt(e){return(e==null?void 0:e.ownerDocument)||document}const Zt=0;class Kt{constructor(){Pe(this,"currentId",Zt);Pe(this,"clear",()=>{this.currentId!==Zt&&(clearTimeout(this.currentId),this.currentId=Zt)});Pe(this,"disposeEffect",()=>this.clear)}static create(){return new Kt}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Zt,n()},t)}isStarted(){return this.currentId!==Zt}}function ln(){const e=ot(Kt.create).current;return Io(e.disposeEffect),e}let _r={},Yr={},Xr="";function xc(e){if(typeof document>"u")return!1;const t=Gt(e);return jn(t).innerWidth-t.documentElement.clientWidth>0}function Ec(e){if(!(typeof CSS<"u"&&CSS.supports&&CSS.supports("scrollbar-gutter","stable"))||typeof document>"u")return!1;const r=Gt(e).documentElement,o={scrollbarGutter:r.style.scrollbarGutter,overflowY:r.style.overflowY};r.style.scrollbarGutter="stable",r.style.overflowY="scroll";const s=r.offsetWidth;r.style.overflowY="hidden";const i=r.offsetWidth;return Object.assign(r.style,o),s===i}function Ic(e){const t=Gt(e),n=t.documentElement,r=t.body,o=uo(n)?n:r,s=o.style.overflow;return o.style.overflow="hidden",()=>{o.style.overflow=s}}function Rc(e){var b;const t=Gt(e),n=t.documentElement,r=t.body,o=jn(n);let s=0,i=0,a=!1;const l=lt.create();if(Wi&&(((b=o.visualViewport)==null?void 0:b.scale)??1)!==1)return()=>{};function c(){const h=o.getComputedStyle(n),m=o.getComputedStyle(r),y=(h.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";s=n.scrollTop,i=n.scrollLeft,_r={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},Xr=n.style.scrollBehavior,Yr={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const f=n.scrollHeight>n.clientHeight,E=n.scrollWidth>n.clientWidth,x=h.overflowY==="scroll"||m.overflowY==="scroll",P=h.overflowX==="scroll"||m.overflowX==="scroll",M=Math.max(0,o.innerWidth-r.clientWidth),T=Math.max(0,o.innerHeight-r.clientHeight),S=parseFloat(m.marginTop)+parseFloat(m.marginBottom),W=parseFloat(m.marginLeft)+parseFloat(m.marginRight),X=uo(n)?n:r;if(a=Ec(e),a){n.style.scrollbarGutter=y,X.style.overflowY="hidden",X.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:y,overflowY:"hidden",overflowX:"hidden"}),(f||x)&&(n.style.overflowY="scroll"),(E||P)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:S||T?`calc(100dvh - ${S+T}px)`:"100dvh",width:W||M?`calc(100vw - ${W+M}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=s,r.scrollLeft=i,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function p(){Object.assign(n.style,_r),Object.assign(r.style,Yr),a||(n.scrollTop=s,n.scrollLeft=i,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=Xr)}function d(){p(),l.request(c)}return c(),o.addEventListener("resize",d),()=>{l.cancel(),p(),typeof o.removeEventListener=="function"&&o.removeEventListener("resize",d)}}class Cc{constructor(){Pe(this,"lockCount",0);Pe(this,"restore",null);Pe(this,"timeoutLock",Kt.create());Pe(this,"timeoutUnlock",Kt.create());Pe(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});Pe(this,"unlock",()=>{var t;this.lockCount===0&&this.restore&&((t=this.restore)==null||t.call(this),this.restore=null)})}acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}lock(t){if(this.lockCount===0||this.restore!==null)return;const r=Gt(t).documentElement,o=jn(r).getComputedStyle(r).overflowY;if(o==="hidden"||o==="clip"){this.restore=Me;return}const s=To||!xc(t);this.restore=s?Ic(t):Rc(t)}}const wc=new Cc;function Sc(e=!0,t=null){Y(()=>{if(e)return wc.acquire(t)},[e,t])}function ze(e){const t=ot(Pc,e).current;return t.next=e,Y(t.effect),t}function Pc(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}function Oc(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const Tc=u.createContext(null),Ac=u.createContext(null),Go=()=>{var e;return((e=u.useContext(Tc))==null?void 0:e.id)||null},$n=e=>{const t=u.useContext(Ac);return e??t};function Dn(e){return`data-base-ui-${e}`}const zo={clipPath:"inset(50%)",overflow:"hidden",whiteSpace:"nowrap",border:0,padding:0,width:1,height:1,margin:-1},wr={...zo,position:"fixed",top:0,left:0},kc={...zo,position:"absolute"},Nn=u.forwardRef(function(t,n){const[r,o]=u.useState();Y(()=>{Gi&&o("button")},[]);const s={tabIndex:0,role:r};return Q.jsx("span",{...t,ref:n,style:wr,"aria-hidden":r?void 0:!0,...s,"data-base-ui-focus-guard":""})});let Qr=0;function An(e,t={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(Qr);const s=()=>e==null?void 0:e.focus({preventScroll:n});o?s():Qr=requestAnimationFrame(s)}const Ht={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Jr(e){return e==="inert"?Ht.inert:e==="aria-hidden"?Ht["aria-hidden"]:Ht.none}let En=new WeakSet,In={},sr=0;const _o=e=>e&&(e.host||_o(e.parentNode)),Mc=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=_o(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Vc(e,t,n,r){const o="data-base-ui-inert",s=r?"inert":n?"aria-hidden":null,i=Mc(t,e),a=new Set,l=new Set(i),c=[];In[o]||(In[o]=new WeakMap);const p=In[o];i.forEach(d),b(t),a.clear();function d(h){!h||a.has(h)||(a.add(h),h.parentNode&&d(h.parentNode))}function b(h){!h||l.has(h)||[].forEach.call(h.children,m=>{if(lo(m)!=="script")if(a.has(m))b(m);else{const R=s?m.getAttribute(s):null,C=R!==null&&R!=="false",y=Jr(s),f=(y.get(m)||0)+1,E=(p.get(m)||0)+1;y.set(m,f),p.set(m,E),c.push(m),f===1&&C&&En.add(m),E===1&&m.setAttribute(o,""),!C&&s&&m.setAttribute(s,s==="inert"?"":"true")}})}return sr+=1,()=>{c.forEach(h=>{const m=Jr(s),C=(m.get(h)||0)-1,y=(p.get(h)||0)-1;m.set(h,C),p.set(h,y),C||(!En.has(h)&&s&&h.removeAttribute(s),En.delete(h)),y||h.removeAttribute(o)}),sr-=1,sr||(Ht.inert=new WeakMap,Ht["aria-hidden"]=new WeakMap,Ht.none=new WeakMap,En=new WeakSet,In={})}}function Lc(e,t=!1,n=!1){const r=qe(e[0]).body;return Vc(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Yo=u.createContext(null),Xo=()=>u.useContext(Yo),Fc=Dn("portal");function Dc(e={}){const{ref:t,container:n,componentProps:r=Ke,elementProps:o,elementState:s}=e,i=xr(),a=Xo(),l=a==null?void 0:a.portalNode,[c,p]=u.useState(null),[d,b]=u.useState(null),h=_(y=>{y!==null&&b(y)}),m=u.useRef(null);Y(()=>{if(n===null){m.current&&(m.current=null,b(null),p(null));return}if(i==null)return;const y=(n&&(Ks(n)?n:n.current))??l??document.body;if(y==null){m.current&&(m.current=null,b(null),p(null));return}m.current!==y&&(m.current=y,b(null),p(y))},[n,l,i]);const R=it("div",r,{ref:[t,h],state:s,props:[{id:i,[Fc]:""},o]});return{portalNode:d,portalSubtree:c&&R?Wt.createPortal(R,c):null}}const Nc=u.forwardRef(function(t,n){const{children:r,container:o,className:s,render:i,renderGuards:a,...l}=t,{portalNode:c,portalSubtree:p}=Dc({container:o,ref:n,componentProps:t,elementProps:l}),d=u.useRef(null),b=u.useRef(null),h=u.useRef(null),m=u.useRef(null),[R,C]=u.useState(null),y=R==null?void 0:R.modal,f=R==null?void 0:R.open,E=typeof a=="boolean"?a:!!R&&!R.modal&&R.open&&!!c;u.useEffect(()=>{if(!c||y)return;function P(M){c&&M.relatedTarget&&sn(M)&&(M.type==="focusin"?zr:vc)(c)}return c.addEventListener("focusin",P,!0),c.addEventListener("focusout",P,!0),()=>{c.removeEventListener("focusin",P,!0),c.removeEventListener("focusout",P,!0)}},[c,y]),u.useEffect(()=>{!c||f||zr(c)},[f,c]);const x=u.useMemo(()=>({beforeOutsideRef:d,afterOutsideRef:b,beforeInsideRef:h,afterInsideRef:m,portalNode:c,setFocusManagerState:C}),[c]);return Q.jsxs(u.Fragment,{children:[p,Q.jsxs(Yo.Provider,{value:x,children:[E&&c&&Q.jsx(Nn,{"data-type":"outside",ref:d,onFocus:P=>{var M;if(sn(P,c))(M=h.current)==null||M.focus();else{const T=R?R.domReference:null,S=Wo(T);S==null||S.focus()}}}),E&&c&&Q.jsx("span",{"aria-owns":c.id,style:Oi}),c&&Wt.createPortal(r,c),E&&c&&Q.jsx(Nn,{"data-type":"outside",ref:b,onFocus:P=>{var M;if(sn(P,c))(M=m.current)==null||M.focus();else{const T=R?R.domReference:null,S=Uo(T);S==null||S.focus(),R!=null&&R.closeOnFocusOut&&(R==null||R.onOpenChange(!1,se(Bn,P.nativeEvent)))}}})]})]})});function jc(e,t){const n=jn(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Zr=20;let xt=[];function Sr(){xt=xt.filter(e=>e.isConnected)}function Bc(e){Sr(),e&&lo(e)!=="body"&&(xt.push(e),xt.length>Zr&&(xt=xt.slice(-Zr)))}function ir(){return Sr(),xt[xt.length-1]}function Hc(e){if(!e)return null;const t=dn();return qo(e,t)?e:Hn(e,t)[0]||e}function $c(e){return!e||!e.isConnected?!1:typeof e.checkVisibility=="function"?e.checkVisibility():ao(e).display!=="none"}function eo(e,t){var i;if(!t.current.includes("floating")&&!((i=e.getAttribute("role"))!=null&&i.includes("dialog")))return;const n=dn(),o=yc(e,n).filter(a=>{const l=a.getAttribute("data-tabindex")||"";return qo(a,n)||a.hasAttribute("data-tabindex")&&!l.startsWith("-")}),s=e.getAttribute("tabindex");t.current.includes("floating")||o.length===0?s!=="0"&&e.setAttribute("tabindex","0"):(s!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function qc(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],initialFocus:s=!0,returnFocus:i=!0,restoreFocus:a=!1,modal:l=!0,closeOnFocusOut:c=!0,openInteractionType:p="",getInsideElements:d=()=>[],nextFocusableElement:b,previousFocusableElement:h,beforeContentFocusGuardRef:m,externalTree:R}=e,C="rootStore"in t?t.rootStore:t,y=C.useState("open"),f=C.useState("domReferenceElement"),E=C.useState("floatingElement"),{events:x,dataRef:P}=C.context,M=_(()=>{var w;return(w=P.current.floatingContext)==null?void 0:w.nodeId}),T=_(d),S=s===!1,W=dr(f)&&S,X=ze(o),ce=ze(s),ve=ze(i),ae=ze(p),ue=$n(R),v=Xo(),ee=u.useRef(null),fe=u.useRef(null),$=u.useRef(!1),ie=u.useRef(!1),q=u.useRef(!1),me=u.useRef(-1),Re=u.useRef(""),Z=u.useRef(""),le=u.useRef(null),de=u.useRef(null),Ue=cn(le,m,v==null?void 0:v.beforeInsideRef),Te=cn(de,v==null?void 0:v.afterInsideRef),Ne=ln(),Ee=ln(),Ae=Er(),je=v!=null,g=pr(E),j=_((w=g)=>w?Hn(w,dn()):[]),I=_(w=>{const F=j(w);return X.current.map(()=>F).filter(Boolean).flat()});u.useEffect(()=>{if(r||!l)return;function w(D){D.key==="Tab"&&Oe(g,vt(qe(g)))&&j().length===0&&!W&&Ve(D)}const F=qe(g);return F.addEventListener("keydown",w),()=>{F.removeEventListener("keydown",w)}},[r,f,g,l,X,W,j,I]),u.useEffect(()=>{if(r||!E)return;function w(F){const D=Ge(F),te=j().indexOf(D);te!==-1&&(me.current=te)}return E.addEventListener("focusin",w),()=>{E.removeEventListener("focusin",w)}},[r,E,j]),u.useEffect(()=>{if(r||!y)return;const w=qe(g);function F(){q.current=!1}function D(te){const N=Ge(te),G=Oe(E,N)||Oe(f,N)||Oe(v==null?void 0:v.portalNode,N);q.current=!G,Z.current=te.pointerType||"keyboard"}function H(){Z.current="keyboard"}return w.addEventListener("pointerdown",D,!0),w.addEventListener("pointerup",F,!0),w.addEventListener("pointercancel",F,!0),w.addEventListener("keydown",H,!0),()=>{w.removeEventListener("pointerdown",D,!0),w.removeEventListener("pointerup",F,!0),w.removeEventListener("pointercancel",F,!0),w.removeEventListener("keydown",H,!0)}},[r,E,f,g,y,v]),u.useEffect(()=>{if(r||!c)return;function w(){ie.current=!0,Ee.start(0,()=>{ie.current=!1})}function F(N){const G=N.relatedTarget,O=N.currentTarget,B=Ge(N);queueMicrotask(()=>{const A=M(),ne=C.context.triggerElements,ge=(G==null?void 0:G.hasAttribute(Dn("focus-guard")))&&[le.current,de.current,v==null?void 0:v.beforeInsideRef.current,v==null?void 0:v.afterInsideRef.current,v==null?void 0:v.beforeOutsideRef.current,v==null?void 0:v.afterOutsideRef.current,ht(h),ht(b)].includes(G),be=!(Oe(f,G)||Oe(E,G)||Oe(G,E)||Oe(v==null?void 0:v.portalNode,G)||G!=null&&ne.hasElement(G)||ne.hasMatchingElement(xe=>Oe(xe,G))||ge||ue&&(Bt(ue.nodesRef.current,A).find(xe=>{var ye,pe;return Oe((ye=xe.context)==null?void 0:ye.elements.floating,G)||Oe((pe=xe.context)==null?void 0:pe.elements.domReference,G)})||Kr(ue.nodesRef.current,A).find(xe=>{var ye,pe,he;return[(ye=xe.context)==null?void 0:ye.elements.floating,pr((pe=xe.context)==null?void 0:pe.elements.floating)].includes(G)||((he=xe.context)==null?void 0:he.elements.domReference)===G})));if(O===f&&g&&eo(g,X),a&&O!==f&&!$c(B)&&vt(qe(g))===qe(g).body){if(at(g)&&(g.focus(),a==="popup")){Ae.request(()=>{g.focus()});return}const xe=me.current,ye=j(),pe=ye[xe]||ye[ye.length-1]||g;at(pe)&&pe.focus()}if(P.current.insideReactTree){P.current.insideReactTree=!1;return}(W||!l)&&G&&be&&!ie.current&&(W||G!==ir())&&($.current=!0,C.setOpen(!1,se(Bn,N)))})}function D(){q.current||(P.current.insideReactTree=!0,Ne.start(0,()=>{P.current.insideReactTree=!1}))}const H=at(f)?f:null,te=[];if(!(!E&&!H))return H&&(H.addEventListener("focusout",F),H.addEventListener("pointerdown",w),te.push(()=>{H.removeEventListener("focusout",F),H.removeEventListener("pointerdown",w)})),E&&(E.addEventListener("focusout",F),v&&(E.addEventListener("focusout",D,!0),te.push(()=>{E.removeEventListener("focusout",D,!0)})),te.push(()=>{E.removeEventListener("focusout",F)})),()=>{te.forEach(N=>{N()})}},[r,f,E,g,l,ue,v,C,c,a,j,W,M,X,P,Ne,Ee,Ae,b,h]),u.useEffect(()=>{var N,G,O;if(r||!E||!y)return;const w=Array.from(((N=v==null?void 0:v.portalNode)==null?void 0:N.querySelectorAll(`[${Dn("portal")}]`))||[]),D=(O=(G=(ue?Kr(ue.nodesRef.current,M()):[]).find(B=>{var A;return dr(((A=B.context)==null?void 0:A.elements.domReference)||null)}))==null?void 0:G.context)==null?void 0:O.elements.domReference,H=[E,D,...w,...T(),ee.current,fe.current,le.current,de.current,v==null?void 0:v.beforeOutsideRef.current,v==null?void 0:v.afterOutsideRef.current,ht(h),ht(b),W?f:null].filter(B=>B!=null),te=Lc(H,l||W);return()=>{te()}},[y,r,f,E,l,X,v,W,ue,M,T,b,h]),Y(()=>{if(!y||r||!at(g))return;const w=qe(g),F=vt(w);queueMicrotask(()=>{const D=I(g),H=ce.current,te=typeof H=="function"?H(ae.current||""):H;if(te===void 0||te===!1)return;let N;te===!0||te===null?N=D[0]||g:N=ht(te),N=N||D[0]||g,!Oe(g,F)&&An(N,{preventScroll:N===g})})},[r,y,g,S,I,ce,ae]),Y(()=>{if(r||!g)return;const w=qe(g),F=vt(w);Bc(F);function D(N){if(N.open||(Re.current=jc(N.nativeEvent,Z.current)),N.reason===Mi&&N.nativeEvent.type==="mouseleave"&&($.current=!0),N.reason===vr)if(N.nested)$.current=!1;else if(Vo(N.nativeEvent)||Lo(N.nativeEvent))$.current=!1;else{let G=!1;document.createElement("div").focus({get preventScroll(){return G=!0,!1}}),G?$.current=!1:$.current=!0}}x.on("openchange",D);const H=w.createElement("span");H.setAttribute("tabindex","-1"),H.setAttribute("aria-hidden","true"),Object.assign(H.style,wr),je&&f&&f.insertAdjacentElement("afterend",H);function te(){const N=ve.current;let G=typeof N=="function"?N(Re.current):N;if(G===void 0||G===!1)return null;if(G===null&&(G=!0),typeof G=="boolean"){const B=f||ir();return B&&B.isConnected?B:H}const O=f||ir()||H;return ht(G)||O}return()=>{x.off("openchange",D);const N=vt(w),G=Oe(E,N)||ue&&Bt(ue.nodesRef.current,M(),!1).some(B=>{var A;return Oe((A=B.context)==null?void 0:A.elements.floating,N)}),O=te();queueMicrotask(()=>{const B=Hc(O),A=typeof ve.current!="boolean";ve.current&&!$.current&&at(B)&&(!(!A&&B!==N&&N!==w.body)||G)&&B.focus({preventScroll:!0}),H.remove()})}},[r,E,g,ve,P,x,ue,je,f,M]),u.useEffect(()=>{queueMicrotask(()=>{$.current=!1})},[r]),u.useEffect(()=>{if(r||!y)return;function w(D){const H=Ge(D);H!=null&&H.closest(`[${Si}]`)&&(ie.current=!0)}const F=qe(g);return F.addEventListener("pointerdown",w,!0),()=>{F.removeEventListener("pointerdown",w,!0)}},[r,y,g]),Y(()=>{if(!r&&v)return v.setFocusManagerState({modal:l,closeOnFocusOut:c,open:y,onOpenChange:C.setOpen,domReference:f}),()=>{v.setFocusManagerState(null)}},[r,v,l,y,C,c,f]),Y(()=>{if(!(r||!g))return eo(g,X),()=>{queueMicrotask(Sr)}},[r,g,X]);const z=!r&&(l?!W:!0)&&(je||l);return Q.jsxs(u.Fragment,{children:[z&&Q.jsx(Nn,{"data-type":"inside",ref:Ue,onFocus:w=>{var F;if(l){const D=I();An(D[D.length-1])}else if(v!=null&&v.portalNode)if($.current=!1,sn(w,v.portalNode)){const D=Uo(f);D==null||D.focus()}else(F=ht(h??v.beforeOutsideRef))==null||F.focus()}}),n,z&&Q.jsx(Nn,{"data-type":"inside",ref:Te,onFocus:w=>{var F;if(l)An(I()[0]);else if(v!=null&&v.portalNode)if(c&&($.current=!0),sn(w,v.portalNode)){const D=Wo(f);D==null||D.focus()}else(F=ht(b??v.afterOutsideRef))==null||F.focus()}})]})}function Kc(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,{enabled:o=!0,event:s="click",toggle:i=!0,ignoreMouse:a=!1,stickIfOpen:l=!0,touchOpenDelay:c=0}=t,p=u.useRef(void 0),d=Er(),b=ln(),h=u.useMemo(()=>({onPointerDown(m){p.current=m.pointerType},onMouseDown(m){const R=p.current,C=m.nativeEvent,y=n.select("open");if(m.button!==0||s==="click"||Ur(R)&&a)return;const f=r.current.openEvent,E=f==null?void 0:f.type,x=n.select("domReferenceElement")!==m.currentTarget,P=y&&x||!(y&&i&&(!(f&&l)||E==="click"||E==="mousedown"));if(Mo(C.target)){const T=se(nn,C,C.target);P&&R==="touch"&&c>0?b.start(c,()=>{n.setOpen(!0,T)}):n.setOpen(P,T);return}const M=m.currentTarget;d.request(()=>{const T=se(nn,C,M);P&&R==="touch"&&c>0?b.start(c,()=>{n.setOpen(!0,T)}):n.setOpen(P,T)})},onClick(m){if(s==="mousedown-only")return;const R=p.current;if(s==="mousedown"&&R){p.current=void 0;return}if(Ur(R)&&a)return;const C=n.select("open"),y=r.current.openEvent,f=n.select("domReferenceElement")!==m.currentTarget,E=C&&f||!(C&&i&&(!(y&&l)||Fo(y))),x=se(nn,m.nativeEvent,m.currentTarget);E&&R==="touch"&&c>0?b.start(c,()=>{n.setOpen(!0,x)}):n.setOpen(E,x)},onKeyDown(){p.current=void 0}}),[r,s,a,n,l,i,d,b,c]);return u.useMemo(()=>o?{reference:h}:Ke,[o,h])}const Uc={intentional:"onClick",sloppy:"onPointerDown"};function Wc(e){return{escapeKey:typeof e=="boolean"?e:(e==null?void 0:e.escapeKey)??!1,outsidePress:typeof e=="boolean"?e:(e==null?void 0:e.outsidePress)??!0}}function Gc(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),o=n.useState("floatingElement"),s=n.useState("referenceElement"),i=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:l}=n.context,{enabled:c=!0,escapeKey:p=!0,outsidePress:d=!0,outsidePressEvent:b="sloppy",referencePress:h=!1,referencePressEvent:m="sloppy",ancestorScroll:R=!1,bubbles:C,externalTree:y}=t,f=$n(y),E=_(typeof d=="function"?d:()=>!1),x=typeof d=="function"?E:d,P=u.useRef(!1),{escapeKey:M,outsidePress:T}=Wc(C),S=u.useRef(null),W=ln(),X=ln(),ce=_(()=>{X.clear(),l.current.insideReactTree=!1}),ve=u.useRef(!1),ae=u.useRef(""),ue=_(g=>{ae.current=g.pointerType}),v=_(()=>{const g=ae.current,j=g==="pen"||!g?"mouse":g,I=typeof b=="function"?b():b;return typeof I=="string"?I:I[j]}),ee=_(g=>{var F;if(!r||!c||!p||g.key!=="Escape"||ve.current)return;const j=(F=l.current.floatingContext)==null?void 0:F.nodeId,I=f?Bt(f.nodesRef.current,j):[];if(!M&&I.length>0){let D=!0;if(I.forEach(H=>{var te;(te=H.context)!=null&&te.open&&!H.context.dataRef.current.__escapeKeyBubbles&&(D=!1)}),!D)return}const z=Zi(g)?g.nativeEvent:g,w=se(xo,z);n.setOpen(!1,w),!M&&!w.isPropagationAllowed&&g.stopPropagation()}),fe=_(g=>{const j=v();return j==="intentional"&&g.type!=="click"||j==="sloppy"&&g.type==="click"}),$=_(()=>{l.current.insideReactTree=!0,X.start(0,ce)}),ie=_((g,j=!1)=>{var G;if(fe(g)){ce();return}if(l.current.insideReactTree){ce();return}if(v()==="intentional"&&j||typeof x=="function"&&!x(g))return;const I=Ge(g),z=`[${Dn("inert")}]`,w=qe(n.select("floatingElement")).querySelectorAll(z),F=n.context.triggerElements;if(I&&(F.hasElement(I)||F.hasMatchingElement(O=>Oe(O,I))))return;let D=Je(I)?I:null;for(;D&&!Zn(D);){const O=Us(D);if(Zn(O)||!Je(O))break;D=O}if(w.length&&Je(I)&&!Ji(I)&&!Oe(I,n.select("floatingElement"))&&Array.from(w).every(O=>!Oe(D,O)))return;if(at(I)&&!("touches"in g)){const O=Zn(I),B=ao(I),A=/auto|scroll/,ne=O||A.test(B.overflowX),ge=O||A.test(B.overflowY),be=ne&&I.clientWidth>0&&I.scrollWidth>I.clientWidth,xe=ge&&I.clientHeight>0&&I.scrollHeight>I.clientHeight,ye=B.direction==="rtl",pe=xe&&(ye?g.offsetX<=I.offsetWidth-I.clientWidth:g.offsetX>I.clientWidth),he=be&&g.offsetY>I.clientHeight;if(pe||he)return}const H=(G=l.current.floatingContext)==null?void 0:G.nodeId,te=f&&Bt(f.nodesRef.current,H).some(O=>{var B;return rt(g,(B=O.context)==null?void 0:B.elements.floating)});if(rt(g,n.select("floatingElement"))||rt(g,n.select("domReferenceElement"))||te)return;const N=f?Bt(f.nodesRef.current,H):[];if(N.length>0){let O=!0;if(N.forEach(B=>{var A;(A=B.context)!=null&&A.open&&!B.context.dataRef.current.__outsidePressBubbles&&(O=!1)}),!O)return}n.setOpen(!1,se(vr,g)),ce()}),q=_(g=>{v()!=="sloppy"||g.pointerType==="touch"||!n.select("open")||!c||rt(g,n.select("floatingElement"))||rt(g,n.select("domReferenceElement"))||ie(g)}),me=_(g=>{if(v()!=="sloppy"||!n.select("open")||!c||rt(g,n.select("floatingElement"))||rt(g,n.select("domReferenceElement")))return;const j=g.touches[0];j&&(S.current={startTime:Date.now(),startX:j.clientX,startY:j.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},W.start(1e3,()=>{S.current&&(S.current.dismissOnTouchEnd=!1,S.current.dismissOnMouseDown=!1)}))}),Re=_(g=>{const j=Ge(g);function I(){me(g),j==null||j.removeEventListener(g.type,I)}j==null||j.addEventListener(g.type,I)}),Z=_(g=>{const j=P.current;if(P.current=!1,W.clear(),g.type==="mousedown"&&S.current&&!S.current.dismissOnMouseDown)return;const I=Ge(g);function z(){g.type==="pointerdown"?q(g):ie(g,j),I==null||I.removeEventListener(g.type,z)}I==null||I.addEventListener(g.type,z)}),le=_(g=>{if(v()!=="sloppy"||!S.current||rt(g,n.select("floatingElement"))||rt(g,n.select("domReferenceElement")))return;const j=g.touches[0];if(!j)return;const I=Math.abs(j.clientX-S.current.startX),z=Math.abs(j.clientY-S.current.startY),w=Math.sqrt(I*I+z*z);w>5&&(S.current.dismissOnTouchEnd=!0),w>10&&(ie(g),W.clear(),S.current=null)}),de=_(g=>{const j=Ge(g);function I(){le(g),j==null||j.removeEventListener(g.type,I)}j==null||j.addEventListener(g.type,I)}),Ue=_(g=>{v()!=="sloppy"||!S.current||rt(g,n.select("floatingElement"))||rt(g,n.select("domReferenceElement"))||(S.current.dismissOnTouchEnd&&ie(g),W.clear(),S.current=null)}),Te=_(g=>{const j=Ge(g);function I(){Ue(g),j==null||j.removeEventListener(g.type,I)}j==null||j.addEventListener(g.type,I)});u.useEffect(()=>{if(!r||!c)return;l.current.__escapeKeyBubbles=M,l.current.__outsidePressBubbles=T;const g=new Kt;function j(D){n.setOpen(!1,se(Qe,D))}function I(){g.clear(),ve.current=!0}function z(){g.start(Ws()?5:0,()=>{ve.current=!1})}const w=qe(o);w.addEventListener("pointerdown",ue,!0),p&&(w.addEventListener("keydown",ee),w.addEventListener("compositionstart",I),w.addEventListener("compositionend",z)),x&&(w.addEventListener("click",Z,!0),w.addEventListener("pointerdown",Z,!0),w.addEventListener("touchstart",Re,!0),w.addEventListener("touchmove",de,!0),w.addEventListener("touchend",Te,!0),w.addEventListener("mousedown",Z,!0));let F=[];return R&&(Je(i)&&(F=er(i)),Je(o)&&(F=F.concat(er(o))),!Je(s)&&s&&s.contextElement&&(F=F.concat(er(s.contextElement)))),F=F.filter(D=>{var H;return D!==((H=w.defaultView)==null?void 0:H.visualViewport)}),F.forEach(D=>{D.addEventListener("scroll",j,{passive:!0})}),()=>{w.removeEventListener("pointerdown",ue,!0),p&&(w.removeEventListener("keydown",ee),w.removeEventListener("compositionstart",I),w.removeEventListener("compositionend",z)),x&&(w.removeEventListener("click",Z,!0),w.removeEventListener("pointerdown",Z,!0),w.removeEventListener("touchstart",Re,!0),w.removeEventListener("touchmove",de,!0),w.removeEventListener("touchend",Te,!0),w.removeEventListener("mousedown",Z,!0)),F.forEach(D=>{D.removeEventListener("scroll",j)}),g.clear(),P.current=!1}},[l,o,s,i,p,x,r,a,R,c,M,T,ee,ie,Z,q,Re,de,Te,ue,n]),u.useEffect(ce,[x,ce]);const Ne=u.useMemo(()=>({onKeyDown:ee,...h&&{[Uc[m]]:g=>{n.setOpen(!1,se(nn,g.nativeEvent))},...m!=="intentional"&&{onClick(g){n.setOpen(!1,se(nn,g.nativeEvent))}}}}),[ee,n,h,m]),Ee=_(g=>{const j=Ge(g.nativeEvent);!Oe(n.select("floatingElement"),j)||g.button!==0||(P.current=!0)}),Ae=_(g=>{!r||!c||g.button!==0||(P.current=!0)}),je=u.useMemo(()=>({onKeyDown:ee,onPointerDown:Ee,onMouseDown:Ee,onMouseUp:Ee,onClickCapture:$,onMouseDownCapture(g){$(),Ae(g)},onPointerDownCapture(g){$(),Ae(g)},onMouseUpCapture:$,onTouchEndCapture:$,onTouchMoveCapture:$}),[ee,Ee,$,Ae]);return u.useMemo(()=>c?{reference:Ne,floating:je,trigger:Ne}:{},[c,Ne,je])}js({memoize:Bs,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const K=(e,t,n,r,o,s,...i)=>{if(i.length>0)throw new Error(st(1));let a;if(e&&t&&n&&r&&o&&s)a=(l,c,p,d)=>{const b=e(l,c,p,d),h=t(l,c,p,d),m=n(l,c,p,d),R=r(l,c,p,d),C=o(l,c,p,d);return s(b,h,m,R,C,c,p,d)};else if(e&&t&&n&&r&&o)a=(l,c,p,d)=>{const b=e(l,c,p,d),h=t(l,c,p,d),m=n(l,c,p,d),R=r(l,c,p,d);return o(b,h,m,R,c,p,d)};else if(e&&t&&n&&r)a=(l,c,p,d)=>{const b=e(l,c,p,d),h=t(l,c,p,d),m=n(l,c,p,d);return r(b,h,m,c,p,d)};else if(e&&t&&n)a=(l,c,p,d)=>{const b=e(l,c,p,d),h=t(l,c,p,d);return n(b,h,c,p,d)};else if(e&&t)a=(l,c,p,d)=>{const b=e(l,c,p,d);return t(b,c,p,d)};else if(e)a=e;else throw new Error("Missing arguments");return a};var zc=Hs();const _c=yr(19),Yc=_c?Xc:Qc;function V(e,t,n,r,o){return Yc(e,t,n,r,o)}function Xc(e,t,n,r,o){const s=u.useCallback(()=>t(e.getSnapshot(),n,r,o),[e,t,n,r,o]);return zc.useSyncExternalStore(e.subscribe,s,s)}function Qc(e,t,n,r,o){return $s.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,s=>t(s,n,r,o))}class $t{constructor(t){Pe(this,"subscribe",t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}));Pe(this,"getSnapshot",()=>this.state);this.state=t,this.listeners=new Set,this.updateTick=0}setState(t){if(this.state===t)return;this.state=t,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){$t.prototype.setState.call(this,{...this.state,...t});return}}set(t,n){Object.is(this.state[t],n)||$t.prototype.setState.call(this,{...this.state,[t]:n})}notifyAll(){const t={...this.state};$t.prototype.setState.call(this,t)}}class Jc extends $t{constructor(n,r={},o){super(n);Pe(this,"controlledValues",new Map);Pe(this,"select",(n,r,o,s)=>{const i=this.selectors[n];return i(this.state,r,o,s)});Pe(this,"useState",(n,r,o,s)=>{u.useDebugValue(n);const i=this.selectors[n];return V(this,i,r,o,s)});this.context=r,this.selectors=o}useSyncedValue(n,r){u.useDebugValue(n),Y(()=>{this.state[n]!==r&&this.set(n,r)},[n,r])}useSyncedValueWithCleanup(n,r){const o=this;Y(()=>(o.state[n]!==r&&o.set(n,r),()=>{o.set(n,void 0)}),[o,n,r])}useSyncedValues(n){const r=this,o=Object.values(n);Y(()=>{r.update(n)},[r,...o])}useControlledProp(n,r,o){u.useDebugValue(n);const s=this,i=r!==void 0;this.controlledValues.has(n)||(this.controlledValues.set(n,i),!i&&!Object.is(this.state[n],o)&&super.setState({...this.state,[n]:o})),Y(()=>{i&&!Object.is(s.state[n],r)&&super.setState({...s.state,[n]:r})},[s,n,r,o,i])}set(n,r){this.controlledValues.get(n)!==!0&&super.set(n,r)}update(n){const r={...n};for(const o in r)if(Object.hasOwn(r,o)&&this.controlledValues.get(o)===!0){delete r[o];continue}super.update(r)}setState(n){const r={...n};for(const o in r)if(Object.hasOwn(r,o)&&this.controlledValues.get(o)===!0){delete r[o];continue}super.setState({...this.state,...r})}useContextCallback(n,r){u.useDebugValue(n);const o=_(r??Me);this.context[n]=o}useStateSetter(n){const r=u.useRef(void 0);return r.current===void 0&&(r.current=o=>{this.set(n,o)}),r.current}observe(n,r){let o;typeof n=="function"?o=n:o=this.selectors[n];let s=o(this.state);return r(s,s,this),this.subscribe(i=>{const a=o(i);if(!Object.is(s,a)){const l=s;s=a,r(a,l,this)}})}}const Zc={open:K(e=>e.open),domReferenceElement:K(e=>e.domReferenceElement),referenceElement:K(e=>e.positionReference??e.referenceElement),floatingElement:K(e=>e.floatingElement),floatingId:K(e=>e.floatingId)};class eu extends Jc{constructor(n){const{nested:r,noEmit:o,onOpenChange:s,triggerElements:i,...a}=n;super({...a,positionReference:a.referenceElement,domReferenceElement:a.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:Oc(),nested:r,noEmit:o,triggerElements:i},Zc);Pe(this,"setOpen",(n,r)=>{var o,s;if((!n||!this.state.open||Fo(r.event))&&(this.context.dataRef.current.openEvent=n?r.event:void 0),!this.context.noEmit){const i={open:n,reason:r.reason,nativeEvent:r.event,nested:this.context.nested,triggerElement:r.trigger};this.context.events.emit("openchange",i)}(s=(o=this.context).onOpenChange)==null||s.call(o,n,r)})}}class tu{constructor(){this.elements=new Set,this.idMap=new Map}add(t,n){const r=this.idMap.get(t);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(t,n))}delete(t){const n=this.idMap.get(t);n&&(this.elements.delete(n),this.idMap.delete(t))}hasElement(t){return this.elements.has(t)}hasMatchingElement(t){for(const n of this.elements)if(t(n))return!0;return!1}getById(t){return this.idMap.get(t)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function Qo(e){const{open:t=!1,onOpenChange:n,elements:r={}}=e,o=xr(),s=Go()!=null,i=ot(()=>new eu({open:t,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new tu,floatingId:o,nested:s,noEmit:e.noEmit||!1})).current;return Y(()=>{const a={open:t,floatingId:o};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=Je(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),i.update(a)},[t,o,r.reference,r.floating,i]),i.context.onOpenChange=n,i.context.nested=s,i.context.noEmit=e.noEmit||!1,i}function nu(e={}){const{nodeId:t,externalTree:n}=e,r=Qo(e),o=e.rootContext||r,s={reference:o.useState("referenceElement"),floating:o.useState("floatingElement"),domReference:o.useState("domReferenceElement")},[i,a]=u.useState(null),l=u.useRef(null),c=$n(n);Y(()=>{s.domReference&&(l.current=s.domReference)},[s.domReference]);const p=Qs({...e,elements:{...s,...i&&{reference:i}}}),d=u.useCallback(T=>{const S=Je(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),getClientRects:()=>T.getClientRects(),contextElement:T}:T;a(S),p.refs.setReference(S)},[p.refs]),[b,h]=u.useState(null),[m,R]=u.useState(null);o.useSyncedValue("referenceElement",b),o.useSyncedValue("domReferenceElement",Je(b)?b:null),o.useSyncedValue("floatingElement",m);const C=u.useCallback(T=>{(Je(T)||T===null)&&(l.current=T,h(T)),(Je(p.refs.reference.current)||p.refs.reference.current===null||T!==null&&!Je(T))&&p.refs.setReference(T)},[p.refs,h]),y=u.useCallback(T=>{R(T),p.refs.setFloating(T)},[p.refs]),f=u.useMemo(()=>({...p.refs,setReference:C,setFloating:y,setPositionReference:d,domReference:l}),[p.refs,C,y,d]),E=u.useMemo(()=>({...p.elements,domReference:s.domReference}),[p.elements,s.domReference]),x=o.useState("open"),P=o.useState("floatingId"),M=u.useMemo(()=>({...p,dataRef:o.context.dataRef,open:x,onOpenChange:o.setOpen,events:o.context.events,floatingId:P,refs:f,elements:E,nodeId:t,rootStore:o}),[p,f,E,t,o,x,P]);return Y(()=>{o.context.dataRef.current.floatingContext=M;const T=c==null?void 0:c.nodesRef.current.find(S=>S.id===t);T&&(T.context=M)}),u.useMemo(()=>({...p,context:M,refs:f,elements:E,rootStore:o}),[p,f,E,M,o])}function ru(e=[]){const t=e.map(c=>c==null?void 0:c.reference),n=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),o=e.map(c=>c==null?void 0:c.trigger),s=u.useCallback(c=>Rn(c,e,"reference"),t),i=u.useCallback(c=>Rn(c,e,"floating"),n),a=u.useCallback(c=>Rn(c,e,"item"),r),l=u.useCallback(c=>Rn(c,e,"trigger"),o);return u.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:a,getTriggerProps:l}),[s,i,a,l])}function Rn(e,t,n){var i;const r=new Map,o=n==="item",s={};n==="floating"&&(s.tabIndex=-1,s[fr]="");for(const a in e)o&&e&&(a===Ao||a===ko)||(s[a]=e[a]);for(let a=0;a<t.length;a+=1){let l;const c=(i=t[a])==null?void 0:i[n];typeof c=="function"?l=e?c(e):null:l=c,l&&to(s,l,o,r)}return to(s,e,o,r),s}function to(e,t,n,r){var o;for(const s in t){const i=t[s];n&&(s===Ao||s===ko)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof i=="function"&&((o=r.get(s))==null||o.push(i),e[s]=(...a)=>{var l;return(l=r.get(s))==null?void 0:l.map(c=>c(...a)).find(c=>c!==void 0)})):e[s]=i)}}const ou="Escape";function qn(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Cn(e,t){return qn(t,e===Rr||e===fn,e===Et||e===It)}function cr(e,t,n){return qn(t,e===fn,n?e===Et:e===It)||e==="Enter"||e===" "||e===""}function su(e,t,n){return qn(t,n?e===Et:e===It,e===fn)}function iu(e,t,n,r){const o=n?e===It:e===Et,s=e===Rr;return t==="both"||t==="horizontal"&&r&&r>1?e===ou:qn(t,o,s)}function cu(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),o=n.useState("floatingElement"),s=n.useState("domReferenceElement"),i=n.context.dataRef,{listRef:a,activeIndex:l,onNavigate:c=()=>{},enabled:p=!0,selectedIndex:d=null,allowEscape:b=!1,loopFocus:h=!1,nested:m=!1,rtl:R=!1,virtual:C=!1,focusItemOnOpen:y="auto",focusItemOnHover:f=!0,openOnArrowKeyDown:E=!0,disabledIndices:x=void 0,orientation:P="vertical",parentOrientation:M,cols:T=1,scrollItemIntoView:S=!0,itemSizes:W,dense:X=!1,id:ce,resetOnPointerLeave:ve=!0,externalTree:ae}=t,ue=pr(o),v=ze(ue),ee=Go(),fe=$n(ae);Y(()=>{i.current.orientation=P},[i,P]);const $=dr(s),ie=u.useRef(y),q=u.useRef(d??-1),me=u.useRef(null),Re=u.useRef(!0),Z=_(O=>{c(q.current===-1?null:q.current,O)}),le=u.useRef(Z),de=u.useRef(!!o),Ue=u.useRef(r),Te=u.useRef(!1),Ne=u.useRef(!1),Ee=ze(x),Ae=ze(r),je=ze(S),g=ze(d),j=ze(ve),I=_(()=>{function O(ge){C?fe==null||fe.events.emit("virtualfocus",ge):An(ge,{sync:Te.current,preventScroll:!0})}const B=a.current[q.current],A=Ne.current;B&&O(B),(Te.current?ge=>ge():requestAnimationFrame)(()=>{var ye;const ge=a.current[q.current]||B;if(!ge)return;B||O(ge);const be=je.current;be&&w&&(A||!Re.current)&&((ye=ge.scrollIntoView)==null||ye.call(ge,typeof be=="boolean"?{block:"nearest",inline:"nearest"}:be))})});Y(()=>{p&&(r&&o?(q.current=d??-1,ie.current&&d!=null&&(Ne.current=!0,Z())):de.current&&(q.current=-1,le.current()))},[p,r,o,d,Z]),Y(()=>{if(p){if(!r){Te.current=!1;return}if(o)if(l==null){if(Te.current=!1,g.current!=null)return;if(de.current&&(q.current=-1,I()),(!Ue.current||!de.current)&&ie.current&&(me.current!=null||ie.current===!0&&me.current==null)){let O=0;const B=()=>{a.current[0]==null?(O<2&&(O?requestAnimationFrame:queueMicrotask)(B),O+=1):(q.current=me.current==null||cr(me.current,P,R)||m?or(a):Wr(a),me.current=null,Z())};B()}}else rn(a,l)||(q.current=l,I(),Ne.current=!1)}},[p,r,o,l,g,m,a,P,R,Z,I,Ee]),Y(()=>{var ge,be;if(!p||o||!fe||C||!de.current)return;const O=fe.nodesRef.current,B=(be=(ge=O.find(xe=>xe.id===ee))==null?void 0:ge.context)==null?void 0:be.elements.floating,A=vt(qe(o)),ne=O.some(xe=>xe.context&&Oe(xe.context.elements.floating,A));B&&!ne&&Re.current&&B.focus({preventScroll:!0})},[p,o,fe,ee,C]),Y(()=>{le.current=Z,Ue.current=r,de.current=!!o}),Y(()=>{r||(me.current=null,ie.current=y)},[r,y]);const z=l!=null,w=u.useMemo(()=>{function O(A){if(!Ae.current)return;const ne=a.current.indexOf(A.currentTarget);ne!==-1&&q.current!==ne&&(q.current=ne,Z(A))}return{onFocus(A){Te.current=!0,O(A)},onClick:({currentTarget:A})=>A.focus({preventScroll:!0}),onMouseMove(A){Te.current=!0,Ne.current=!1,f&&O(A)},onPointerLeave(A){var ge;if(!Ae.current||!Re.current||A.pointerType==="touch")return;Te.current=!0;const ne=A.relatedTarget;!f||a.current.includes(ne)||j.current&&(q.current=-1,Z(A),C||(ge=v.current)==null||ge.focus({preventScroll:!0}))}}},[Ae,v,f,a,Z,j,C]),F=u.useCallback(()=>{var O,B,A;return M??((A=(B=(O=fe==null?void 0:fe.nodesRef.current.find(ne=>ne.id===ee))==null?void 0:O.context)==null?void 0:B.dataRef)==null?void 0:A.current.orientation)},[ee,fe,M]),D=_(O=>{if(Re.current=!1,Te.current=!0,O.which===229||!Ae.current&&O.currentTarget===v.current)return;if(m&&iu(O.key,P,R,T)){Cn(O.key,F())||Ve(O),n.setOpen(!1,se(Tn,O.nativeEvent)),at(s)&&(C?fe==null||fe.events.emit("virtualfocus",s):s.focus());return}const B=q.current,A=or(a,x),ne=Wr(a,x);if($||(O.key==="Home"&&(Ve(O),q.current=A,Z(O)),O.key==="End"&&(Ve(O),q.current=ne,Z(O))),T>1){const ge=W||Array.from({length:a.current.length},()=>({width:1,height:1})),be=tc(ge,T,X),xe=be.findIndex(he=>he!=null&&!on(a,he,x)),ye=be.reduce((he,Fe,nt)=>Fe!=null&&!on(a,Fe,x)?nt:he,-1),pe=be[ec({current:be.map(he=>he!=null?a.current[he]:null)},{event:O,orientation:P,loopFocus:h,rtl:R,cols:T,disabledIndices:rc([...(typeof x!="function"?x:null)||a.current.map((he,Fe)=>on(a,Fe,x)?Fe:void 0),void 0],be),minIndex:xe,maxIndex:ye,prevIndex:nc(q.current>ne?A:q.current,ge,be,T,O.key===fn?"bl":O.key===(R?Et:It)?"tr":"tl"),stopEvent:!0})];if(pe!=null&&(q.current=pe,Z(O)),P==="both")return}if(Cn(O.key,P)){if(Ve(O),r&&!C&&vt(O.currentTarget.ownerDocument)===O.currentTarget){q.current=cr(O.key,P,R)?A:ne,Z(O);return}cr(O.key,P,R)?h?B>=ne?b&&B!==a.current.length?q.current=-1:(Te.current=!1,q.current=A):q.current=$e(a,{startingIndex:B,disabledIndices:x}):q.current=Math.min(ne,$e(a,{startingIndex:B,disabledIndices:x})):h?B<=A?b&&B!==-1?q.current=a.current.length:(Te.current=!1,q.current=ne):q.current=$e(a,{startingIndex:B,decrement:!0,disabledIndices:x}):q.current=Math.max(A,$e(a,{startingIndex:B,decrement:!0,disabledIndices:x})),rn(a,q.current)&&(q.current=-1),Z(O)}}),H=u.useMemo(()=>C&&r&&z&&{"aria-activedescendant":`${ce}-${l}`},[C,r,z,ce,l]),te=u.useMemo(()=>({"aria-orientation":P==="both"?void 0:P,...$?{}:H,onKeyDown(O){if(O.key==="Tab"&&O.shiftKey&&r&&!C){const B=Ge(O.nativeEvent);if(B&&!Oe(v.current,B))return;Ve(O),n.setOpen(!1,se(Bn,O.nativeEvent)),at(s)&&s.focus();return}D(O)},onPointerMove(){Re.current=!0}}),[H,D,v,P,$,n,r,C,s]),N=u.useMemo(()=>{function O(A){y==="auto"&&Vo(A.nativeEvent)&&(ie.current=!C)}function B(A){ie.current=y,y==="auto"&&Lo(A.nativeEvent)&&(ie.current=!0)}return{onKeyDown(A){const ne=n.select("open");Re.current=!1;const ge=A.key.startsWith("Arrow"),be=su(A.key,F(),R),xe=Cn(A.key,P),ye=(m?be:xe)||A.key==="Enter"||A.key.trim()==="";if(C&&ne)return D(A);if(!(!ne&&!E&&ge)){if(ye){const pe=Cn(A.key,F());me.current=m&&pe?null:A.key}if(m){be&&(Ve(A),ne?(q.current=or(a,Ee.current),Z(A)):n.setOpen(!0,se(Tn,A.nativeEvent,A.currentTarget)));return}xe&&(g.current!=null&&(q.current=g.current),Ve(A),!ne&&E?n.setOpen(!0,se(Tn,A.nativeEvent,A.currentTarget)):D(A),ne&&Z(A))}},onFocus(A){n.select("open")&&!C&&(q.current=-1,Z(A))},onPointerDown:B,onPointerEnter:B,onMouseDown:O,onClick:O}},[D,Ee,y,a,m,Z,n,E,P,F,R,g,C]),G=u.useMemo(()=>({...H,...N}),[H,N]);return u.useMemo(()=>p?{reference:G,floating:te,item:w,trigger:N}:{},[p,G,te,N,w])}function uu(e){const t=u.useRef(""),n=u.useCallback(o=>{o.defaultPrevented||(t.current=o.pointerType,e(o,o.pointerType))},[e]);return{onClick:u.useCallback(o=>{if(o.detail===0){e(o,"keyboard");return}"pointerType"in o&&e(o,o.pointerType),e(o,t.current),t.current=""},[e]),onPointerDown:n}}function lu(e){const[t,n]=u.useState(null),r=_((a,l)=>{e||n(l||(To?"touch":""))}),o=u.useCallback(()=>{n(null)},[]),{onClick:s,onPointerDown:i}=uu(r);return u.useMemo(()=>({openMethod:t,reset:o,triggerProps:{onClick:s,onPointerDown:i}}),[t,o,s,i])}let Pr=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=un.startingStyle]="startingStyle",e[e.endingStyle=un.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),no=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const au={[no.popupOpen]:"",[no.pressed]:""},fu={[Pr.open]:""},du={[Pr.closed]:""},pu={[Pr.anchorHidden]:""},hu={open(e){return e?au:null}},Jo={open(e){return e?fu:du},anchorHidden(e){return e?pu:null}};function mu(e){return yr(19)?e:e?"true":void 0}const gu=u.forwardRef(function(t,n){const{cutout:r,...o}=t;let s;if(r){const i=r==null?void 0:r.getBoundingClientRect();s=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${i.left}px ${i.top}px,
      ${i.left}px ${i.bottom}px,
      ${i.right}px ${i.bottom}px,
      ${i.right}px ${i.top}px,
      ${i.left}px ${i.top}px
    )`}return Q.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...o,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:s}})});function bu(e){const t=u.useRef(!0);t.current&&(t.current=!1,e())}const Zo=u.createContext(void 0),es=u.createContext(void 0),ts=u.createContext(void 0),ns=u.createContext("");function ct(){const e=u.useContext(Zo);if(!e)throw new Error(st(22));return e}function Or(){const e=u.useContext(es);if(!e)throw new Error(st(23));return e}function Lt(){const e=u.useContext(ts);if(!e)throw new Error(st(24));return e}function yu(){return u.useContext(ns)}const vu=(e,t)=>Object.is(e,t);function Ut(e,t,n){return e==null||t==null?Object.is(e,t):n(e,t)}function wn(e,t,n){return!e||e.length===0?!1:e.some(r=>r===void 0?!1:Ut(r,t,n))}function an(e,t,n){return!e||e.length===0?-1:e.findIndex(r=>r===void 0?!1:Ut(r,t,n))}function xu(e,t,n){return e.filter(r=>!Ut(r,t,n))}function gr(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Tr(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function Eu(e){if(!Array.isArray(e))return e!=null&&!("null"in e);if(Tr(e)){for(const t of e)for(const n of t.items)if(n&&n.value==null&&n.label!=null)return!0;return!1}for(const t of e)if(t&&t.value==null&&t.label!=null)return!0;return!1}function We(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return gr(e)}function en(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?gr(e.value):gr(e)}function rs(e,t,n){function r(){return We(e,n)}if(n&&e!=null)return n(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(t&&!Array.isArray(t))return t[e]??r();if(Array.isArray(t)){const o=Tr(t)?t.flatMap(s=>s.items):t;if(e==null||typeof e!="object"){const s=o.find(i=>i.value===e);return s&&s.label!=null?s.label:r()}if("value"in e){const s=o.find(i=>i&&i.value===e.value);if(s&&s.label!=null)return s.label}}return r()}function Iu(e,t,n){return e.reduce((r,o,s)=>(s>0&&r.push(", "),r.push(Q.jsx(u.Fragment,{children:rs(o,t,n)},s)),r),[])}const L={id:K(e=>e.id),query:K(e=>e.query),items:K(e=>e.items),selectedValue:K(e=>e.selectedValue),hasSelectionChips:K(e=>{const t=e.selectedValue;return Array.isArray(t)&&t.length>0}),hasSelectedValue:K(e=>{const{selectedValue:t,selectionMode:n}=e;return t==null?!1:n==="multiple"&&Array.isArray(t)?t.length>0:!0}),hasNullItemLabel:K((e,t)=>t?Eu(e.items):!1),open:K(e=>e.open),mounted:K(e=>e.mounted),forceMounted:K(e=>e.forceMounted),inline:K(e=>e.inline),activeIndex:K(e=>e.activeIndex),selectedIndex:K(e=>e.selectedIndex),isActive:K((e,t)=>e.activeIndex===t),isSelected:K((e,t)=>{const n=e.isItemEqualToValue,r=e.selectedValue;return Array.isArray(r)?r.some(o=>Ut(o,t,n)):Ut(r,t,n)}),transitionStatus:K(e=>e.transitionStatus),popupProps:K(e=>e.popupProps),inputProps:K(e=>e.inputProps),triggerProps:K(e=>e.triggerProps),getItemProps:K(e=>e.getItemProps),positionerElement:K(e=>e.positionerElement),listElement:K(e=>e.listElement),triggerElement:K(e=>e.triggerElement),inputElement:K(e=>e.inputElement),popupSide:K(e=>e.popupSide),openMethod:K(e=>e.openMethod),inputInsidePopup:K(e=>e.inputInsidePopup),selectionMode:K(e=>e.selectionMode),listRef:K(e=>e.listRef),labelsRef:K(e=>e.labelsRef),popupRef:K(e=>e.popupRef),emptyRef:K(e=>e.emptyRef),inputRef:K(e=>e.inputRef),keyboardActiveRef:K(e=>e.keyboardActiveRef),chipsContainerRef:K(e=>e.chipsContainerRef),clearRef:K(e=>e.clearRef),valuesRef:K(e=>e.valuesRef),allValuesRef:K(e=>e.allValuesRef),name:K(e=>e.name),disabled:K(e=>e.disabled),readOnly:K(e=>e.readOnly),required:K(e=>e.required),grid:K(e=>e.grid),isGrouped:K(e=>e.isGrouped),virtualized:K(e=>e.virtualized),onOpenChangeComplete:K(e=>e.onOpenChangeComplete),openOnInputClick:K(e=>e.openOnInputClick),itemToStringLabel:K(e=>e.itemToStringLabel),isItemEqualToValue:K(e=>e.isItemEqualToValue),modal:K(e=>e.modal),autoHighlight:K(e=>e.autoHighlight),submitOnItemClick:K(e=>e.submitOnItemClick)};let ro=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const Ru={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},Cu={valid(e){return e===null?null:e?{[ro.valid]:""}:{[ro.invalid]:""}}},wu=u.createContext({invalid:void 0,name:void 0,validityData:{state:Ru,errors:[],error:"",value:"",initialValue:null},setValidityData:Me,disabled:void 0,touched:!1,setTouched:Me,dirty:!1,setDirty:Me,filled:!1,setFilled:Me,focused:!1,setFocused:Me,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=Ke)=>e,getInputValidationProps:(e=Ke)=>e,inputRef:{current:null},commit:async()=>{}}});function Ar(e=!0){const t=u.useContext(wu);if(t.setValidityData===Me&&!e)throw new Error(st(28));return t}function Su(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const Pu=u.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:Me,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function os(){return u.useContext(Pu)}function Ou(e){const{enabled:t=!0,value:n,id:r,name:o,controlRef:s,commit:i}=e,{formRef:a}=os(),{invalid:l,markedDirtyRef:c,validityData:p,setValidityData:d}=Ar(),b=_(e.getValue);Y(()=>{if(!t)return;let h=n;h===void 0&&(h=b()),p.initialValue===null&&h!==null&&d(m=>({...m,initialValue:h}))},[t,d,n,p.initialValue,b]),Y(()=>{!t||!r||a.current.fields.set(r,{getValue:b,name:o,controlRef:s,validityData:Su(p,l),validate(h=!0){let m=n;m===void 0&&(m=b()),c.current=!0,h?Wt.flushSync(()=>i(m)):i(m)}})},[i,s,t,a,b,r,l,c,o,p,n]),Y(()=>{const h=a.current.fields;return()=>{r&&h.delete(r)}},[a,r])}const Tu=u.createContext({controlId:void 0,setControlId:Me,labelId:void 0,setLabelId:Me,messageIds:[],setMessageIds:Me,getDescriptionProps:e=>e});function ss(){return u.useContext(Tu)}function Au(e={}){const{id:t,implicit:n=!1,controlRef:r}=e,{controlId:o,setControlId:s}=ss(),i=Eo(t);return Y(()=>{if(!(!n&&!t||s===Me)){if(n){const a=r==null?void 0:r.current;Je(a)&&a.closest("label")!=null?s(t??null):s(o??i)}else t&&s(t);return()=>{t&&s(void 0)}}},[t,r,o,s,n,i]),o??i}function ku(e,t){return(n,r)=>{if(n==null)return!1;const o=We(n,t);return e.contains(o,r)}}function Mu(e,t,n){return(r,o)=>{if(r==null)return!1;if(!o)return!0;const s=We(r,t),i=n!=null?We(n,t):"";return i&&e.contains(i,o)&&i.length===o.length?!0:e.contains(s,o)}}const oo=new Map;function is(e){return Array.isArray(e)?e.map(t=>is(t)).join(","):e==null?"":String(e)}function Vu(e={}){const t={usage:"search",sensitivity:"base",ignorePunctuation:!0,...e},n=`${is(e.locale)}|${JSON.stringify(t)}`,r=oo.get(n);if(r)return r;const o=new Intl.Collator(e.locale,t),s={contains(i,a,l){if(!a)return!0;const c=We(i,l);for(let p=0;p<=c.length-a.length;p+=1)if(o.compare(c.slice(p,p+a.length),a)===0)return!0;return!1},startsWith(i,a,l){if(!a)return!0;const c=We(i,l);return o.compare(c.slice(0,a.length),a)===0},endsWith(i,a,l){if(!a)return!0;const c=We(i,l),p=a.length;return c.length>=p&&o.compare(c.slice(c.length-p),a)===0}};return oo.set(n,s),s}const Lu=Vu;function Sn(e,t){const n=u.useRef(e),r=_(t);Y(()=>{n.current!==e&&r(n.current)},[e,r]),Y(()=>{n.current=e},[e])}const cs=Symbol("none"),At={value:cs,index:-1};function Fu(e){const{id:t,onOpenChangeComplete:n,defaultSelectedValue:r=null,selectedValue:o,onSelectedValueChange:s,defaultInputValue:i,inputValue:a,selectionMode:l="none",onItemHighlighted:c,name:p,disabled:d=!1,readOnly:b=!1,required:h=!1,inputRef:m,grid:R=!1,items:C,filteredItems:y,filter:f,openOnInputClick:E=!0,autoHighlight:x=!1,keepHighlight:P=!1,highlightItemOnHover:M=!0,loopFocus:T=!0,itemToStringLabel:S,itemToStringValue:W,isItemEqualToValue:X=vu,virtualized:ce=!1,inline:ve=!1,fillInputOnItemPress:ae=!0,modal:ue=!1,limit:v=-1,autoComplete:ee="list",locale:fe,submitOnItemClick:$=!1}=e,{clearErrors:ie}=os(),{setDirty:q,validityData:me,shouldValidateOnChange:Re,setFilled:Z,name:le,disabled:de,setTouched:Ue,setFocused:Te,validationMode:Ne,validation:Ee}=Ar(),Ae=Au({id:t}),je=Lu({locale:fe}),[g,j]=u.useState(!1),[I,z]=u.useState(null),w=u.useRef([]),F=u.useRef([]),D=u.useRef(null),H=u.useRef(null),te=u.useRef(null),N=u.useRef(!0),G=u.useRef(!1),O=u.useRef(null),B=u.useRef(null),A=u.useRef(null),ne=u.useRef(At),ge=u.useRef(null),be=u.useRef([]),xe=u.useRef([]),ye=de||d,pe=le??p,he=l==="multiple",Fe=l==="single",nt=a!==void 0||i!==void 0,ft=C!==void 0,Ft=y!==void 0;let Be;x==="always"?Be="always":Be=x?"input-change":!1;const[J,Se]=tr({controlled:o,default:he?r??Qt:r,name:"Combobox",state:"selectedValue"}),ke=u.useMemo(()=>f===null?()=>!0:f!==void 0?f:Fe&&!g?Mu(je,S,J):ku(je,S),[f,Fe,J,g,je,S]),_e=ot(()=>nt?i??"":Fe?We(J,S):"").current,[Ce,mt]=tr({controlled:a,default:_e,name:"Combobox",state:"inputValue"}),[we,Dt]=tr({controlled:e.open,default:e.defaultOpen,name:"Combobox",state:"open"}),Ye=Tr(C),Le=I??(Ce===""?"":String(Ce).trim()),zt=Fe?We(J,S):"",pn=Fe&&!g&&Le!==""&&zt!==""&&zt.length===Le.length&&je.contains(zt,Le),Rt=pn?"":Le,hn=ft&&Ft&&pn,Ze=u.useMemo(()=>C?Ye?C.flatMap(k=>k.items):C:Qt,[C,Ye]),gt=u.useMemo(()=>{if(y&&!hn)return y;if(!C)return Qt;if(Ye){const U=C,re=[];let Ie=0;for(const De of U){if(v>-1&&Ie>=v)break;const He=Rt===""?De.items:De.items.filter(Tt=>ke(Tt,Rt,S));if(He.length===0)continue;const Ot=v>-1?v-Ie:1/0,jt=He.slice(0,Ot);if(jt.length>0){const Tt={...De,items:jt};re.push(Tt),Ie+=jt.length}}return re}if(Rt==="")return v>-1?Ze.slice(0,v):Ze;const k=[];for(const U of Ze){if(v>-1&&k.length>=v)break;ke(U,Rt,S)&&k.push(U)}return k},[y,hn,C,Ye,Rt,v,ke,S,Ze]),Xe=u.useMemo(()=>Ye?gt.flatMap(U=>U.items):gt,[gt,Ye]),oe=ot(()=>new $t({id:Ae,selectedValue:J,open:we,filter:ke,query:Le,items:C,selectionMode:l,listRef:w,labelsRef:F,popupRef:D,emptyRef:te,inputRef:H,keyboardActiveRef:N,chipsContainerRef:O,clearRef:B,valuesRef:be,allValuesRef:xe,selectionEventRef:A,name:pe,disabled:ye,readOnly:b,required:h,grid:R,isGrouped:Ye,virtualized:ce,openOnInputClick:E,itemToStringLabel:S,isItemEqualToValue:X,modal:ue,autoHighlight:Be,submitOnItemClick:$,hasInputValue:nt,mounted:!1,forceMounted:!1,transitionStatus:"idle",inline:ve,activeIndex:null,selectedIndex:null,popupProps:{},inputProps:{},triggerProps:{},positionerElement:null,listElement:null,triggerElement:null,inputElement:null,popupSide:null,openMethod:null,inputInsidePopup:!0,onOpenChangeComplete:n||Me,setOpen:Me,setInputValue:Me,setSelectedValue:Me,setIndices:Me,onItemHighlighted:Me,handleSelection:Me,getItemProps:()=>Ke,forceMount:Me,requestSubmit:Me})).current,et=l==="none"?Ce:J,Kn=u.useMemo(()=>l==="none"?et:Array.isArray(J)?J.map(k=>en(k,W)):en(J,W),[et,W,l,J]),_t=_(c),Ct=_(n),wt=V(oe,L.activeIndex),mn=V(oe,L.selectedIndex),St=V(oe,L.positionerElement),Nt=V(oe,L.listElement),Pt=V(oe,L.triggerElement),Yt=V(oe,L.inputElement),dt=V(oe,L.inline),bt=V(oe,L.inputInsidePopup),gs=ze(Pt),{mounted:Mr,setMounted:bs,transitionStatus:Un}=Co(we),{openMethod:Vr,triggerProps:Wn,reset:ys}=lu(we);Ou({id:Ae,name:pe,commit:Ee.commit,value:et,controlRef:bt?gs:H,getValue:()=>Kn});const gn=_(()=>{C?F.current=Xe.map(k=>We(k,S)):oe.set("forceMounted",!0)}),vs=u.useRef(J);Y(()=>{J!==vs.current&&gn()},[gn,J]);const tt=_(k=>{oe.update(k);const U=k.type||"none";if(k.activeIndex!==void 0)if(k.activeIndex===null)ne.current!==At&&(ne.current=At,_t(void 0,Jt(U,void 0,{index:-1})));else{const re=be.current[k.activeIndex];ne.current={value:re,index:k.activeIndex},_t(re,Jt(U,void 0,{index:k.activeIndex}))}}),ut=_((k,U)=>{var re;if(G.current=U.reason===yt,(re=e.onInputValueChange)==null||re.call(e,k,U),!U.isCanceled){if(U.reason===kt){const Ie=k.trim()!=="";Ie&&j(!0),ge.current={hasQuery:Ie},Ie&&Be&&oe.state.activeIndex==null&&oe.set("activeIndex",0)}mt(k)}}),Xt=_((k,U)=>{var re;if(we!==k&&(U.reason==="escape-key"&&ft&&Xe.length===0&&!oe.state.emptyRef.current&&U.allowPropagation(),(re=e.onOpenChange)==null||re.call(e,k,U),!U.isCanceled&&(!k&&g&&(Fe?(z(Le),Le===""&&j(!1)):he&&(dt||bt?tt({activeIndex:null}):z(Le),ut("",se(yt,U.event)))),Dt(k),!k&&bt&&(U.reason===Bn||U.reason===vr)&&(Ue(!0),Te(!1),Ne==="onBlur")))){const Ie=l==="none"?Ce:J;Ee.commit(Ie)}}),pt=_((k,U)=>{if(s==null||s(k,U),U.isCanceled)return;Se(k),(l==="none"&&D.current&&ae||Fe&&!oe.state.inputInsidePopup)&&ut(We(k,S),se(U.reason,U.event)),Fe&&k!=null&&U.reason!==kt&&g&&z(Le)}),xs=_((k,U)=>{var jt;let re=U;if(re===void 0){if(wt===null)return;re=be.current[wt]}const Ie=Ge(k),De=A.current??k;A.current=null;const He=se(Vi,De),Ot=(jt=Ie==null?void 0:Ie.closest("a"))==null?void 0:jt.getAttribute("href");if(Ot){Ot.startsWith("#")&&Xt(!1,He);return}if(he){const Tt=Array.isArray(J)?J:[],Ms=wn(Tt,re,oe.state.isItemEqualToValue)?xu(Tt,re,oe.state.isItemEqualToValue):[...Tt,re];if(pt(Ms,He),!(H.current?H.current.value.trim()!=="":!1))return;oe.state.inputInsidePopup?ut("",se(yt,He.event)):Xt(!1,He)}else pt(re,He),Xt(!1,He)}),Gn=_(()=>{var U;if(!oe.state.submitOnItemClick)return;const k=(U=oe.state.inputElement)==null?void 0:U.form;k&&typeof k.requestSubmit=="function"&&k.requestSubmit()}),zn=_(()=>{if(bs(!1),Ct==null||Ct(!1),j(!1),ys(),z(null),tt(l==="none"?{activeIndex:null,selectedIndex:null}:{activeIndex:null}),he&&H.current&&H.current.value!==""&&!G.current&&ut("",se(yt)),Fe)if(oe.state.inputInsidePopup)H.current&&H.current.value!==""&&ut("",se(yt));else{const k=We(J,S);H.current&&H.current.value!==k&&ut(k,se(k===""?yt:Qe))}}),Es=u.useMemo(()=>dt&&St?{current:St.closest('[role="dialog"]')}:D,[dt,St]);Cr({enabled:!e.actionsRef,open:we,ref:Es,onComplete(){we||zn()}}),u.useImperativeHandle(e.actionsRef,()=>({unmount:zn}),[zn]),Y(function(){if(we||l==="none")return;const U=C?Ze:xe.current;if(he){const re=Array.isArray(J)?J:[],Ie=re[re.length-1],De=an(U,Ie,X);tt({selectedIndex:De===-1?null:De})}else{const re=an(U,J,X);tt({selectedIndex:re===-1?null:re})}},[we,J,C,l,Ze,he,X,tt]),Y(()=>{C&&(be.current=Xe,w.current.length=Xe.length)},[C,Xe]),Y(()=>{const k=ge.current;if(k&&(k.hasQuery?Be&&oe.set("activeIndex",0):Be==="always"&&oe.set("activeIndex",0),ge.current=null),!we&&!dt)return;const re=ft||Ft?Xe:be.current,Ie=oe.state.activeIndex;if(Ie==null){if(Be==="always"&&re.length>0){oe.set("activeIndex",0);return}ne.current!==At&&(ne.current=At,oe.state.onItemHighlighted(void 0,Jt(Qe,void 0,{index:-1})));return}if(Ie>=re.length){ne.current!==At&&(ne.current=At,oe.state.onItemHighlighted(void 0,Jt(Qe,void 0,{index:-1}))),oe.set("activeIndex",null);return}const De=re[Ie],He=ne.current.value,Ot=He!==cs&&oe.state.isItemEqualToValue(De,He);(ne.current.index!==Ie||!Ot)&&(ne.current={value:De,index:Ie},oe.state.onItemHighlighted(De,Jt(Qe,void 0,{index:Ie})))},[wt,Be,Ft,ft,Xe,dt,we,oe]),Y(()=>{if(!C||l==="none")return;const k=Ze;if(he){const Ie=Array.isArray(J)?J:Qt,De=Ie.filter(He=>wn(k,He,oe.state.isItemEqualToValue));De.length!==Ie.length&&pt(De,se(Qe));return}if(J==null||wn(k,J,oe.state.isItemEqualToValue))return;let re=null;r!=null&&wn(k,r,oe.state.isItemEqualToValue)&&(re=r),pt(re,se(Qe))},[C,Ze,he,l,J,r,oe,pt]),Y(()=>{if(l==="none"){Z(String(Ce)!=="");return}Z(he?Array.isArray(J)&&J.length>0:J!=null)},[Z,l,Ce,J,he]),u.useEffect(()=>{ft&&Be&&Xe.length===0&&tt({activeIndex:null})},[ft,Be,Xe.length,tt]),Sn(Le,()=>{!we||Le===""||Le===String(_e)||j(!0)}),Sn(J,()=>{if(l!=="none"&&(ie(pe),q(J!==me.initialValue),Re()?Ee.commit(J):Ee.commit(J,!0),he&&oe.state.selectedIndex!==null&&(!Array.isArray(J)||J.length===0)&&tt({activeIndex:null,selectedIndex:null}),Fe&&!nt&&!bt)){const k=We(J,S);Ce!==k&&ut(k,se(Qe))}}),Sn(Ce,()=>{l==="none"&&(ie(pe),q(Ce!==me.initialValue),Re()?Ee.commit(Ce):Ee.commit(Ce,!0))}),Sn(C,()=>{if(!Fe||nt||bt||g)return;const k=We(J,S);Ce!==k&&ut(k,se(Qe))});const bn=Qo({open:dt?!0:we,onOpenChange:Xt,elements:{reference:bt?Pt:Yt,floating:St}});let _n,Yn;dt||(_n=R?"grid":"listbox",Yn=we?"true":"false");const Is=u.useMemo(()=>{const k=(Yt==null?void 0:Yt.tagName)==="INPUT",U=k||we,re=k?{autoComplete:"off",spellCheck:"false",autoCorrect:"off",autoCapitalize:"none"}:{};return U&&(re.role="combobox",re["aria-expanded"]=Yn,re["aria-haspopup"]=_n,re["aria-controls"]=we?Nt==null?void 0:Nt.id:void 0,re["aria-autocomplete"]=ee),{reference:re,floating:{role:"presentation"}}},[Yt,we,Yn,_n,Nt==null?void 0:Nt.id,ee]),Rs=Kc(bn,{enabled:!b&&!ye&&E,event:"mousedown-only",toggle:!1,touchOpenDelay:bt?0:50}),Cs=Gc(bn,{enabled:!b&&!ye&&!dt,outsidePressEvent:{mouse:"sloppy",touch:"intentional"},bubbles:dt?!0:void 0,outsidePress(k){const U=Ge(k);return!Oe(Pt,U)&&!Oe(B.current,U)&&!Oe(O.current,U)}}),ws=cu(bn,{enabled:!b&&!ye,id:Ae,listRef:w,activeIndex:wt,selectedIndex:mn,virtual:!0,loopFocus:T,allowEscape:T&&!Be,focusItemOnOpen:g||l==="none"&&!Be?!1:"auto",focusItemOnHover:M,resetOnPointerLeave:!P,cols:R?2:1,orientation:R?"horizontal":void 0,disabledIndices:Qt,onNavigate(k,U){!U&&!we||Un==="ending"||tt(U?{activeIndex:k,type:N.current?"keyboard":"pointer"}:{activeIndex:k})}}),{getReferenceProps:Xn,getFloatingProps:Qn,getItemProps:Jn}=ru([Is,Rs,Cs,ws]);bu(()=>{oe.update({inline:ve,popupProps:Qn(),inputProps:Xn(),triggerProps:Wn,getItemProps:Jn,setOpen:Xt,setInputValue:ut,setSelectedValue:pt,setIndices:tt,onItemHighlighted:_t,handleSelection:xs,forceMount:gn,requestSubmit:Gn})}),Y(()=>{oe.update({id:Ae,selectedValue:J,open:we,mounted:Mr,transitionStatus:Un,items:C,inline:ve,popupProps:Qn(),inputProps:Xn(),triggerProps:Wn,openMethod:Vr,getItemProps:Jn,selectionMode:l,name:pe,disabled:ye,readOnly:b,required:h,grid:R,isGrouped:Ye,virtualized:ce,onOpenChangeComplete:Ct,openOnInputClick:E,itemToStringLabel:S,modal:ue,autoHighlight:Be,isItemEqualToValue:X,submitOnItemClick:$,hasInputValue:nt,requestSubmit:Gn})},[oe,Ae,J,we,Mr,Un,C,Qn,Xn,Jn,Vr,Wn,l,pe,ye,b,h,Ee,R,Ye,ce,Ct,E,S,ue,X,$,nt,ve,Gn,Be]);const Ss=cn(m,Ee.inputRef),Ps=u.useMemo(()=>({query:Le,filteredItems:gt,flatFilteredItems:Xe}),[Le,gt,Xe]),Os=u.useMemo(()=>Array.isArray(et)?"":en(et,W),[et,W]),Ts=he&&Array.isArray(J)&&J.length>0,As=u.useMemo(()=>!he||!Array.isArray(J)||!pe?null:J.map(k=>{const U=en(k,W);return Q.jsx("input",{type:"hidden",name:pe,value:U},U)}),[he,J,pe,W]),ks=Q.jsxs(u.Fragment,{children:[e.children,Q.jsx("input",{...Ee.getInputValidationProps({onFocus(){var k;if(bt){Pt==null||Pt.focus();return}(k=H.current||Pt)==null||k.focus()},onChange(k){if(k.nativeEvent.defaultPrevented)return;const U=k.target.value,re=se(kt,k.nativeEvent);function Ie(){if(he)return;if(l==="none"){q(U!==me.initialValue),ut(U,re),Re()&&Ee.commit(U);return}const De=be.current.find(He=>en(He,W).toLowerCase()===U.toLowerCase());De!=null&&(q(De!==me.initialValue),pt==null||pt(De,re),Re()&&Ee.commit(De))}C?Ie():(gn(),queueMicrotask(Ie))}}),name:he||l==="none"?void 0:pe,disabled:ye,required:h&&!Ts,readOnly:b,value:Os,ref:Ss,style:pe?kc:wr,tabIndex:-1,"aria-hidden":!0}),As]});return Q.jsx(Zo.Provider,{value:oe,children:Q.jsx(es.Provider,{value:bn,children:Q.jsx(ts.Provider,{value:Ps,children:Q.jsx(ns.Provider,{value:Ce,children:ks})})})})}const Du={...hu,...Cu,popupSide:e=>e?{"data-popup-side":e}:null,listEmpty:e=>e?{"data-list-empty":""}:null},us=u.createContext(void 0);function ls(){return u.useContext(us)}const as=u.createContext(void 0);function kr(e){const t=u.useContext(as);if(t===void 0&&!e)throw new Error(st(21));return t}const Nu=u.forwardRef(function(t,n){const{render:r,className:o,disabled:s=!1,id:i,...a}=t,{state:l,disabled:c,setTouched:p,setFocused:d,validationMode:b,validation:h}=Ar(),{labelId:m}=ss(),R=ls(),y=!!kr(!0),f=ct(),{filteredItems:E}=Lt(),x=yu(),P=V(f,L.required),M=ho(),T=V(f,L.disabled),S=V(f,L.readOnly),W=V(f,L.name),X=V(f,L.selectionMode),ce=V(f,L.autoHighlight),ve=V(f,L.inputProps),ae=V(f,L.triggerProps),ue=V(f,L.open),v=V(f,L.mounted),ee=V(f,L.selectedValue),fe=V(f,L.popupSide),$=V(f,L.positionerElement),ie=V(f,L.id),q=V(f,L.inline),me=!!ce,Re=v&&$?fe:null,Z=c||T||s,le=E.length===0,Ue=Eo(i??(y||q?void 0:ie)),[Te,Ne]=u.useState(null),Ee=u.useRef(!1),Ae=_(I=>{const z=y||f.state.inline;z&&!f.state.hasInputValue&&f.state.setInputValue("",se(Qe)),f.update({inputElement:I,inputInsidePopup:z})}),je=u.useMemo(()=>({...l,open:ue,disabled:Z,readOnly:S,popupSide:Re,listEmpty:le}),[l,ue,Z,S,Re,le]);function g(I){if(!R)return;let z;const{highlightedChipIndex:w}=R;if(w!==void 0){if(I.key==="ArrowLeft")I.preventDefault(),w>0?z=w-1:z=void 0;else if(I.key==="ArrowRight")I.preventDefault(),w<ee.length-1?z=w+1:z=void 0;else if(I.key==="Backspace"||I.key==="Delete"){I.preventDefault();const F=w>=ee.length-1?ee.length-2:w;z=F>=0?F:void 0,f.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"})}return z}return I.key==="ArrowLeft"&&(I.currentTarget.selectionStart??0)===0&&ee.length>0?(I.preventDefault(),z=Math.max(ee.length-1,0)):I.key==="Backspace"&&I.currentTarget.value===""&&ee.length>0&&(f.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"}),I.preventDefault()),z}return it("input",t,{state:je,ref:[n,f.state.inputRef,Ae],props:[ve,ae,{type:"text",value:t.value??Te??x,"aria-readonly":S||void 0,"aria-required":P||void 0,"aria-labelledby":m,disabled:Z,readOnly:S,required:X==="none"?P:void 0,...X==="none"&&W&&{name:W},id:Ue,onFocus(){d(!0)},onBlur(){if(p(!0),d(!1),b==="onBlur"){const I=X==="none"?x:ee;h.commit(I)}},onCompositionStart(I){kn||(Ee.current=!0,Ne(I.currentTarget.value))},onCompositionEnd(I){Ee.current=!1;const z=I.currentTarget.value;Ne(null),f.state.setInputValue(z,se(kt,I.nativeEvent))},onChange(I){if(Ee.current){const D=I.currentTarget.value;Ne(D),D===""&&!f.state.openOnInputClick&&!f.state.inputInsidePopup&&f.state.setOpen(!1,se(yt,I.nativeEvent));const H=D.trim(),te=me&&H!=="";!S&&!Z&&H!==""&&(f.state.setOpen(!0,se(kt,I.nativeEvent)),me||f.state.setIndices({activeIndex:null,selectedIndex:null,type:f.state.keyboardActiveRef.current?"keyboard":"pointer"})),ue&&f.state.activeIndex!==null&&!te&&f.state.setIndices({activeIndex:null,selectedIndex:null,type:f.state.keyboardActiveRef.current?"keyboard":"pointer"});return}f.state.setInputValue(I.currentTarget.value,se(kt,I.nativeEvent));const z=I.currentTarget.value==="",w=se(yt,I.nativeEvent);z&&!f.state.inputInsidePopup&&(X==="single"&&f.state.setSelectedValue(null,w),f.state.openOnInputClick||f.state.setOpen(!1,w));const F=I.currentTarget.value.trim();!S&&!Z&&F!==""&&(f.state.setOpen(!0,se(kt,I.nativeEvent)),me||f.state.setIndices({activeIndex:null,selectedIndex:null,type:f.state.keyboardActiveRef.current?"keyboard":"pointer"})),ue&&f.state.activeIndex!==null&&!me&&f.state.setIndices({activeIndex:null,selectedIndex:null,type:f.state.keyboardActiveRef.current?"keyboard":"pointer"})},onKeyDown(I){var H,te;if(Z||S||I.ctrlKey||I.shiftKey||I.altKey||I.metaKey)return;f.state.keyboardActiveRef.current=!0;const z=I.currentTarget,w=z.scrollWidth-z.clientWidth,F=M==="rtl";if(I.key==="Home"){Ve(I);const N=qr&&F?z.value.length:0;z.setSelectionRange(N,N),z.scrollLeft=0;return}if(I.key==="End"){Ve(I);const N=qr&&F?0:z.value.length;z.setSelectionRange(N,N),z.scrollLeft=F?-w:w;return}if(!v&&I.key==="Escape"){const N=X==="multiple"&&Array.isArray(ee)?ee.length===0:ee===null,G=se(xo,I.nativeEvent),O=X==="multiple"?[]:null;f.state.setInputValue("",G),f.state.setSelectedValue(O,G),!N&&!f.state.inline&&!G.isPropagationAllowed&&I.stopPropagation();return}if(R&&I.key==="Backspace"&&z.value===""&&R.highlightedChipIndex===void 0&&Array.isArray(ee)&&ee.length>0){const N=ee.slice(0,-1);f.state.setIndices({activeIndex:null,selectedIndex:null,type:f.state.keyboardActiveRef.current?"keyboard":"pointer"}),f.state.setSelectedValue(N,se(Qe,I.nativeEvent));return}const D=g(I);if(R==null||R.setHighlightedChipIndex(D),D!==void 0?(H=R==null?void 0:R.chipsRef.current[D])==null||H.focus():(te=f.state.inputRef.current)==null||te.focus(),I.which!==229&&I.key==="Enter"&&ue){const N=f.state.activeIndex,G=I.nativeEvent;if(N===null){f.state.setOpen(!1,se(Qe,G));return}Ve(I);const O=f.state.listRef.current[N];O&&(f.state.selectionEventRef.current=G,O.click(),f.state.selectionEventRef.current=null)}},onPointerMove(){f.state.keyboardActiveRef.current=!1},onPointerDown(){f.state.keyboardActiveRef.current=!1}},h?h.getValidationProps(a):a],stateAttributesMapping:Du})}),ju=u.createContext(null);function Bu(){return u.useContext(ju)}function Hu(e){const{children:t}=e,{filteredItems:n}=Lt(),r=Bu(),o=r?r.items:n;return o?Q.jsx(u.Fragment,{children:o.map(t)}):null}const $u=u.forwardRef(function(t,n){var r;const{render:o,className:s,children:i,...a}=t,l=ct(),c=Or(),p=!!kr(!0),{filteredItems:d}=Lt(),b=V(l,L.items),h=V(l,L.labelsRef),m=V(l,L.listRef),R=V(l,L.selectionMode),C=V(l,L.grid),y=V(l,L.popupProps),f=V(l,L.disabled),E=V(l,L.readOnly),x=V(l,L.virtualized),P=R==="multiple",M=d.length===0,T=_(ae=>{l.set("positionerElement",ae)}),S=_(ae=>{l.set("listElement",ae)}),W=u.useMemo(()=>typeof i=="function"?r||(r=Q.jsx(Hu,{children:i})):i,[i]),X=u.useMemo(()=>({empty:M}),[M]),ce=c.useState("floatingId"),ve=it("div",t,{state:X,ref:[n,S,p?null:T],props:[y,{children:W,tabIndex:-1,id:ce,role:C?"grid":"listbox","aria-multiselectable":P?"true":void 0,onKeyDown(ae){if(!(f||E)&&ae.key==="Enter"){const ue=l.state.activeIndex;if(ue==null)return;Ve(ae);const v=ae.nativeEvent,ee=l.state.listRef.current[ue];ee&&(l.state.selectionEventRef.current=v,ee.click(),l.state.selectionEventRef.current=null)}},onKeyDownCapture(){l.state.keyboardActiveRef.current=!0},onPointerMoveCapture(){l.state.keyboardActiveRef.current=!1}},a]});return x?ve:Q.jsx(po,{elementsRef:m,labelsRef:b?void 0:h,children:ve})}),fs=u.createContext(void 0);function qu(){const e=u.useContext(fs);if(e===void 0)throw new Error(st(20));return e}const Ku=u.forwardRef(function(t,n){const{keepMounted:r=!1,...o}=t,s=ct(),i=V(s,L.mounted),a=V(s,L.forceMounted);return i||r||a?Q.jsx(fs.Provider,{value:r,children:Q.jsx(Nc,{ref:n,...o})}):null}),Uu=e=>({name:"arrow",options:e,async fn(t){var ie,q;const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:p=0,offsetParent:d="real"}=Gs(e,t)||{};if(c==null)return{};const b=zs(p),h={x:n,y:r},m=_s(o),R=Ys(m),C=await i.getDimensions(c),y=m==="y",f=y?"top":"left",E=y?"bottom":"right",x=y?"clientHeight":"clientWidth",P=s.reference[R]+s.reference[m]-h[m]-s.floating[R],M=h[m]-s.reference[m],T=d==="real"?await((ie=i.getOffsetParent)==null?void 0:ie.call(i,c)):a.floating;let S=a.floating[x]||s.floating[R];(!S||!await((q=i.isElement)==null?void 0:q.call(i,T)))&&(S=a.floating[x]||s.floating[R]);const W=P/2-M/2,X=S/2-C[R]/2-1,ce=Math.min(b[f],X),ve=Math.min(b[E],X),ae=ce,ue=S-C[R]-ve,v=S/2-C[R]/2+W,ee=Xs(ae,v,ue),fe=!l.arrow&&br(o)!=null&&v!==ee&&s.reference[R]/2-(v<ae?ce:ve)-C[R]/2<0,$=fe?v<ae?v-ae:v-ue:0;return{[m]:h[m]+$,data:{[m]:ee,centerOffset:v-ee-$,...fe&&{alignmentOffset:$}},reset:fe}}}),Wu=(e,t)=>({...Uu(e),options:[e,t]}),Gu={name:"hide",async fn(e){var a;const{width:t,height:n,x:r,y:o}=e.rects.reference,s=t===0&&n===0&&r===0&&o===0;return{data:{referenceHidden:((a=(await Js().fn(e)).data)==null?void 0:a.referenceHidden)||s}}}},zu={sideX:"left",sideY:"top"};function ds(e,t,n){const r=e==="inline-start"||e==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[t]}function so(e,t,n){const{rects:r,placement:o}=e;return{side:ds(t,Pn(o),n),align:br(o)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function _u(e){var Be,J;const{anchor:t,positionMethod:n="absolute",side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,collisionBoundary:a,collisionPadding:l=5,sticky:c=!1,arrowPadding:p=5,disableAnchorTracking:d=!1,keepMounted:b=!1,floatingRootContext:h,mounted:m,collisionAvoidance:R,shiftCrossAxis:C=!1,nodeId:y,adaptiveOrigin:f,lazyFlip:E=!1,externalTree:x}=e,[P,M]=u.useState(null);!m&&P!==null&&M(null);const T=R.side||"flip",S=R.align||"flip",W=R.fallbackAxisSide||"end",X=typeof t=="function"?t:void 0,ce=_(X),ve=X?ce:t,ae=ze(t),v=ho()==="rtl",ee=P||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":v?"left":"right","inline-start":v?"right":"left"}[r],fe=s==="center"?ee:`${ee}-${s}`;let $=l;const ie=1,q=r==="bottom"?ie:0,me=r==="top"?ie:0,Re=r==="right"?ie:0,Z=r==="left"?ie:0;typeof $=="number"?$={top:$+q,right:$+Z,bottom:$+me,left:$+Re}:$&&($={top:($.top||0)+q,right:($.right||0)+Z,bottom:($.bottom||0)+me,left:($.left||0)+Re});const le={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:$},de=u.useRef(null),Ue=ze(o),Te=ze(i),Ae=[ti(Se=>{const ke=so(Se,r,v),_e=typeof Ue.current=="function"?Ue.current(ke):Ue.current,Ce=typeof Te.current=="function"?Te.current(ke):Te.current;return{mainAxis:_e,crossAxis:Ce,alignmentAxis:Ce}},[typeof o!="function"?o:0,typeof i!="function"?i:0,v,r])],je=S==="none"&&T!=="shift",g=!je&&(c||C||T==="shift"),j=T==="none"?null:Zs({...le,padding:{top:$.top+ie,right:$.right+ie,bottom:$.bottom+ie,left:$.left+ie},mainAxis:!C&&T==="flip",crossAxis:S==="flip"?"alignment":!1,fallbackAxisSideDirection:W}),I=je?null:ni(Se=>{const ke=Gt(Se.elements.floating).documentElement;return{...le,rootBoundary:C?{x:0,y:0,width:ke.clientWidth,height:ke.clientHeight}:void 0,mainAxis:S!=="none",crossAxis:g,limiter:c||C?void 0:ri(_e=>{if(!de.current)return{};const{width:Ce,height:mt}=de.current.getBoundingClientRect(),we=Fr(Pn(_e.placement)),Dt=we==="y"?Ce:mt,Ye=we==="y"?$.left+$.right:$.top+$.bottom;return{offset:Dt/2+Ye/2}})}},[le,c,C,$,S]);T==="shift"||S==="shift"||s==="center"?Ae.push(I,j):Ae.push(j,I),Ae.push(ei({...le,apply({elements:{floating:Se},rects:{reference:ke},availableWidth:_e,availableHeight:Ce}){Object.entries({"--available-width":`${_e}px`,"--available-height":`${Ce}px`,"--anchor-width":`${ke.width}px`,"--anchor-height":`${ke.height}px`}).forEach(([mt,we])=>{Se.style.setProperty(mt,we)})}}),Wu(()=>({element:de.current||document.createElement("div"),padding:p,offsetParent:"floating"}),[p]),{name:"transformOrigin",fn(Se){var wt,mn,St;const{elements:ke,middlewareData:_e,placement:Ce,rects:mt,y:we}=Se,Dt=Pn(Ce),Ye=Fr(Dt),Le=de.current,zt=((wt=_e.arrow)==null?void 0:wt.x)||0,pn=((mn=_e.arrow)==null?void 0:mn.y)||0,Rt=(Le==null?void 0:Le.clientWidth)||0,hn=(Le==null?void 0:Le.clientHeight)||0,Ze=zt+Rt/2,gt=pn+hn/2,Xe=Math.abs(((St=_e.shift)==null?void 0:St.y)||0),oe=mt.reference.height/2,et=typeof o=="function"?o(so(Se,r,v)):o,Kn=Xe>et,_t={top:`${Ze}px calc(100% + ${et}px)`,bottom:`${Ze}px ${-et}px`,left:`calc(100% + ${et}px) ${gt}px`,right:`${-et}px ${gt}px`}[Dt],Ct=`${Ze}px ${mt.reference.y+oe-we}px`;return ke.floating.style.setProperty("--transform-origin",g&&Ye==="y"&&Kn?Ct:_t),{}}},Gu,f),Y(()=>{!m&&h&&h.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[m,h]);const z=u.useMemo(()=>({elementResize:!d&&typeof ResizeObserver<"u",layoutShift:!d&&typeof IntersectionObserver<"u"}),[d]),{refs:w,elements:F,x:D,y:H,middlewareData:te,update:N,placement:G,context:O,isPositioned:B,floatingStyles:A}=nu({rootContext:h,placement:fe,middleware:Ae,strategy:n,whileElementsMounted:b?void 0:(...Se)=>Dr(...Se,z),nodeId:y,externalTree:x}),{sideX:ne,sideY:ge}=te.adaptiveOrigin||zu,be=B?n:"fixed",xe=u.useMemo(()=>f?{position:be,[ne]:D,[ge]:H}:{position:be,...A},[f,be,ne,D,ge,H,A]),ye=u.useRef(null);Y(()=>{if(!m)return;const Se=ae.current,ke=typeof Se=="function"?Se():Se,Ce=(io(ke)?ke.current:ke)||null||null;Ce!==ye.current&&(w.setPositionReference(Ce),ye.current=Ce)},[m,w,ve,ae]),u.useEffect(()=>{if(!m)return;const Se=ae.current;typeof Se!="function"&&io(Se)&&Se.current!==ye.current&&(w.setPositionReference(Se.current),ye.current=Se.current)},[m,w,ve,ae]),u.useEffect(()=>{if(b&&m&&F.domReference&&F.floating)return Dr(F.domReference,F.floating,N,z)},[b,m,F,N,z]);const pe=Pn(G),he=ds(r,pe,v),Fe=br(G)||"center",nt=!!((Be=te.hide)!=null&&Be.referenceHidden);Y(()=>{E&&m&&B&&M(pe)},[E,m,B,pe]);const ft=u.useMemo(()=>{var Se,ke;return{position:"absolute",top:(Se=te.arrow)==null?void 0:Se.y,left:(ke=te.arrow)==null?void 0:ke.x}},[te.arrow]),Ft=((J=te.arrow)==null?void 0:J.centerOffset)!==0;return u.useMemo(()=>({positionerStyles:xe,arrowStyles:ft,arrowRef:de,arrowUncentered:Ft,side:he,align:Fe,physicalSide:pe,anchorHidden:nt,refs:w,context:O,isPositioned:B,update:N}),[xe,ft,de,Ft,he,Fe,pe,nt,w,O,B,N])}function io(e){return e!=null&&"current"in e}const Yu=u.forwardRef(function(t,n){const{render:r,className:o,anchor:s,positionMethod:i="absolute",side:a="bottom",align:l="center",sideOffset:c=0,alignOffset:p=0,collisionBoundary:d="clipping-ancestors",collisionPadding:b=5,arrowPadding:h=5,sticky:m=!1,disableAnchorTracking:R=!1,collisionAvoidance:C=Pi,...y}=t,f=ct(),{filteredItems:E}=Lt(),x=Or(),P=qu(),M=V(f,L.modal),T=V(f,L.open),S=V(f,L.mounted),W=V(f,L.openMethod),X=V(f,L.triggerElement),ce=V(f,L.inputElement),ve=V(f,L.inputInsidePopup),ae=E.length===0,v=_u({anchor:s??(ve?X:ce),floatingRootContext:x,positionMethod:i,mounted:S,side:a,sideOffset:c,align:l,alignOffset:p,arrowPadding:h,collisionBoundary:d,collisionPadding:b,sticky:m,disableAnchorTracking:R,keepMounted:P,collisionAvoidance:C,lazyFlip:!0});Sc(T&&M&&W!=="touch",X);const ee=u.useMemo(()=>{const me={...v.positionerStyles};return T||(me.pointerEvents="none"),{role:"presentation",hidden:!S,style:me}},[T,S,v.positionerStyles]),fe=u.useMemo(()=>({open:T,side:v.side,align:v.align,anchorHidden:v.anchorHidden,empty:ae}),[T,v.side,v.align,v.anchorHidden,ae]);Y(()=>{f.set("popupSide",v.side)},[f,v.side]);const $=u.useMemo(()=>({side:v.side,align:v.align,arrowRef:v.arrowRef,arrowUncentered:v.arrowUncentered,arrowStyles:v.arrowStyles,anchorHidden:v.anchorHidden,isPositioned:v.isPositioned}),[v.side,v.align,v.arrowRef,v.arrowUncentered,v.arrowStyles,v.anchorHidden,v.isPositioned]),ie=_(me=>{f.set("positionerElement",me)}),q=it("div",t,{state:fe,ref:[n,ie],props:[ee,y],stateAttributesMapping:Jo});return Q.jsxs(as.Provider,{value:$,children:[S&&M&&Q.jsx(gu,{inert:mu(!T),cutout:ce??X}),q]})});function Xu(e){return e==="starting"?wi:Ke}const Qu={...Jo,...Ro},Ju=u.forwardRef(function(t,n){const{render:r,className:o,initialFocus:s,finalFocus:i,...a}=t,l=ct(),c=kr(),p=Or(),{filteredItems:d}=Lt(),b=V(l,L.mounted),h=V(l,L.open),m=V(l,L.openMethod),R=V(l,L.transitionStatus),C=V(l,L.inputInsidePopup),y=V(l,L.inputElement),f=V(l,L.modal),E=d.length===0;Cr({open:h,ref:l.state.popupRef,onComplete(){h&&l.state.onOpenChangeComplete(!0)}});const x=u.useMemo(()=>({open:h,side:c.side,align:c.align,anchorHidden:c.anchorHidden,transitionStatus:R,empty:E}),[h,c.side,c.align,c.anchorHidden,R,E]),P=it("div",t,{state:x,ref:[n,l.state.popupRef],props:[{role:C?"dialog":"presentation",tabIndex:-1,onFocus(W){var ce;const X=Ge(W.nativeEvent);m!=="touch"&&(Oe(l.state.listElement,X)||X===W.currentTarget)&&((ce=l.state.inputRef.current)==null||ce.focus())}},Xu(R),a],stateAttributesMapping:Qu}),T=s===void 0?C?W=>W==="touch"?l.state.popupRef.current:y:!1:s;let S;return i!=null?S=i:S=C?void 0:!1,Q.jsx(qc,{context:p,disabled:!b,modal:C?f:!1,openInteractionType:m,initialFocus:T,returnFocus:S,children:P})}),ps=u.createContext(void 0);function hs(){const e=u.useContext(ps);if(!e)throw new Error(st(19));return e}const Zu=u.createContext(!1);function el(){return u.useContext(Zu)}const tl=u.memo(u.forwardRef(function(t,n){const{render:r,className:o,value:s=null,index:i,disabled:a=!1,nativeButton:l=!1,...c}=t,p=u.useRef(!1),d=u.useRef(null),b=So({index:i,textRef:d,indexGuessBehavior:wo.GuessFromOrder}),h=ct(),m=el(),{flatFilteredItems:R}=Lt(),C=V(h,L.open),y=V(h,L.selectionMode),f=V(h,L.readOnly),E=V(h,L.virtualized),x=V(h,L.isItemEqualToValue),P=y!=="none",M=i??(E?an(R,s,x):b.index),T=b.index!==-1,S=V(h,L.id),W=V(h,L.isActive,M),X=V(h,L.isSelected,s),ce=V(h,L.items),ve=V(h,L.getItemProps),ae=u.useRef(null),ue=S!=null&&T?`${S}-${M}`:void 0,v=X&&P;Y(()=>{if(!(T&&(E||i!=null)))return;const de=h.state.listRef.current;return de[M]=ae.current,()=>{delete de[M]}},[T,E,M,i,h]),Y(()=>{if(!T||ce)return;const le=h.state.valuesRef.current;return le[M]=s,y!=="none"&&h.state.allValuesRef.current.push(s),()=>{delete le[M]}},[T,ce,M,s,h,y]),Y(()=>{if(!C){p.current=!1;return}if(!T||ce)return;const le=h.state.selectedValue,de=Array.isArray(le)?le[le.length-1]:le;Ut(de,s,x)&&h.set("selectedIndex",M)},[T,ce,C,h,M,s,x]);const ee=u.useMemo(()=>({disabled:a,selected:v,highlighted:W}),[a,v,W]),fe=ve({active:W,selected:v});fe.id=void 0,fe.onFocus=void 0;const{getButtonProps:$,buttonRef:ie}=Po({disabled:a,focusableWhenDisabled:!0,native:l});function q(le){function de(){h.state.handleSelection(le,s)}h.state.submitOnItemClick?(Wt.flushSync(de),h.state.requestSubmit()):de()}const me={id:ue,role:m?"gridcell":"option","aria-selected":P?v:void 0,tabIndex:void 0,onPointerDownCapture(le){p.current=!0,le.preventDefault()},onClick(le){a||f||q(le.nativeEvent)},onMouseUp(le){const de=p.current;p.current=!1,!(a||f||le.button!==0||de||!W)&&q(le.nativeEvent)}},Re=it("div",t,{ref:[ie,n,b.ref,ae],state:ee,props:[fe,me,c,$]}),Z=u.useMemo(()=>({selected:v,textRef:d}),[v,d]);return Q.jsx(ps.Provider,{value:Z,children:Re})})),nl=u.forwardRef(function(t,n){const{render:r,className:o,children:s,...i}=t,{filteredItems:a}=Lt(),l=ct(),c=a.length===0?s:null;return it("div",t,{ref:[n,l.state.emptyRef],props:[{children:c,role:"status","aria-live":"polite","aria-atomic":!0},i]})});function rl(e){const{multiple:t=!1,defaultValue:n,value:r,onValueChange:o,...s}=e;return Q.jsx(Fu,{...s,selectionMode:t?"multiple":"single",selectedValue:r,defaultSelectedValue:n,onSelectedValueChange:o})}function ol(e){const{children:t,placeholder:n}=e,r=ct(),o=V(r,L.itemToStringLabel),s=V(r,L.selectedValue),i=V(r,L.items),a=V(r,L.selectionMode)==="multiple",l=V(r,L.hasSelectedValue),c=!l&&n!=null&&t==null,p=V(r,L.hasNullItemLabel,c);let d=null;return typeof t=="function"?d=t(s):t!=null?d=t:!l&&n!=null&&!p?d=n:a&&Array.isArray(s)?d=Iu(s,i,o):d=rs(s,i,o),Q.jsx(u.Fragment,{children:d})}const sl=u.forwardRef(function(t,n){const r=t.keepMounted??!1,{selected:o}=hs();return r||o?Q.jsx(il,{...t,ref:n}):null}),il=u.memo(u.forwardRef((e,t)=>{const{render:n,className:r,keepMounted:o,...s}=e,{selected:i}=hs(),a=u.useRef(null),{transitionStatus:l,setMounted:c}=Co(i),p=u.useMemo(()=>({selected:i,transitionStatus:l}),[i,l]),d=it("span",e,{ref:[t,a],state:p,props:[{"aria-hidden":!0,children:""},s],stateAttributesMapping:Ro});return Cr({open:i,ref:a,onComplete(){i||c(!1)}}),d})),cl=u.forwardRef(function(t,n){const{render:r,className:o,...s}=t,i=ct(),a=V(i,L.open),l=V(i,L.hasSelectionChips),[c,p]=u.useState(void 0);a&&c!==void 0&&p(void 0);const d=u.useRef([]),b=it("div",t,{ref:[n,i.state.chipsContainerRef],props:[l?{role:"toolbar"}:Ke,s]}),h=u.useMemo(()=>({highlightedChipIndex:c,setHighlightedChipIndex:p,chipsRef:d}),[c,p,d]);return Q.jsx(us.Provider,{value:h,children:Q.jsx(po,{elementsRef:d,children:b})})}),ms=u.createContext(void 0);function ul(){const e=u.useContext(ms);if(!e)throw new Error(st(17));return e}const ll=u.forwardRef(function(t,n){const{render:r,className:o,...s}=t,i=ct(),{setHighlightedChipIndex:a,chipsRef:l}=ls(),c=V(i,L.disabled),p=V(i,L.readOnly),d=V(i,L.selectedValue),{ref:b,index:h}=So();function m(f){let E=h;if(f.key==="ArrowLeft")f.preventDefault(),h>0?E=h-1:E=void 0;else if(f.key==="ArrowRight")f.preventDefault(),h<d.length-1?E=h+1:E=void 0;else if(f.key==="Backspace"||f.key==="Delete"){const x=h>=d.length-1?d.length-2:h;E=x>=0?x:void 0,Ve(f),i.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"}),i.state.setSelectedValue(d.filter((P,M)=>M!==h),se(Qe,f.nativeEvent))}else f.key==="Enter"||f.key===" "?(Ve(f),E=void 0):f.key==="ArrowDown"||f.key==="ArrowUp"?(Ve(f),i.state.setOpen(!0,se(Tn,f.nativeEvent)),E=void 0):f.key.length===1&&!f.ctrlKey&&!f.metaKey&&!f.altKey&&(E=void 0);return E}const R=u.useMemo(()=>({disabled:c}),[c]),C=it("div",t,{ref:[n,b],state:R,props:[{tabIndex:-1,"aria-disabled":c||void 0,"aria-readonly":p||void 0,onKeyDown(f){var x,P;if(c||p)return;const E=m(f);Wt.flushSync(()=>{a(E)}),E===void 0?(x=i.state.inputRef.current)==null||x.focus():(P=l.current[E])==null||P.focus()},onMouseDown(f){var E;c||p||(f.preventDefault(),(E=i.state.inputRef.current)==null||E.focus())}},s]}),y=u.useMemo(()=>({index:h}),[h]);return Q.jsx(ms.Provider,{value:y,children:C})}),al=u.forwardRef(function(t,n){const{render:r,className:o,disabled:s=!1,nativeButton:i=!0,...a}=t,l=ct(),{index:c}=ul(),p=V(l,L.disabled),d=V(l,L.readOnly),b=V(l,L.selectedValue),h=V(l,L.isItemEqualToValue),m=p||s,{buttonRef:R,getButtonProps:C}=Po({native:i,disabled:m||d,focusableWhenDisabled:!0}),y=u.useMemo(()=>({disabled:m}),[m]);return it("button",t,{ref:[n,R],state:y,props:[{tabIndex:-1,"aria-readonly":d||void 0,onClick(E){var S;if(m||d)return;const x=se(Br,E.nativeEvent),P=l.state.activeIndex,M=b[c],T=an(l.state.valuesRef.current,M,h);T!==-1&&P===T&&l.state.setIndices({activeIndex:null,type:l.state.keyboardActiveRef.current?"pointer":"keyboard"}),l.state.setSelectedValue(b.filter((W,X)=>X!==c),x),x.isPropagationAllowed||E.stopPropagation(),(S=l.state.inputRef.current)==null||S.focus()},onKeyDown(E){var P;if(m||d)return;const x=se(Br,E.nativeEvent);if(E.key==="Enter"||E.key===" "){const M=l.state.activeIndex,T=b[c],S=an(l.state.valuesRef.current,T,h);S!==-1&&M===S&&l.state.setIndices({activeIndex:null,type:l.state.keyboardActiveRef.current?"pointer":"keyboard"}),l.state.setSelectedValue(b.filter((W,X)=>X!==c),x),x.isPropagationAllowed||Ve(E),(P=l.state.inputRef.current)==null||P.focus()}}},a,C]})}),Il=rl;function Rl({...e}){return Q.jsx(ol,{"data-slot":"combobox-value",...e})}function Cl({className:e,side:t="bottom",sideOffset:n=6,align:r="start",alignOffset:o=0,anchor:s,...i}){return Q.jsx(Ku,{children:Q.jsx(Yu,{side:t,sideOffset:n,align:r,alignOffset:o,anchor:s,className:"isolate z-50",children:Q.jsx(Ju,{"data-slot":"combobox-content","data-chips":!!s,className:Mt("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 *:data-[slot=input-group]:bg-input/30 *:data-[slot=input-group]:border-input/30 group/combobox-content relative max-h-96 w-(--anchor-width) max-w-(--available-width) min-w-[calc(var(--anchor-width)+--spacing(7))] origin-(--transform-origin) overflow-hidden rounded-md shadow-md ring-1 duration-100 data-[chips=true]:min-w-(--anchor-width) *:data-[slot=input-group]:m-1 *:data-[slot=input-group]:mb-0 *:data-[slot=input-group]:h-8 *:data-[slot=input-group]:shadow-none",e),...i})})})}function wl({className:e,...t}){return Q.jsx($u,{"data-slot":"combobox-list",className:Mt("max-h-[min(calc(--spacing(96)---spacing(9)),calc(var(--available-height)---spacing(9)))] scroll-py-1 overflow-y-auto p-1 data-empty:p-0",e),...t})}function Sl({className:e,children:t,...n}){return Q.jsxs(tl,{"data-slot":"combobox-item",className:Mt("data-highlighted:bg-accent data-highlighted:text-accent-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[t,Q.jsx(sl,{"data-slot":"combobox-item-indicator",render:Q.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:Q.jsx(Ds,{className:"pointer-events-none size-4 pointer-coarse:size-5"})})]})}function Pl({className:e,...t}){return Q.jsx(nl,{"data-slot":"combobox-empty",className:Mt("text-muted-foreground hidden w-full justify-center py-2 text-center text-sm group-data-empty/combobox-content:flex",e),...t})}function Ol({className:e,...t}){return Q.jsx(cl,{"data-slot":"combobox-chips",className:Mt("dark:bg-input/30 border-input focus-within:border-ring focus-within:ring-ring/50 has-aria-invalid:ring-destructive/20 dark:has-aria-invalid:ring-destructive/40 has-aria-invalid:border-destructive dark:has-aria-invalid:border-destructive/50 flex min-h-9 flex-wrap items-center gap-1.5 rounded-md border bg-transparent bg-clip-padding px-2.5 py-1.5 text-sm shadow-xs transition-[color,box-shadow] focus-within:ring-[3px] has-aria-invalid:ring-[3px] has-data-[slot=combobox-chip]:px-1.5",e),...t})}function Tl({className:e,children:t,showRemove:n=!0,...r}){return Q.jsxs(ll,{"data-slot":"combobox-chip",className:Mt("bg-muted text-foreground flex h-[calc(--spacing(5.5))] w-fit items-center justify-center gap-1 rounded-sm px-1.5 text-xs font-medium whitespace-nowrap has-disabled:pointer-events-none has-disabled:cursor-not-allowed has-disabled:opacity-50 has-data-[slot=combobox-chip-remove]:pr-0",e),...r,children:[t,n&&Q.jsx(al,{render:Q.jsx(Fs,{variant:"ghost",size:"icon-xs"}),className:"-ml-1 opacity-50 hover:opacity-100","data-slot":"combobox-chip-remove",children:Q.jsx(Ns,{className:"pointer-events-none"})})]})}function Al({className:e,children:t,...n}){return Q.jsx(Nu,{"data-slot":"combobox-chip-input",className:Mt("min-w-16 flex-1 outline-none",e),...n})}function kl(){return u.useRef(null)}export{Il as C,Ol as a,Rl as b,Tl as c,Al as d,Cl as e,Pl as f,wl as g,Sl as h,kl as u};
